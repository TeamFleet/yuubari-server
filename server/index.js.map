{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./config/webpack/after.js","webpack:///./config/webpack/before.js","webpack:///./config/webpack/index.js","webpack:///./koot.config.js","webpack:///./logs/tmp/config/portion.server.1585470042821.js","webpack:///./node_modules/history/lib/Actions.js","webpack:///./node_modules/history/lib/AsyncUtils.js","webpack:///./node_modules/history/lib/LocationUtils.js","webpack:///./node_modules/history/lib/PathUtils.js","webpack:///./node_modules/history/lib/createHistory.js","webpack:///./node_modules/history/lib/createMemoryHistory.js","webpack:///./node_modules/history/lib/runTransitionHook.js","webpack:///./node_modules/koot/React/client-session-store.js","webpack:///./node_modules/koot/React/client-update-page-info.js","webpack:///./node_modules/koot/React/component-extender.js","webpack:///./node_modules/koot/React/get-render-props.js","webpack:///./node_modules/koot/React/history.js","webpack:///./node_modules/koot/React/inject/_cache-keys.js","webpack:///./node_modules/koot/React/is-render-safe.js","webpack:///./node_modules/koot/React/realtime-location/actionType.js","webpack:///./node_modules/koot/React/realtime-location/actions.js","webpack:///./node_modules/koot/React/realtime-location/api.js","webpack:///./node_modules/koot/React/realtime-location/index.js","webpack:///./node_modules/koot/React/realtime-location/reducer.js","webpack:///./node_modules/koot/React/redux.js","webpack:///./node_modules/koot/React/styles.js","webpack:///./node_modules/koot/ReactApp/action-types.js","webpack:///./node_modules/koot/ReactApp/server/index.js","webpack:///./node_modules/koot/ReactApp/server/middlewares/isomorphic/index.js","webpack:///./node_modules/koot/ReactApp/server/middlewares/isomorphic/ssr.js","webpack:///./node_modules/koot/ReactApp/server/middlewares/router-dev.js","webpack:///./node_modules/koot/ReactApp/server/middlewares/static.js","webpack:///./node_modules/koot/ReactApp/server/redux.js","webpack:///./node_modules/koot/ReactApp/server/render-cache.js","webpack:///./node_modules/koot/ReactApp/server/run.js","webpack:///./node_modules/koot/ReactApp/server/validate/create-render-cache-map.js","webpack:///./node_modules/koot/ReactApp/server/validate/i18n.js","webpack:///./node_modules/koot/ReactApp/server/validate/template.js","webpack:///./node_modules/koot/defaults/before-build.js","webpack:///./node_modules/koot/defaults/defines-server.js","webpack:///./node_modules/koot/defaults/defines.js","webpack:///./node_modules/koot/defaults/dev-request-uri.js","webpack:///./node_modules/koot/defaults/koa-static.js","webpack:///./node_modules/koot/defaults/render-cache.js","webpack:///./node_modules/koot/defaults/webpack-dev-server.js","webpack:///./node_modules/koot/i18n/action-types.js","webpack:///./node_modules/koot/i18n/get-language-list-from-state.js","webpack:///./node_modules/koot/i18n/get-locales-config.js","webpack:///./node_modules/koot/i18n/get-type.js","webpack:///./node_modules/koot/i18n/is-enabled.js","webpack:///./node_modules/koot/i18n/locale-ids.js","webpack:///./node_modules/koot/i18n/locales.js","webpack:///./node_modules/koot/i18n/parse-language-list.js","webpack:///./node_modules/koot/i18n/parse-locale-id.js","webpack:///./node_modules/koot/i18n/read-locale-file-sync.js","webpack:///./node_modules/koot/i18n/redux/index.js","webpack:///./node_modules/koot/i18n/server/get-lang-from-ctx.js","webpack:///./node_modules/koot/i18n/set-cookie.js","webpack:///./node_modules/koot/index.js","webpack:///./node_modules/koot/libs/create-koa-app.js","webpack:///./node_modules/koot/libs/error-msg.js","webpack:///./node_modules/koot/libs/filter-state.js","webpack:///./node_modules/koot/libs/get-dev-routes.js","webpack:///./node_modules/koot/libs/get-dir-dev-dll.js","webpack:///./node_modules/koot/libs/get-dir-dev-tmp.js","webpack:///./node_modules/koot/libs/get-dir-dist-public-foldername.js","webpack:///./node_modules/koot/libs/get-dir-dist-public.js","webpack:///./node_modules/koot/libs/get-free-port.js","webpack:///./node_modules/koot/libs/get-log-msg.js","webpack:///./node_modules/koot/libs/koa-middlewares/remove-slashes.js","webpack:///./node_modules/koot/libs/log.js","webpack:///./node_modules/koot/libs/validate-port.js","webpack:///./node_modules/koot/utils/get-chunkmap-path.js","webpack:///./node_modules/koot/utils/get-chunkmap.js","webpack:///./node_modules/koot/utils/get-client-file-path.js","webpack:///./node_modules/koot/utils/get-cwd.js","webpack:///./node_modules/koot/utils/get-dist-path.js","webpack:///./node_modules/koot/utils/get-pathname-dev-server-start.js","webpack:///./node_modules/koot/utils/get-public-dir.js","webpack:///./node_modules/koot/utils/get-sw-pathname.js","webpack:///./node_modules/koot/utils/get-webpack-dev-server-port.js","webpack:///./node_modules/lodash/_Hash.js","webpack:///./node_modules/lodash/_ListCache.js","webpack:///./node_modules/lodash/_Map.js","webpack:///./node_modules/lodash/_MapCache.js","webpack:///./node_modules/lodash/_Stack.js","webpack:///./node_modules/lodash/_Symbol.js","webpack:///./node_modules/lodash/_Uint8Array.js","webpack:///./node_modules/lodash/_apply.js","webpack:///./node_modules/lodash/_arrayLikeKeys.js","webpack:///./node_modules/lodash/_arrayMap.js","webpack:///./node_modules/lodash/_assignMergeValue.js","webpack:///./node_modules/lodash/_assignValue.js","webpack:///./node_modules/lodash/_assocIndexOf.js","webpack:///./node_modules/lodash/_baseAssignValue.js","webpack:///./node_modules/lodash/_baseCreate.js","webpack:///./node_modules/lodash/_baseFor.js","webpack:///./node_modules/lodash/_baseGet.js","webpack:///./node_modules/lodash/_baseGetTag.js","webpack:///./node_modules/lodash/_baseIsArguments.js","webpack:///./node_modules/lodash/_baseIsNative.js","webpack:///./node_modules/lodash/_baseIsTypedArray.js","webpack:///./node_modules/lodash/_baseKeysIn.js","webpack:///./node_modules/lodash/_baseMerge.js","webpack:///./node_modules/lodash/_baseMergeDeep.js","webpack:///./node_modules/lodash/_baseRest.js","webpack:///./node_modules/lodash/_baseSet.js","webpack:///./node_modules/lodash/_baseSetToString.js","webpack:///./node_modules/lodash/_baseTimes.js","webpack:///./node_modules/lodash/_baseToString.js","webpack:///./node_modules/lodash/_baseUnary.js","webpack:///./node_modules/lodash/_castPath.js","webpack:///./node_modules/lodash/_cloneArrayBuffer.js","webpack:///./node_modules/lodash/_cloneBuffer.js","webpack:///./node_modules/lodash/_cloneTypedArray.js","webpack:///./node_modules/lodash/_copyArray.js","webpack:///./node_modules/lodash/_copyObject.js","webpack:///./node_modules/lodash/_coreJsData.js","webpack:///./node_modules/lodash/_createAssigner.js","webpack:///./node_modules/lodash/_createBaseFor.js","webpack:///./node_modules/lodash/_defineProperty.js","webpack:///./node_modules/lodash/_freeGlobal.js","webpack:///./node_modules/lodash/_getMapData.js","webpack:///./node_modules/lodash/_getNative.js","webpack:///./node_modules/lodash/_getPrototype.js","webpack:///./node_modules/lodash/_getRawTag.js","webpack:///./node_modules/lodash/_getValue.js","webpack:///./node_modules/lodash/_hashClear.js","webpack:///./node_modules/lodash/_hashDelete.js","webpack:///./node_modules/lodash/_hashGet.js","webpack:///./node_modules/lodash/_hashHas.js","webpack:///./node_modules/lodash/_hashSet.js","webpack:///./node_modules/lodash/_initCloneObject.js","webpack:///./node_modules/lodash/_isIndex.js","webpack:///./node_modules/lodash/_isIterateeCall.js","webpack:///./node_modules/lodash/_isKey.js","webpack:///./node_modules/lodash/_isKeyable.js","webpack:///./node_modules/lodash/_isMasked.js","webpack:///./node_modules/lodash/_isPrototype.js","webpack:///./node_modules/lodash/_listCacheClear.js","webpack:///./node_modules/lodash/_listCacheDelete.js","webpack:///./node_modules/lodash/_listCacheGet.js","webpack:///./node_modules/lodash/_listCacheHas.js","webpack:///./node_modules/lodash/_listCacheSet.js","webpack:///./node_modules/lodash/_mapCacheClear.js","webpack:///./node_modules/lodash/_mapCacheDelete.js","webpack:///./node_modules/lodash/_mapCacheGet.js","webpack:///./node_modules/lodash/_mapCacheHas.js","webpack:///./node_modules/lodash/_mapCacheSet.js","webpack:///./node_modules/lodash/_memoizeCapped.js","webpack:///./node_modules/lodash/_nativeCreate.js","webpack:///./node_modules/lodash/_nativeKeysIn.js","webpack:///./node_modules/lodash/_nodeUtil.js","webpack:///./node_modules/lodash/_objectToString.js","webpack:///./node_modules/lodash/_overArg.js","webpack:///./node_modules/lodash/_overRest.js","webpack:///./node_modules/lodash/_root.js","webpack:///./node_modules/lodash/_safeGet.js","webpack:///./node_modules/lodash/_setToString.js","webpack:///./node_modules/lodash/_shortOut.js","webpack:///./node_modules/lodash/_stackClear.js","webpack:///./node_modules/lodash/_stackDelete.js","webpack:///./node_modules/lodash/_stackGet.js","webpack:///./node_modules/lodash/_stackHas.js","webpack:///./node_modules/lodash/_stackSet.js","webpack:///./node_modules/lodash/_stringToPath.js","webpack:///./node_modules/lodash/_toKey.js","webpack:///./node_modules/lodash/_toSource.js","webpack:///./node_modules/lodash/constant.js","webpack:///./node_modules/lodash/eq.js","webpack:///./node_modules/lodash/get.js","webpack:///./node_modules/lodash/identity.js","webpack:///./node_modules/lodash/isArguments.js","webpack:///./node_modules/lodash/isArray.js","webpack:///./node_modules/lodash/isArrayLike.js","webpack:///./node_modules/lodash/isArrayLikeObject.js","webpack:///./node_modules/lodash/isBuffer.js","webpack:///./node_modules/lodash/isFunction.js","webpack:///./node_modules/lodash/isLength.js","webpack:///./node_modules/lodash/isObject.js","webpack:///./node_modules/lodash/isObjectLike.js","webpack:///./node_modules/lodash/isPlainObject.js","webpack:///./node_modules/lodash/isSymbol.js","webpack:///./node_modules/lodash/isTypedArray.js","webpack:///./node_modules/lodash/keysIn.js","webpack:///./node_modules/lodash/memoize.js","webpack:///./node_modules/lodash/merge.js","webpack:///./node_modules/lodash/set.js","webpack:///./node_modules/lodash/stubFalse.js","webpack:///./node_modules/lodash/toPlainObject.js","webpack:///./node_modules/lodash/toString.js","webpack:///./node_modules/simple-git/promise.js","webpack:///./node_modules/simple-git/src/git.js","webpack:///./node_modules/simple-git/src/index.js","webpack:///./node_modules/simple-git/src/responses/BranchDeleteSummary.js","webpack:///./node_modules/simple-git/src/responses/BranchSummary.js","webpack:///./node_modules/simple-git/src/responses/CommitSummary.js","webpack:///./node_modules/simple-git/src/responses/DiffSummary.js","webpack:///./node_modules/simple-git/src/responses/FetchSummary.js","webpack:///./node_modules/simple-git/src/responses/FileStatusSummary.js","webpack:///./node_modules/simple-git/src/responses/ListLogSummary.js","webpack:///./node_modules/simple-git/src/responses/MergeSummary.js","webpack:///./node_modules/simple-git/src/responses/MoveSummary.js","webpack:///./node_modules/simple-git/src/responses/PullSummary.js","webpack:///./node_modules/simple-git/src/responses/StatusSummary.js","webpack:///./node_modules/simple-git/src/responses/TagList.js","webpack:///./node_modules/simple-git/src/responses/index.js","webpack:///./node_modules/simple-git/src/util/deferred.js","webpack:///./node_modules/simple-git/src/util/dependencies.js","webpack:///./node_modules/simple-git/src/util/exists.js","webpack:///(webpack)/buildin/module.js","webpack:///./scripts/build/prepare-static.js","webpack:///./src/_server/inject.js","webpack:///./src/_server/lifecycle/after.js","webpack:///./src/_server/lifecycle/before.js","webpack:///./src/build/webapp/after-server.js","webpack:///./src/build/webapp/before.js","webpack:///./src/channel.js","webpack:///./src/defines.js","webpack:///./src/directories.js","webpack:///./src/locales/index.js","webpack:///./src/scripts sync","webpack:///./src/scripts/clean-web-sourcemap.js","webpack:///./src/scripts/commons/consts.js","webpack:///./src/scripts/commons/progress.js","webpack:///./src/scripts/commons/spinner.js","webpack:///./src/scripts/copyfiles.js","webpack:///./src/scripts/database/equipment-collections.js","webpack:///./src/scripts/database/ship-collections.js","webpack:///./src/scripts/validate-database-files.js","webpack:///./src/scripts/validate-less-variables.js","webpack:///external \"buffer\"","webpack:///external \"camelcase\"","webpack:///external \"chalk\"","webpack:///external \"child_process\"","webpack:///external \"cli-spinners\"","webpack:///external \"debug\"","webpack:///external \"fs\"","webpack:///external \"fs-extra\"","webpack:///external \"glob\"","webpack:///external \"hoist-non-react-statics\"","webpack:///external \"image-size\"","webpack:///external \"inquirer\"","webpack:///external \"invariant\"","webpack:///external \"is-port-reachable\"","webpack:///external \"isomorphic-fetch\"","webpack:///external \"json-pretty\"","webpack:///external \"kckit\"","webpack:///external \"koa\"","webpack:///external \"koa-convert\"","webpack:///external \"koa-helmet\"","webpack:///external \"koa-proxies\"","webpack:///external \"koa-router\"","webpack:///external \"koa-static\"","webpack:///external \"lz-string\"","webpack:///external \"md5-file\"","webpack:///external \"nedb-promise\"","webpack:///external \"ora\"","webpack:///external \"path\"","webpack:///external \"portfinder\"","webpack:///external \"progress\"","webpack:///external \"react\"","webpack:///external \"react-redux\"","webpack:///external \"react-router-redux\"","webpack:///external \"redux\"","webpack:///external \"redux-thunk\"","webpack:///external \"warning\"","webpack:///external \"webpack\""],"names":["path","require","module","exports","kootConfig","process","env","WEBPACK_BUILD_STAGE","analyze","YUUBARI_LOCAL_AKIGUMO","file","resolve","__dirname","child","fork","devPortAkigumo","stdio","shell","on","console","warn","args","port","log","catch","err","error","webpack","config","entry","reduce","result","rules","test","loader","options","limit","exclude","include","plugins","NormalModuleReplacementPlugin","externals","static","dirStatic","name","dist","template","templateInject","routes","store","sessionStore","equipmentList","shipList","i18n","quickStart","quickStartAllLocales","map","l","serviceWorker","auto","cacheFirst","aliases","defines","staticCopyFrom","before","after","onHistoryUpdate","onRouterUpdate","renderCache","proxyRequestOrigin","protocol","undefined","koaStatic","maxage","hidden","index","defer","gzip","extensions","serverBefore","serverAfter","serverOnRender","beforePreRender","webpackConfig","webpackBefore","webpackAfter","moduleCssFilenameTest","classNameHashLength","devPort","devMemoryAllocation","portAkigumo","server","__SERVER__","default","__esModule","PUSH","REPLACE","POP","loopAsync","turns","work","callback","currentTurn","isDone","isSync","hasNext","doneArgs","done","_len","arguments","length","Array","_key","apply","next","locationsAreEqual","statesAreEqual","createLocation","createQuery","_typeof","Symbol","iterator","obj","constructor","prototype","_extends","Object","assign","target","i","source","key","hasOwnProperty","call","_invariant","_invariant2","_interopRequireDefault","_warning","_warning2","_PathUtils","_Actions","props","create","input","action","object","parsePath","pathname","search","hash","state","isDate","toString","a","b","typeofA","typeofB","isArray","keysofA","keys","keysofB","every","item","createPath","getQueryStringValueFromPath","stripQueryStringValueFromPath","addQueryStringValueToPath","value","_parsePath","indexOf","_parsePath2","replace","RegExp","match","prefix","suffix","_parsePath3","extractPath","string","substring","hashIndex","searchIndex","location","basename","_AsyncUtils","_runTransitionHook","_runTransitionHook2","_LocationUtils","createHistory","getCurrentLocation","getUserConfirmation","pushLocation","replaceLocation","go","keyLength","currentLocation","pendingLocation","beforeListeners","listeners","allKeys","getCurrentIndex","updateLocation","nextLocation","currentIndex","concat","slice","forEach","listener","listenBefore","push","filter","listen","confirmTransitionTo","message","ok","transitionTo","prevPath","nextPath","prevIndex","nextIndex","goBack","goForward","createKey","Math","random","substr","createHref","_createHistory","_createHistory2","createStateStorage","entries","memo","createMemoryHistory","current","readState","init","canGo","n","history","splice","saveState","_options","storage","runTransitionHook","hook","configSessionStore","JSON","parse","able","window","sessionStorage","Boolean","save","filterState","Store","getState","accumulatedKey","currentAccumulatedKey","stringify","get","set","setItem","sessionStoreKey","addEventHandlerOnPageUnload","addEventListener","load","getItem","injectedMetaTags","nodeCommentEnd","inited","infoToChange","title","metas","changeTimeout","setTimeout","doUpdate","document","head","getElementsByTagName","getInjectedMetaTags","el","removeChild","parentNode","meta","createElement","setAttribute","insertBefore","appendChild","childNodes","meetStart","meetEnd","Node","node","nodeType","COMMENT_NODE","nodeValue","__KOOT_INJECT_METAS_START__","__KOOT_INJECT_METAS_END__","ELEMENT_NODE","tagName","markInited","everMounted","styleMap","devSSRConnectIndex","doFetchData","renderProps","dataFetch","isRenderSafe","Promise","dispatch","all","doPageinfo","pageinfo","defaultPageInfo","infos","localeId","some","content","extend","WrappedComponent","connect","_connect","data","fetch","_dataFetch","check","dataCheck","resetWhenUnmount","dataResetWhenUnmount","styles","_styles","ssr","wrapper","hasStyles","hasPageinfo","KootReactComponent","React","Component","clientUpdatePageInfo","to","getStore","getRenderPropsFromComponentProps","loaded","SSR","__DEV__","global","__KOOT_SSR__","needConnectComponents","connectedComponents","unshift","KootComponent","kootClassNames","appendStyle","getStyleMap","componentDidUpdate","prevProps","componentDidMount","mounted","then","setState","componentWillUnmount","removeStyle","type","RESET_CERTAIN_STATE","render","__CLIENT__","className","join","trim","updatePageinfo","bind","kootForwardedRef","forwardedRef","getRenderPropsFromServerProps","onServerRenderStoreExtend","hoistStatics","forwardRef","ref","fromServerProps","serverProps","fromComponentProps","componentProps","kootUseBasename","addBasename","toLowerCase","prependBasename","pname","normalizedBasename","normalizedPathname","charAt","historyClient","scriptsRunFirst","scriptsInBody","uriServiceWorker","LOCATION_UPDATE","update","actions","REALTIME_LOCATION_REDUCER_NAME","initialState","reducers","routing","routerReducer","realtimeLocationReducer","SERVER_REDUCER_NAME","serverReducer","isI18nEnabled","i18nReducerLocaleId","middlewares","thunk","routerMiddleware","createStore","appReducer","appMiddlewares","appEnhancers","projectReducer","kootReducer","reduxCombineReducers","appState","kootState","sliceStateForReducers","reduxCreateStore","reduxCompose","reduxApplyMiddleware","keysForKootReducer","includes","checkAndWriteIntoHead","style","querySelector","__STYLE_TAG_MODULE_ATTR_NAME__","count","css","styleTag","innerHTML","remove","append","theStyle","CHANGE_LANGUAGE","GET_ORIGIN_URL","TELL_CLIENT_URL","SYNC_COOKIE","run","middlewareIsomorphic","renderCacheMap","locales","templateInjectCache","Map","chunkmap","getChunkmap","entrypoints","filemap","globalCache","i18nType","getI18nType","thisLocaleId","cache","extendCacheObject","localesIds","ctx","url","LocaleId","i18nGetLangFromCtx","thisRenderCache","cached","body","thisTemplateInjectCache","thisEntrypoints","thisFilemap","SSRoptions","redirect","stack","status","app","emit","getSWPathname","devRequestServiceWorker","fs","__KOOT_SSR_FILE_CONTENT__","ssrComplete","fileSSR","__KOOT_GET_DIST_PATH__","existsSync","readFileSync","Error","History","__KOOT_STORE__","__KOOT_HISTORY__","__KOOT_CTX__","__KOOT_LOCALEID__","__KOOT_SSR_SET_STORE__","__KOOT_SSR_SET_HISTORY__","__KOOT_SSR_SET_CTX__","eval","router","publicPathPrefix","serviceWorkerFilename","dll","getDevRoutes","KOOT_DEV_DLL_FILE_CLIENT","fileDllClient","route","uri","origin","res","Request","text","staticMiddleware","koaStaticConfig","dir","getDirDistPublic","getDistPath","koaStaticDefaults","convert","lang","cookie","defaults","KootReactRenderCache","maxAge","maxCount","list","cachedUrls","customGet","customSet","has","html","time","Date","now","delete","startKootIsomorphicServer","renderCacheConfig","inject","serverConfig","validatePort","errorMsg","validateTemplate","templateConfig","createRenderCacheMap","validateI18n","createKoaApp","use","middlewareStatic","availableLocaleIds","RenderCache","localesFull","getLocalesFull","arr","localeObj","setLocales","readLocaleFileSync","getLocaleFile","relativePath","getDist","keyFileProjectConfigTempFull","keyFileProjectConfigTempPortionServer","keyFileProjectConfigTempPortionClient","keyFileProjectConfigTempPortionOtherClient","keyKootBaseVersion","dirConfigTemp","filenameProjectConfigTempFull","filenameProjectConfigTempPortionServer","filenameProjectConfigTempPortionClient","filenameProjectConfigTempPortionOtherClient","propertiesToExtract","typesSPA","keyConfigBuildDll","filenameDll","filenameDllManifest","dirDll","keyConfigQuiet","keyConfigOutputPathShouldBe","keyConfigWebpackSPATemplateInject","keyConfigWebpackSPAServer","keyConfigClientAssetsPublicPath","keyConfigClientServiceWorkerPathname","WEBPACK_OUTPUT_PATH","CLIENT_ROOT_PATH","WEBPACK_MODIFIED_PUBLIC_PATH","chunkNameExtractCss","chunkNameExtractCssForImport","chunkNameClientRunFirst","filenameWebpackDevServerPortTemp","filenameBuilding","filenameBuildFail","filenameSPATemplateInjectJS","styleTagGlobalAttributeName","styleTagModuleAttributeName","scriptTagEntryAttributeName","thresholdStylesExtracted","thresholdScriptRunFirst","buildManifestFilename","buildOutputsFilename","pathnameSockjs","__KOOT_INJECT_ATTRIBUTE_NAME__","changeLocaleQueryKey","encodeURIComponent","entryClientHMR","hmrOptions","I18N_INIT","I18N_SET_LOCALES","getLanguagelistFromState","fb_locale","locationBeforeTransitions","query","getLocalesConfig","__devLocales","getLocalesObject","newLocales","langList","split","parseLanguageList","parseLocaleId","localeIds","id","thisId","checkItem","navigator","languages","language","browserLanguage","systemLanguage","userLanguage","normalize","getLocaleBase","seperator","inputNormalized","localeIdsNormalized","baseLocale","thisBaseLocale","getCwd","isAbsolute","extname","readJsonSync","reducerLocaleId","actionInit","parsed","getLangFromCtx","cookieValue","cookies","header","setLocale","setCookie","maxDate","KOOT_I18N_COOKIE_DOMAIN","domain","reduxForCreateStore","_reduxForCreateStore","getLocaleId","resetLocaleId","resetStore","getHistory","resetHistory","getCache","getCtx","Koa","helmet","removeSlashes","msg","itemsBlacklist","oldState","_","rest","glob","getDirDevDll","dirDevDll","sync","dot","relative","getDirDevTmp","cwd","stage","getDirDistPublicFoldername","portfinder","portUsed","portStart","portEnd","ranges","portsIgnore","isNumber","parseInt","values","shift","lastPort","start","end","getFreePort","isNaN","getPortPromise","stopPort","chalk","generateLogMsg","mark","markColor","typeColor","removeSlashesMiddleware","isPortReachable","inquirer","getPathnameDevServerStart","doValidatePort","SERVER_PORT","__SERVER_PORT__","isPortInEnvFree","isPortFree","logPortTaken","isPortTaken","askForPort","prompt","validate","isPortOpen","getIsI18nEnabled","getChunkmapPath","cachedChunkmap","getFullResult","ignoreCache","e","isI18nDefault","getPublicPath","getFilePath","filename","isPathname","isSSRReading","pathPublic","isDev","regPublicPath","getResultPathname","files","KOOT_CWD","p","KOOT_DIST_DIR","parent","getWDSport","publicPath","publicPathSSRReading","koaCtxOrigin","getPublic","sw","regex","P","pwaPathname","chunks","hashClear","hashDelete","hashGet","hashHas","hashSet","Hash","clear","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","getNative","root","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack","__data__","size","Uint8Array","func","thisArg","baseTimes","isArguments","isBuffer","isIndex","isTypedArray","objectProto","arrayLikeKeys","inherited","isArr","isArg","isBuff","isType","skipIndexes","String","arrayMap","array","iteratee","baseAssignValue","eq","assignMergeValue","assignValue","objValue","assocIndexOf","defineProperty","isObject","objectCreate","baseCreate","proto","createBaseFor","baseFor","castPath","toKey","baseGet","getRawTag","objectToString","nullTag","undefinedTag","symToStringTag","toStringTag","baseGetTag","isObjectLike","argsTag","baseIsArguments","isFunction","isMasked","toSource","reRegExpChar","reIsHostCtor","funcProto","Function","funcToString","reIsNative","baseIsNative","pattern","isLength","arrayTag","boolTag","dateTag","errorTag","funcTag","mapTag","numberTag","objectTag","regexpTag","setTag","stringTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","baseIsTypedArray","isPrototype","nativeKeysIn","baseKeysIn","isProto","baseMergeDeep","keysIn","safeGet","baseMerge","srcIndex","customizer","srcValue","newValue","cloneBuffer","cloneTypedArray","copyArray","initCloneObject","isArrayLikeObject","isPlainObject","toPlainObject","mergeFunc","stacked","isCommon","isTyped","identity","overRest","setToString","baseRest","baseSet","lastIndex","nested","constant","baseSetToString","isSymbol","INFINITY","symbolProto","symbolToString","baseToString","baseUnary","isKey","stringToPath","cloneArrayBuffer","arrayBuffer","byteLength","freeExports","freeModule","moduleExports","Buffer","allocUnsafe","buffer","isDeep","copy","typedArray","byteOffset","copyObject","isNew","coreJsData","isIterateeCall","createAssigner","assigner","sources","guard","fromRight","keysFunc","iterable","freeGlobal","isKeyable","getMapData","getValue","overArg","getPrototype","getPrototypeOf","nativeObjectToString","isOwn","tag","unmasked","nativeCreate","HASH_UNDEFINED","MAX_SAFE_INTEGER","reIsUint","isArrayLike","reIsDeepProp","reIsPlainProp","maskSrcKey","uid","exec","IE_PROTO","Ctor","arrayProto","pop","memoize","MAX_MEMOIZE_SIZE","memoizeCapped","freeProcess","nodeUtil","types","binding","transform","arg","nativeMax","max","otherArgs","freeSelf","self","shortOut","HOT_COUNT","HOT_SPAN","nativeNow","lastCalled","stamp","remaining","LARGE_ARRAY_SIZE","pairs","rePropName","reEscapeChar","charCodeAt","number","quote","subString","other","defaultValue","propertyIsEnumerable","stubFalse","nativeIsBuffer","asyncTag","genTag","proxyTag","objectCtorString","symbolTag","nodeIsTypedArray","FUNC_ERROR_TEXT","resolver","TypeError","memoized","Cache","merge","ReferenceError","isAsyncCall","fn","baseDir","Git","gitFactory","git","chain","reject","promiseApi","asyncWrapper","syncWrapper","toError","api","debug","deferred","exists","NOOP","responses","ChildProcess","_baseDir","_runCache","_command","_env","_outputHandler","_silentLogging","customBinary","command","workingDirectory","trailingFunctionArgument","FOLDER","exception","outputHandler","bare","commands","_run","_responseHandler","stashList","handler","opt","splitter","requireResponseHandler","SPLITTER","START_BOUNDARY","COMMIT_BOUNDARY","stash","_appendOptions","trailingOptionsArgument","trailingArrayArgument","clone","repoPath","localPath","iMax","mirror","mv","from","checkoutLatestTag","pull","tags","checkout","latest","add","commit","_getLog","level","remote","branch","concatStdErr","silent","silence","hasCustomSort","option","rebase","reset","mode","modeStr","revert","addTag","addAnnotatedTag","tagMessage","what","_parseCheckout","checkoutBranch","branchName","startPoint","checkoutLocalBranch","deleteLocalBranch","isDelete","responseHandler","flag","branchLocal","addConfig","raw","submoduleAdd","repo","submoduleUpdate","subModule","submoduleInit","listRemote","addRemote","remoteName","remoteRepo","removeRemote","getRemotes","verbose","remotes","detail","refs","mergeFromTo","userHandler","mergeHandler","mergeSummary","failed","fail","updateServerInfo","pushTags","rm","_rm","rmKeepLocal","catFile","_catFile","binaryCatFile","format","diff","diffSummary","revparse","show","clean","interactiveMode","date","multiLine","author_name","author_email","rangeOperator","symmetric","fields","formatstr","k","clearQueue","checkIgnore","pathnames","_parseCheckIgnore","checkIsRepo","onError","exitCode","stdErr","isRepo","_files","_schedule","_childProcess","task","attempted","attemptClose","stdOut","spawned","spawn","windowsHide","stdout","stderr","promise","output","stdOutput","nextTick","trailing","dependencies","childProcess","BranchDeletion","success","deleteSuccessRegex","deleteErrorRegex","asArray","branchDeletions","line","BranchSummary","detached","branches","label","detachedRegex","branchRegex","branchSummary","CommitSummary","summary","changes","insertions","deletions","author","COMMIT_BRANCH_MESSAGE_REGEX","COMMIT_AUTHOR_MESSAGE_REGEX","setBranchFromCommit","commitSummary","commitData","setSummaryFromCommit","setAuthorFromCommit","parts","email","lines","DiffSummary","changed","textFileChange","binaryFileChange","alterations","binary","FetchSummary","parsers","fetchSummary","matches","tracking","original","parser","FileStatusSummary","working_dir","fromPathRegex","ListLogSummary","total","ListLogLine","lineDetail","listLogLine","MergeSummary","MergeConflict","PullSummary","reason","conflicts","merges","handle","deleteRef","pullSummary","MoveSummary","moves","SUMMARY_REGEX","created","deleted","FILE_UPDATE_REGEX","ACTION_REGEX","container","StatusSummary","not_added","conflicted","modified","renamed","staged","ahead","behind","isClean","aheadReg","behindReg","currentReg","trackingReg","regexResult","A","AM","D","M","indexState","R","UU","MM","AA","UD","DU","DD","AU","UA","splitLine","workingDir","code","lineStr","TagList","tagList","customSort","sort","tagA","tagB","partsA","partsB","BranchDeleteSummary","d","isFile","isDirectory","stat","statSync","FILE","webpackPolyfill","deprecate","paths","children","enumerable","md5File","assets","dirAssets","bgimgs","dirBgimgs","channel","spinner","Progress","waiting","ensureDir","o","stop","bar","lstatSync","tick","complete","pathDist","manifestLastModified","manifest","mtime","valueOf","svgIcons","__SVG_SYMBOLS__","definePath","getClientFilePath","proxy","YUUBARI_LOCAL_RUN","changeOrigin","rewrite","logs","buildServerAfter","readdirSync","copyFile","webappBefore","isDistRepo","step","hasGitAccess","description","pathBgimgs","pathAssets","src","ui","pathUI","__CHANNEL__","__BGIMG_LIST__","__DEV_COMPONENTS_ROUTES__","dirname","pathRoot","pathSrc","pics","nodeModules","__WEBPACK_OUTPUT_PATH","removed","removeSync","readFile","writeFile","succeed","logResult","spinners","dots","ProgressBar","spinnerObj","currentFrame","width","incomplete","symbolTicking","interval","setInterval","symbol","frames","clearInterval","terminate","finish","ora","color","dirRoot","dirPics","WEBPACK_BUILD_ENV","ENV","__CLIENT_ROOT_PATH","getPics","dirTo","results","ships","filelist","shipsExtra","equipments","getDb","dbname","readdir","checkAndCopy","listBasename","resultAdd","dirType","ship","illust_same_as_prev","jsonPretty","Datastore","db","equipmentCollections","equipmentCollectionsPretty","equipmentTypesAppended","appendCollection","ja_jp","zh_cn","en_us","initSublist","subIndex","promises","thisSubIndex","equipmentType","equipmentTypes","cfind","main_attribute","equipment","dbpath","topath","autoload","equipmentTypeCollections","projection","_id","collection","equipmentsRemains","$nin","indexCollection","indexEquipmentType","writeFileSync","kckit","camelCase","shipCollections","shipCollectionsPretty","shipSeriesInCollection","shipTypesAppended","shipSeries","shipClassInited","expandClass","series","listSeries","class","initDatabase","dbnames","parseRaw","register","shipTypeCollections","doc","shipsRemains","shipType","indexShipType","indexSeries","shipA","shipB","navyA","_navy","navyB","LZString","pathApp","topathJson","stepCompressing","ensureDirSync","emptyDirSync","json","picture","ext","compressToEncodedURIComponent","stepCollections","sizeOf","pathAppUI","pathfile","maxShipLv","dimensions","ceil","height","stats","floor"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const path = require('path');\n// const forever = require('forever-monitor');\n\nmodule.exports = async (kootConfig) => {\n    if (\n        process.env.WEBPACK_BUILD_STAGE === 'client' &&\n        process.env.WEBPACK_BUILD_ENV === 'prod' &&\n        !kootConfig.analyze\n    ) {\n        await require('../../src/scripts/clean-web-sourcemap')(kootConfig);\n    }\n    await require('../../src/build/webapp/after-server')();\n\n    if (\n        process.env.WEBPACK_BUILD_STAGE === 'server' &&\n        process.env.WEBPACK_BUILD_ENV === 'dev' &&\n        !process.env.YUUBARI_LOCAL_AKIGUMO\n    ) {\n        const file = path.resolve(__dirname, '../../../Akigumo-dev/start.js');\n        const child = require('child_process').fork(\n            file,\n            [`--port=${kootConfig.devPortAkigumo}`],\n            {\n                stdio: 'inherit',\n                shell: true,\n            }\n        );\n        child.on('close', () => {\n            console.warn(`💬 Akigumo(Local) closed.`);\n        });\n        child.on('error', (...args) => {\n            // reject(...args);\n        });\n\n        // let child;\n\n        // const exitHandler = async (...args) => {\n        //     child.stop();\n        // };\n        // process.on('exit', exitHandler);\n        // process.on('SIGINT', exitHandler);\n        // process.on('SIGUSR1', exitHandler);\n        // process.on('SIGUSR2', exitHandler);\n        // process.on('uncaughtException', exitHandler);\n\n        // if (child) {\n        //     child.stop();\n        // } else {\n        //     child = new forever.Monitor(file, {\n        //         max: 1,\n        //         silent: false,\n        //         uid: `yuubari-local-akigumo`,\n        //         killTree: true,\n        //         args: [`--port=${kootConfig.devPortAkigumo}`],\n        //     });\n        //     child.on('watch:restart', function (info) {\n        //         console.warn(`💬 Akigumo(Local) restarting`);\n        //     });\n        //     child.start();\n        //\n        // }\n        console.warn({ file, port: kootConfig.devPortAkigumo, child });\n        process.env.YUUBARI_LOCAL_AKIGUMO = true;\n    }\n\n    return;\n};\n","/* eslint-disable no-console */\n\nmodule.exports = async (kootConfig) => {\n    if (process.env.WEBPACK_BUILD_STAGE === 'client') {\n        console.log(' ');\n\n        if (!kootConfig.analyze) {\n            await require('../../scripts/build/prepare-static')(kootConfig);\n            await require('../../src/build/webapp/before')(\n                kootConfig\n            ).catch((err) => console.error(err));\n        }\n        // if (process.env.WEBPACK_BUILD_ENV === 'prod') {\n        //     await require('../../src/scripts/clean-dist')(kootConfig);\n        // }\n        await require('../../src/scripts/validate-database-files')(kootConfig);\n        await require('../../src/scripts/validate-less-variables')(kootConfig);\n        if (!kootConfig.analyze) {\n            await require('../../src/scripts/copyfiles')(kootConfig);\n        }\n        console.log(' ');\n    }\n\n    return;\n};\n","const path = require('path');\nconst webpack = require('webpack');\n\nmodule.exports = async () => {\n    const config = {\n        entry: ['critical', 'polyfill'].reduce((result, entry) => {\n            result[entry] = path.resolve(__dirname, `../../src/${entry}.js`);\n            return result;\n        }, {}),\n\n        module: {\n            rules: [\n                {\n                    test: /\\.(ico|gif|jpg|jpeg|png|webp)$/,\n                    loader: 'url-loader',\n                    options: {\n                        limit: 1 * 1024,\n                    },\n                    // exclude: /node_modules/\n                },\n                {\n                    test: /\\.svg$/,\n                    loader: 'svg-url-loader',\n                    exclude: /node_modules/,\n                },\n                {\n                    test: /\\.(nedb|json-compressed)$/,\n                    loader: 'raw-loader',\n                },\n                {\n                    test: /\\.md$/,\n                    include: [/docs/],\n                    loader: 'raw-loader',\n                },\n            ],\n        },\n\n        plugins: [\n            new webpack.NormalModuleReplacementPlugin(\n                /^__FLEET_INIT_DATABASE_ONLY_CLIENT__$/,\n                process.env.WEBPACK_BUILD_STAGE === 'client'\n                    ? path.resolve(__dirname, '../../src/database/init-db.js')\n                    : path.resolve(\n                          __dirname,\n                          '../../src/database/init-db-fake.js'\n                      )\n            ),\n            new webpack.NormalModuleReplacementPlugin(\n                /^__FLEET_INIT_DATABASE_ONLY_SERVER__$/,\n                process.env.WEBPACK_BUILD_STAGE === 'server'\n                    ? path.resolve(__dirname, '../../src/database/init-db.js')\n                    : path.resolve(\n                          __dirname,\n                          '../../src/database/init-db-fake.js'\n                      )\n            ),\n            new webpack.NormalModuleReplacementPlugin(\n                /^__FLEET_GET_NEDB__$/,\n                path.resolve(\n                    __dirname,\n                    `../../src/database/get-nedb-${process.env.WEBPACK_BUILD_STAGE}.js`\n                )\n            ),\n        ],\n    };\n\n    if (\n        process.env.WEBPACK_BUILD_ENV === 'prod' &&\n        process.env.WEBPACK_BUILD_STAGE === 'server'\n    ) {\n        if (typeof config.externals !== 'object') config.externals = {};\n        config.externals['any-promise'] = 'commonjs any-promise';\n    }\n\n    return config;\n};\n","/** @module kootConfig */\n\n/**\n * 路径名，可为相对路径或绝对路径。由于部分代码使用了 import/export 的写法，node.js 无法直接识别，需要 webpack/babel 进行编译，故在部分环境下使用该写法代替 require()。\n * @typedef {String} Pathname\n */\n\n/**\n * @callback cacheGet\n * 缓存检查与吐出方法\n * @param {String} url\n * @return {Boolean|String} 对该 URL 不使用缓存时返回 false，使用时返回缓存结果 String\n */\n\n/**\n * @callback cacheSet\n * 缓存存储方法\n * @param {String} url\n * @param {String} html\n */\n\nconst path = require('path');\n\nconst { static: dirStatic } = require('./src/directories');\n\n/** @type {Boolean} 判断当前是否是生产环境 */\n// const isEnvProd = Boolean(process.env.WEBPACK_BUILD_ENV === 'prod')\n/** @type {Boolean} 判断当前是否是开发环境 */\n// const isEnvDev = Boolean(process.env.WEBPACK_BUILD_ENV === 'dev')\n\n/** @type {Boolean} 判断当前是否是客户端 */\n// const isStageClient = Boolean(process.env.WEBPACK_BUILD_STAGE === 'client')\n/** @type {Boolean} 判断当前是否是服务器端 */\n// const isStageServer = Boolean(process.env.WEBPACK_BUILD_STAGE === 'server')\n\nmodule.exports = {\n    /**************************************************************************\n     * 项目信息\n     *************************************************************************/\n\n    name: 'The Fleet (Yuubari)',\n    dist: './dist-webapp/',\n\n    template: './src/template.ejs',\n    templateInject: './src/_server/inject.js',\n\n    routes: './src/router',\n\n    store: './src/redux/factory-store',\n    sessionStore: {\n        equipmentList: true,\n        shipList: true,\n    },\n\n    // i18n: {\n    //     // type: ENV === 'dev' ? 'redux' : 'default', // default | redux\n    //     type: 'redux',\n    //     // expr: '__',\n    //     locales: require('./src/locales/index').map(l => [\n    //         l,\n    //         `./src/locales/${l}.json`\n    //     ])\n    //     // cookieKey: 'fleetLocaleId',\n    //     // domain: '127.0.0.1',\n    // },\n    i18n:\n        process.env.quickStart && !process.env.quickStartAllLocales\n            ? [['zh', `./src/locales/zh.json`]]\n            : require('./src/locales').map((l) => [\n                  l,\n                  `./src/locales/${l}.json`,\n              ]),\n\n    serviceWorker: {\n        auto: false,\n        exclude: ['/bgimgs/**/*', '/pics/**/*', '/dev-*'],\n        cacheFirst: ['/bgimgs/', '/pics/'],\n    },\n\n    aliases: {\n        '@src': path.resolve('./src'),\n        '@docs': path.resolve('./docs'),\n        '@locales': path.resolve('./src/locales'),\n        '@assets': path.resolve('./src/assets'),\n\n        '@app': path.resolve('./src'),\n        '@utils': path.resolve('./src/utils'),\n        '@ui': path.resolve('./src/ui'),\n        '@components': path.resolve('./src/ui/components'),\n        '@api': path.resolve('./src/api'),\n        '@const': path.resolve('./src/constants'),\n        '@redux': path.resolve('./src/redux'),\n        '@actions': path.resolve('./src/api/actions'),\n        '@db': path.resolve('./src/database'),\n        '@database': path.resolve('./src/database'),\n\n        '~base.less': path.resolve('./src/ui/base.less'),\n        '~Assets': path.resolve('./src/assets'),\n        '~/': path.resolve('./src/ui'),\n    },\n\n    defines: require('./src/defines'),\n\n    staticCopyFrom: [dirStatic],\n\n    /**************************************************************************\n     * 客户端生命周期\n     *************************************************************************/\n\n    before: './src/_client/before',\n    after: './src/_client/after',\n    onHistoryUpdate: './src/_client/on-history-update',\n    onRouterUpdate: './src/_client/on-router-update',\n\n    /**************************************************************************\n     * 服务器端设置 & 生命周期\n     *************************************************************************/\n\n    port: 8080,\n    // renderCache: {\n    //     maxAge: 10 * 1000,\n    // },\n    renderCache: false,\n    proxyRequestOrigin: {\n        protocol:\n            process.env.WEBPACK_BUILD_ENV === 'prod' ? 'https' : undefined,\n    },\n    koaStatic: {\n        maxage: 0,\n        hidden: true,\n        index: 'index.html',\n        defer: false,\n        gzip: true,\n        extensions: false,\n    },\n    serverBefore: './src/_server/lifecycle/before',\n    serverAfter: './src/_server/lifecycle/after',\n    serverOnRender: {\n        beforePreRender: './src/_server/lifecycle/before-pre-render',\n    },\n\n    /**************************************************************************\n     * Webpack 相关\n     *************************************************************************/\n\n    webpackConfig: require('./config/webpack'),\n    webpackBefore: require('./config/webpack/before'),\n    webpackAfter: require('./config/webpack/after'),\n    moduleCssFilenameTest: /^((?!\\.g\\.).)*/,\n    classNameHashLength: 8,\n\n    /**************************************************************************\n     * 开发环境\n     *************************************************************************/\n\n    devPort: 8703,\n    devMemoryAllocation: 2048,\n\n    /**************************************************************************\n     * Project Specific\n     *************************************************************************/\n    portAkigumo: 8081,\n    devPortAkigumo: 8702,\n};\n","// 核心代码中引用的配置文件 (部分)\n\nexport const template = \"./src/template.ejs\";\nexport const server = __SERVER__ ? {\"koaStatic\":{\"maxage\":0,\"hidden\":true,\"index\":\"index.html\",\"defer\":false,\"gzip\":true,\"extensions\":false},\"renderCache\":false,\"proxyRequestOrigin\":{\"protocol\":\"https\"},\"inject\":require('../../../src/_server/inject.js').default,\"before\":require('../../../src/_server/lifecycle/before').default,\"after\":require('../../../src/_server/lifecycle/after').default} : {};","'use strict';\n\nexports.__esModule = true;\n/**\n * Indicates that navigation was caused by a call to history.push.\n */\nvar PUSH = exports.PUSH = 'PUSH';\n\n/**\n * Indicates that navigation was caused by a call to history.replace.\n */\nvar REPLACE = exports.REPLACE = 'REPLACE';\n\n/**\n * Indicates that navigation was caused by some other action such\n * as using a browser's back/forward buttons and/or manually manipulating\n * the URL in a browser's location bar. This is the default.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onpopstate\n * for more information.\n */\nvar POP = exports.POP = 'POP';","\"use strict\";\n\nexports.__esModule = true;\nvar loopAsync = exports.loopAsync = function loopAsync(turns, work, callback) {\n  var currentTurn = 0,\n      isDone = false;\n  var isSync = false,\n      hasNext = false,\n      doneArgs = void 0;\n\n  var done = function done() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    isDone = true;\n\n    if (isSync) {\n      // Iterate instead of recursing if possible.\n      doneArgs = args;\n      return;\n    }\n\n    callback.apply(undefined, args);\n  };\n\n  var next = function next() {\n    if (isDone) return;\n\n    hasNext = true;\n\n    if (isSync) return; // Iterate instead of recursing if possible.\n\n    isSync = true;\n\n    while (!isDone && currentTurn < turns && hasNext) {\n      hasNext = false;\n      work(currentTurn++, next, done);\n    }\n\n    isSync = false;\n\n    if (isDone) {\n      // This means the loop finished synchronously.\n      callback.apply(undefined, doneArgs);\n      return;\n    }\n\n    if (currentTurn >= turns && hasNext) {\n      isDone = true;\n      callback();\n    }\n  };\n\n  next();\n};","'use strict';\n\nexports.__esModule = true;\nexports.locationsAreEqual = exports.statesAreEqual = exports.createLocation = exports.createQuery = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _PathUtils = require('./PathUtils');\n\nvar _Actions = require('./Actions');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar createQuery = exports.createQuery = function createQuery(props) {\n  return _extends(Object.create(null), props);\n};\n\nvar createLocation = exports.createLocation = function createLocation() {\n  var input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '/';\n  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _Actions.POP;\n  var key = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  var object = typeof input === 'string' ? (0, _PathUtils.parsePath)(input) : input;\n\n  process.env.NODE_ENV !== 'production' ? (0, _warning2.default)(!object.path, 'Location descriptor objects should have a `pathname`, not a `path`.') : void 0;\n\n  var pathname = object.pathname || '/';\n  var search = object.search || '';\n  var hash = object.hash || '';\n  var state = object.state;\n\n  return {\n    pathname: pathname,\n    search: search,\n    hash: hash,\n    state: state,\n    action: action,\n    key: key\n  };\n};\n\nvar isDate = function isDate(object) {\n  return Object.prototype.toString.call(object) === '[object Date]';\n};\n\nvar statesAreEqual = exports.statesAreEqual = function statesAreEqual(a, b) {\n  if (a === b) return true;\n\n  var typeofA = typeof a === 'undefined' ? 'undefined' : _typeof(a);\n  var typeofB = typeof b === 'undefined' ? 'undefined' : _typeof(b);\n\n  if (typeofA !== typeofB) return false;\n\n  !(typeofA !== 'function') ? process.env.NODE_ENV !== 'production' ? (0, _invariant2.default)(false, 'You must not store functions in location state') : (0, _invariant2.default)(false) : void 0;\n\n  // Not the same object, but same type.\n  if (typeofA === 'object') {\n    !!(isDate(a) && isDate(b)) ? process.env.NODE_ENV !== 'production' ? (0, _invariant2.default)(false, 'You must not store Date objects in location state') : (0, _invariant2.default)(false) : void 0;\n\n    if (!Array.isArray(a)) {\n      var keysofA = Object.keys(a);\n      var keysofB = Object.keys(b);\n      return keysofA.length === keysofB.length && keysofA.every(function (key) {\n        return statesAreEqual(a[key], b[key]);\n      });\n    }\n\n    return Array.isArray(b) && a.length === b.length && a.every(function (item, index) {\n      return statesAreEqual(item, b[index]);\n    });\n  }\n\n  // All other serializable types (string, number, boolean)\n  // should be strict equal.\n  return false;\n};\n\nvar locationsAreEqual = exports.locationsAreEqual = function locationsAreEqual(a, b) {\n  return a.key === b.key &&\n  // a.action === b.action && // Different action !== location change.\n  a.pathname === b.pathname && a.search === b.search && a.hash === b.hash && statesAreEqual(a.state, b.state);\n};","'use strict';\n\nexports.__esModule = true;\nexports.createPath = exports.parsePath = exports.getQueryStringValueFromPath = exports.stripQueryStringValueFromPath = exports.addQueryStringValueToPath = undefined;\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar addQueryStringValueToPath = exports.addQueryStringValueToPath = function addQueryStringValueToPath(path, key, value) {\n  var _parsePath = parsePath(path),\n      pathname = _parsePath.pathname,\n      search = _parsePath.search,\n      hash = _parsePath.hash;\n\n  return createPath({\n    pathname: pathname,\n    search: search + (search.indexOf('?') === -1 ? '?' : '&') + key + '=' + value,\n    hash: hash\n  });\n};\n\nvar stripQueryStringValueFromPath = exports.stripQueryStringValueFromPath = function stripQueryStringValueFromPath(path, key) {\n  var _parsePath2 = parsePath(path),\n      pathname = _parsePath2.pathname,\n      search = _parsePath2.search,\n      hash = _parsePath2.hash;\n\n  return createPath({\n    pathname: pathname,\n    search: search.replace(new RegExp('([?&])' + key + '=[a-zA-Z0-9]+(&?)'), function (match, prefix, suffix) {\n      return prefix === '?' ? prefix : suffix;\n    }),\n    hash: hash\n  });\n};\n\nvar getQueryStringValueFromPath = exports.getQueryStringValueFromPath = function getQueryStringValueFromPath(path, key) {\n  var _parsePath3 = parsePath(path),\n      search = _parsePath3.search;\n\n  var match = search.match(new RegExp('[?&]' + key + '=([a-zA-Z0-9]+)'));\n  return match && match[1];\n};\n\nvar extractPath = function extractPath(string) {\n  var match = string.match(/^(https?:)?\\/\\/[^\\/]*/);\n  return match == null ? string : string.substring(match[0].length);\n};\n\nvar parsePath = exports.parsePath = function parsePath(path) {\n  var pathname = extractPath(path);\n  var search = '';\n  var hash = '';\n\n  process.env.NODE_ENV !== 'production' ? (0, _warning2.default)(path === pathname, 'A path must be pathname + search + hash only, not a full URL like \"%s\"', path) : void 0;\n\n  var hashIndex = pathname.indexOf('#');\n  if (hashIndex !== -1) {\n    hash = pathname.substring(hashIndex);\n    pathname = pathname.substring(0, hashIndex);\n  }\n\n  var searchIndex = pathname.indexOf('?');\n  if (searchIndex !== -1) {\n    search = pathname.substring(searchIndex);\n    pathname = pathname.substring(0, searchIndex);\n  }\n\n  if (pathname === '') pathname = '/';\n\n  return {\n    pathname: pathname,\n    search: search,\n    hash: hash\n  };\n};\n\nvar createPath = exports.createPath = function createPath(location) {\n  if (location == null || typeof location === 'string') return location;\n\n  var basename = location.basename,\n      pathname = location.pathname,\n      search = location.search,\n      hash = location.hash;\n\n  var path = (basename || '') + pathname;\n\n  if (search && search !== '?') path += search;\n\n  if (hash) path += hash;\n\n  return path;\n};","'use strict';\n\nexports.__esModule = true;\n\nvar _AsyncUtils = require('./AsyncUtils');\n\nvar _PathUtils = require('./PathUtils');\n\nvar _runTransitionHook = require('./runTransitionHook');\n\nvar _runTransitionHook2 = _interopRequireDefault(_runTransitionHook);\n\nvar _Actions = require('./Actions');\n\nvar _LocationUtils = require('./LocationUtils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar createHistory = function createHistory() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var getCurrentLocation = options.getCurrentLocation,\n      getUserConfirmation = options.getUserConfirmation,\n      pushLocation = options.pushLocation,\n      replaceLocation = options.replaceLocation,\n      go = options.go,\n      keyLength = options.keyLength;\n\n\n  var currentLocation = void 0;\n  var pendingLocation = void 0;\n  var beforeListeners = [];\n  var listeners = [];\n  var allKeys = [];\n\n  var getCurrentIndex = function getCurrentIndex() {\n    if (pendingLocation && pendingLocation.action === _Actions.POP) return allKeys.indexOf(pendingLocation.key);\n\n    if (currentLocation) return allKeys.indexOf(currentLocation.key);\n\n    return -1;\n  };\n\n  var updateLocation = function updateLocation(nextLocation) {\n    var currentIndex = getCurrentIndex();\n\n    currentLocation = nextLocation;\n\n    if (currentLocation.action === _Actions.PUSH) {\n      allKeys = [].concat(allKeys.slice(0, currentIndex + 1), [currentLocation.key]);\n    } else if (currentLocation.action === _Actions.REPLACE) {\n      allKeys[currentIndex] = currentLocation.key;\n    }\n\n    listeners.forEach(function (listener) {\n      return listener(currentLocation);\n    });\n  };\n\n  var listenBefore = function listenBefore(listener) {\n    beforeListeners.push(listener);\n\n    return function () {\n      return beforeListeners = beforeListeners.filter(function (item) {\n        return item !== listener;\n      });\n    };\n  };\n\n  var listen = function listen(listener) {\n    listeners.push(listener);\n\n    return function () {\n      return listeners = listeners.filter(function (item) {\n        return item !== listener;\n      });\n    };\n  };\n\n  var confirmTransitionTo = function confirmTransitionTo(location, callback) {\n    (0, _AsyncUtils.loopAsync)(beforeListeners.length, function (index, next, done) {\n      (0, _runTransitionHook2.default)(beforeListeners[index], location, function (result) {\n        return result != null ? done(result) : next();\n      });\n    }, function (message) {\n      if (getUserConfirmation && typeof message === 'string') {\n        getUserConfirmation(message, function (ok) {\n          return callback(ok !== false);\n        });\n      } else {\n        callback(message !== false);\n      }\n    });\n  };\n\n  var transitionTo = function transitionTo(nextLocation) {\n    if (currentLocation && (0, _LocationUtils.locationsAreEqual)(currentLocation, nextLocation) || pendingLocation && (0, _LocationUtils.locationsAreEqual)(pendingLocation, nextLocation)) return; // Nothing to do\n\n    pendingLocation = nextLocation;\n\n    confirmTransitionTo(nextLocation, function (ok) {\n      if (pendingLocation !== nextLocation) return; // Transition was interrupted during confirmation\n\n      pendingLocation = null;\n\n      if (ok) {\n        // Treat PUSH to same path like REPLACE to be consistent with browsers\n        if (nextLocation.action === _Actions.PUSH) {\n          var prevPath = (0, _PathUtils.createPath)(currentLocation);\n          var nextPath = (0, _PathUtils.createPath)(nextLocation);\n\n          if (nextPath === prevPath && (0, _LocationUtils.statesAreEqual)(currentLocation.state, nextLocation.state)) nextLocation.action = _Actions.REPLACE;\n        }\n\n        if (nextLocation.action === _Actions.POP) {\n          updateLocation(nextLocation);\n        } else if (nextLocation.action === _Actions.PUSH) {\n          if (pushLocation(nextLocation) !== false) updateLocation(nextLocation);\n        } else if (nextLocation.action === _Actions.REPLACE) {\n          if (replaceLocation(nextLocation) !== false) updateLocation(nextLocation);\n        }\n      } else if (currentLocation && nextLocation.action === _Actions.POP) {\n        var prevIndex = allKeys.indexOf(currentLocation.key);\n        var nextIndex = allKeys.indexOf(nextLocation.key);\n\n        if (prevIndex !== -1 && nextIndex !== -1) go(prevIndex - nextIndex); // Restore the URL\n      }\n    });\n  };\n\n  var push = function push(input) {\n    return transitionTo(createLocation(input, _Actions.PUSH));\n  };\n\n  var replace = function replace(input) {\n    return transitionTo(createLocation(input, _Actions.REPLACE));\n  };\n\n  var goBack = function goBack() {\n    return go(-1);\n  };\n\n  var goForward = function goForward() {\n    return go(1);\n  };\n\n  var createKey = function createKey() {\n    return Math.random().toString(36).substr(2, keyLength || 6);\n  };\n\n  var createHref = function createHref(location) {\n    return (0, _PathUtils.createPath)(location);\n  };\n\n  var createLocation = function createLocation(location, action) {\n    var key = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : createKey();\n    return (0, _LocationUtils.createLocation)(location, action, key);\n  };\n\n  return {\n    getCurrentLocation: getCurrentLocation,\n    listenBefore: listenBefore,\n    listen: listen,\n    transitionTo: transitionTo,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    createKey: createKey,\n    createPath: _PathUtils.createPath,\n    createHref: createHref,\n    createLocation: createLocation\n  };\n};\n\nexports.default = createHistory;","'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _LocationUtils = require('./LocationUtils');\n\nvar _PathUtils = require('./PathUtils');\n\nvar _createHistory = require('./createHistory');\n\nvar _createHistory2 = _interopRequireDefault(_createHistory);\n\nvar _Actions = require('./Actions');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar createStateStorage = function createStateStorage(entries) {\n  return entries.filter(function (entry) {\n    return entry.state;\n  }).reduce(function (memo, entry) {\n    memo[entry.key] = entry.state;\n    return memo;\n  }, {});\n};\n\nvar createMemoryHistory = function createMemoryHistory() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (Array.isArray(options)) {\n    options = { entries: options };\n  } else if (typeof options === 'string') {\n    options = { entries: [options] };\n  }\n\n  var getCurrentLocation = function getCurrentLocation() {\n    var entry = entries[current];\n    var path = (0, _PathUtils.createPath)(entry);\n\n    var key = void 0,\n        state = void 0;\n    if (entry.key) {\n      key = entry.key;\n      state = readState(key);\n    }\n\n    var init = (0, _PathUtils.parsePath)(path);\n\n    return (0, _LocationUtils.createLocation)(_extends({}, init, { state: state }), undefined, key);\n  };\n\n  var canGo = function canGo(n) {\n    var index = current + n;\n    return index >= 0 && index < entries.length;\n  };\n\n  var go = function go(n) {\n    if (!n) return;\n\n    if (!canGo(n)) {\n      process.env.NODE_ENV !== 'production' ? (0, _warning2.default)(false, 'Cannot go(%s) there is not enough history', n) : void 0;\n\n      return;\n    }\n\n    current += n;\n    var currentLocation = getCurrentLocation();\n\n    // Change action to POP\n    history.transitionTo(_extends({}, currentLocation, { action: _Actions.POP }));\n  };\n\n  var pushLocation = function pushLocation(location) {\n    current += 1;\n\n    if (current < entries.length) entries.splice(current);\n\n    entries.push(location);\n\n    saveState(location.key, location.state);\n  };\n\n  var replaceLocation = function replaceLocation(location) {\n    entries[current] = location;\n    saveState(location.key, location.state);\n  };\n\n  var history = (0, _createHistory2.default)(_extends({}, options, {\n    getCurrentLocation: getCurrentLocation,\n    pushLocation: pushLocation,\n    replaceLocation: replaceLocation,\n    go: go\n  }));\n\n  var _options = options,\n      entries = _options.entries,\n      current = _options.current;\n\n\n  if (typeof entries === 'string') {\n    entries = [entries];\n  } else if (!Array.isArray(entries)) {\n    entries = ['/'];\n  }\n\n  entries = entries.map(function (entry) {\n    return (0, _LocationUtils.createLocation)(entry);\n  });\n\n  if (current == null) {\n    current = entries.length - 1;\n  } else {\n    !(current >= 0 && current < entries.length) ? process.env.NODE_ENV !== 'production' ? (0, _invariant2.default)(false, 'Current index must be >= 0 and < %s, was %s', entries.length, current) : (0, _invariant2.default)(false) : void 0;\n  }\n\n  var storage = createStateStorage(entries);\n\n  var saveState = function saveState(key, state) {\n    return storage[key] = state;\n  };\n\n  var readState = function readState(key) {\n    return storage[key];\n  };\n\n  return _extends({}, history, {\n    canGo: canGo\n  });\n};\n\nexports.default = createMemoryHistory;","'use strict';\n\nexports.__esModule = true;\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar runTransitionHook = function runTransitionHook(hook, location, callback) {\n  var result = hook(location, callback);\n\n  if (hook.length < 2) {\n    // Assume the hook runs synchronously and automatically\n    // call the callback with the return value.\n    callback(result);\n  } else {\n    process.env.NODE_ENV !== 'production' ? (0, _warning2.default)(result === undefined, 'You should not \"return\" in a transition hook with a callback argument; ' + 'call the callback instead') : void 0;\n  }\n};\n\nexports.default = runTransitionHook;","import get from 'lodash/get';\r\nimport set from 'lodash/set';\r\n\r\nimport { store as Store } from '../';\r\nimport { sessionStoreKey } from '../defaults/defines';\r\nimport filterState from '../libs/filter-state';\r\n\r\nconst configSessionStore = JSON.parse(process.env.KOOT_SESSION_STORE);\r\n\r\n/** @type {Boolean} 当前是否可以/允许使用 sessionStore */\r\nconst able = (() => {\r\n    if (__SERVER__) return false;\r\n    if (!window.sessionStorage) return false;\r\n    if (!configSessionStore) return false;\r\n\r\n    if (configSessionStore === true) return true;\r\n    if (configSessionStore === 'all') return true;\r\n\r\n    return Boolean(\r\n        typeof configSessionStore === 'object' &&\r\n            !Array.isArray(configSessionStore)\r\n    );\r\n})();\r\n\r\n/**\r\n * 保存当前 state 到 sessionStorage\r\n * @void\r\n */\r\nexport const save = () => {\r\n    if (!able) return;\r\n\r\n    /** @type {Object} 排除掉黑名单内的项目后的 state 对象 */\r\n    const state = filterState(Store.getState());\r\n\r\n    let saveState = {};\r\n\r\n    if (configSessionStore === true || configSessionStore === 'all') {\r\n        saveState = state;\r\n    } else if (\r\n        typeof configSessionStore === 'object' &&\r\n        !Array.isArray(configSessionStore)\r\n    ) {\r\n        // 根据配置对象存储\r\n        const parse = (obj, accumulatedKey = '') => {\r\n            Object.keys(obj).forEach(key => {\r\n                const currentAccumulatedKey =\r\n                    accumulatedKey + `[${JSON.stringify(key)}]`;\r\n                if (typeof obj[key] === 'object') {\r\n                    parse(obj[key], currentAccumulatedKey);\r\n                } else if (obj[key] === true) {\r\n                    const value = get(state, currentAccumulatedKey);\r\n                    if (typeof value !== 'undefined')\r\n                        set(saveState, currentAccumulatedKey, value);\r\n                }\r\n            });\r\n        };\r\n        parse(configSessionStore);\r\n        // console.log(configSessionStore, state, saveState);\r\n    }\r\n\r\n    sessionStorage.setItem(sessionStoreKey, JSON.stringify(saveState));\r\n\r\n    return;\r\n};\r\n\r\n/**\r\n * 向 window.onunload 添加事件：保存 state\r\n * @void\r\n */\r\nexport const addEventHandlerOnPageUnload = () => {\r\n    if (!able) return;\r\n    window.addEventListener('unload', save);\r\n    return;\r\n};\r\n\r\n/**\r\n * 从 sessionStorage 中读取 state\r\n * @returns {Object} 存储的 state\r\n */\r\nexport const load = () => {\r\n    if (!able) return {};\r\n    return JSON.parse(sessionStorage.getItem(sessionStoreKey) || '{}');\r\n};\r\n","/**\r\n * @typedef Pageinfo\r\n * @type {Object}\r\n * @property {string} [title] 标题\r\n * @property {Array<Object.<string, string>>} [metas] meta 标签信息，需要形式为 `{[name]: value}` 对象的数组\r\n */\r\n\r\n// import isEqual from 'lodash/isEqual';\r\n\r\n/**\r\n * 当前已注入的 meta 标签\r\n * @type {Array<HTMLElement>}\r\n */\r\nlet injectedMetaTags;\r\n\r\n// meta 标签区域结尾的 HTML 注释代码\r\nlet nodeCommentEnd;\r\n\r\nlet inited = false;\r\n\r\n/** @type {Pageinfo} */\r\nconst infoToChange = {\r\n    title: '',\r\n    metas: []\r\n};\r\nlet changeTimeout = undefined;\r\n\r\n/**\r\n * _仅限客户端_\r\n *\r\n * 更新页面信息\r\n * @module\r\n * @param {string} title 新的标题\r\n * @param {Array<Object.<string, string>>} metas meta 标签信息，需要形式为 `{[name]: value}` 对象的数组\r\n */\r\nexport default (title, metas = []) => {\r\n    if (__SERVER__) return;\r\n    if (!__SPA__ && !inited) {\r\n        setTimeout(() => {\r\n            inited = true;\r\n        });\r\n        return;\r\n    }\r\n\r\n    // 判断 & 追加即将修改的内容\r\n    /*\r\n    // 如果新 meta 不存在于已有的 meta 列表，添加\r\n    metas.forEach(metaNew => {\r\n        if (!infoToChange.metas.length) infoToChange.metas.push(metaNew);\r\n        if (\r\n            !infoToChange.metas.every(metaExist => {\r\n                console.log(metaNew, metaExist, isEqual(metaNew, metaExist));\r\n                return isEqual(metaNew, metaExist);\r\n            })\r\n        ) {\r\n            console.log('PUSH');\r\n            infoToChange.metas.push(metaNew);\r\n        }\r\n    });\r\n    */\r\n    // 如果当前没有信息，设为当前信息\r\n    if (\r\n        !infoToChange.title &&\r\n        (!Array.isArray(infoToChange.metas) || !infoToChange.metas.length)\r\n    ) {\r\n        infoToChange.title = title;\r\n        infoToChange.metas = metas;\r\n    }\r\n\r\n    if (changeTimeout) return;\r\n\r\n    changeTimeout = setTimeout(() => {\r\n        doUpdate();\r\n        infoToChange.title = '';\r\n        infoToChange.metas = [];\r\n        changeTimeout = undefined;\r\n    });\r\n};\r\n\r\n//\r\n\r\nconst doUpdate = () => {\r\n    const { title, metas } = infoToChange;\r\n\r\n    // 替换页面标题\r\n    document.title = title;\r\n\r\n    // 替换 metas\r\n    const head = document.getElementsByTagName('head')[0];\r\n    getInjectedMetaTags().forEach(el => head.removeChild(el));\r\n\r\n    injectedMetaTags.forEach(el => {\r\n        if (el && el.parentNode) el.parentNode.removeChild(el);\r\n    });\r\n    injectedMetaTags = metas\r\n        .filter(meta => typeof meta === 'object')\r\n        .map(meta => {\r\n            const el = document.createElement('meta');\r\n            for (var key in meta) {\r\n                el.setAttribute(key, meta[key]);\r\n            }\r\n            // el.setAttribute(__KOOT_INJECT_ATTRIBUTE_NAME__, '')\r\n            if (nodeCommentEnd) {\r\n                head.insertBefore(el, nodeCommentEnd);\r\n            } else {\r\n                head.appendChild(el);\r\n            }\r\n            return el;\r\n        });\r\n};\r\n\r\n//\r\n\r\n/**\r\n * 获取当前已注入的 meta 标签\r\n * @returns {Array<HTMLElement>}\r\n */\r\nexport const getInjectedMetaTags = () => {\r\n    if (!Array.isArray(injectedMetaTags)) {\r\n        const head = document.getElementsByTagName('head')[0];\r\n\r\n        injectedMetaTags = [];\r\n        // 移除所有在 KOOT_METAS 里的 meta 标签\r\n        // 采用 DOM 操作的初衷：如果使用 innerHTML 的字符串替换方法，浏览器可能会全局重新渲染一次，造成“闪屏”\r\n        const childNodes = head.childNodes;\r\n        let meetStart = false;\r\n        let meetEnd = false;\r\n        let i = 0;\r\n        while (!meetEnd && childNodes[i] instanceof Node) {\r\n            const node = childNodes[i];\r\n            if (node.nodeType === Node.COMMENT_NODE) {\r\n                if (node.nodeValue === __KOOT_INJECT_METAS_START__)\r\n                    meetStart = true;\r\n                if (node.nodeValue === __KOOT_INJECT_METAS_END__) {\r\n                    meetEnd = true;\r\n                    nodeCommentEnd = node;\r\n                }\r\n            } else if (\r\n                meetStart &&\r\n                node.nodeType === Node.ELEMENT_NODE &&\r\n                node.tagName === 'META'\r\n            ) {\r\n                injectedMetaTags.push(node);\r\n            }\r\n            i++;\r\n        }\r\n    }\r\n\r\n    return injectedMetaTags;\r\n};\r\n\r\n/** _仅针对客户端_ 标记已初始化 */\r\nexport const markInited = () => {\r\n    inited = true;\r\n};\r\n","/* global __KOOT_SSR__:false */\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\n// import { hot } from 'react-hot-loader'\r\n// import PropTypes from 'prop-types'\r\nimport hoistStatics from 'hoist-non-react-statics';\r\n\r\nimport { getStore } from '../';\r\nimport { needConnectComponents } from '../defaults/defines-server';\r\n\r\n//\r\n\r\nimport {\r\n    fromServerProps as getRenderPropsFromServerProps,\r\n    fromComponentProps as getRenderPropsFromComponentProps,\r\n} from './get-render-props';\r\nimport {\r\n    append as appendStyle,\r\n    remove as removeStyle,\r\n    // StyleMapContext,\r\n} from './styles';\r\nimport clientUpdatePageInfo from './client-update-page-info';\r\nimport { RESET_CERTAIN_STATE } from './redux';\r\nimport isRenderSafe from './is-render-safe';\r\n\r\n//\r\n\r\n// 是否已挂载了组件\r\nlet everMounted = false;\r\n// const defaultPageInfo = {\r\n//     title: '',\r\n//     metas: []\r\n// }\r\nconst styleMap = {};\r\n\r\n/**\r\n * @type {Number}\r\n * _开发环境_\r\n * _服务器_\r\n * 使用该高阶组件的次数\r\n */\r\nlet devSSRConnectIndex = 0;\r\n\r\n/**\r\n * 获取数据\r\n * @callback callbackFetchData\r\n * @param {Object} state 当前 state\r\n * @param {Object} renderProps 封装的同构 props\r\n * @param {Function} dispatch Redux dispatch\r\n * @returns {Promise}\r\n */\r\n\r\n/**\r\n * 判断数据是否准备好\r\n * @callback callbackCheckLoaded\r\n * @param {Object} state 当前 state\r\n * @param {Object} renderProps 封装的同构 props\r\n * @returns {boolean}\r\n */\r\n\r\n/**\r\n * 获取页面信息\r\n * @callback callbackGetPageInfo\r\n * @param {Object} state 当前 state\r\n * @param {Object} renderProps 封装的同构 props\r\n * @returns {Object}\r\n */\r\n\r\n/**\r\n * 获取同构数据的执行方法\r\n * @param {Object} store\r\n * @param {Object} props renderProps\r\n * @returns {Promise}\r\n */\r\nconst doFetchData = (store, renderProps, dataFetch) => {\r\n    if (!isRenderSafe()) return new Promise((resolve) => resolve(result));\r\n\r\n    const result = dataFetch(store.getState(), renderProps, store.dispatch);\r\n    // if (result === true) {\r\n    //     isDataPreloaded = true\r\n    //     return new Promise(resolve => resolve())\r\n    // }\r\n    if (Array.isArray(result)) return Promise.all(result);\r\n    if (result instanceof Promise) return result;\r\n    return new Promise((resolve) => resolve(result));\r\n};\r\n\r\n/**\r\n * 更新页面信息\r\n * @param {Object} store\r\n * @param {Object} props renderProps\r\n * @returns {Object} infos\r\n * @returns {String} infos.title\r\n * @returns {Array} infos.metas\r\n */\r\nconst doPageinfo = (store, props, pageinfo) => {\r\n    if (!isRenderSafe()) return {};\r\n\r\n    const defaultPageInfo = {\r\n        title: '',\r\n        metas: [],\r\n    };\r\n\r\n    if (typeof pageinfo !== 'function' && typeof pageinfo !== 'object')\r\n        return defaultPageInfo;\r\n\r\n    const state = store.getState();\r\n    const infos = (() => {\r\n        if (typeof pageinfo === 'object') return pageinfo;\r\n        const infos = pageinfo(state, props);\r\n        if (typeof infos !== 'object') return defaultPageInfo;\r\n        return infos;\r\n    })();\r\n\r\n    const {\r\n        title = defaultPageInfo.title,\r\n        metas = defaultPageInfo.metas,\r\n    } = infos;\r\n\r\n    if (state.localeId) {\r\n        if (\r\n            !metas.some((meta) => {\r\n                if (meta.name === 'koot-locale-id') {\r\n                    meta.content = state.localeId;\r\n                    return true;\r\n                }\r\n                return false;\r\n            })\r\n        ) {\r\n            metas.push({\r\n                name: 'koot-locale-id',\r\n                content: state.localeId,\r\n            });\r\n        }\r\n    }\r\n\r\n    return {\r\n        title,\r\n        metas,\r\n    };\r\n};\r\n\r\n// console.log((typeof store === 'undefined' ? `\\x1b[31m×\\x1b[0m` : `\\x1b[32m√\\x1b[0m`) + ' store in [HOC] extend')\r\n/**\r\n * 高阶组件/组件装饰器：组件扩展\r\n * @param {Object} options 选项\r\n * @param {boolean|Function} [options.connect] react-redux 的 connect() 的参数。如果为 true，表示使用 connect()，但不连接任何数据\r\n * @param {Object|callbackGetPageInfo} [options.pageinfo]\r\n * @param {Object} [options.data] 同构数据相关\r\n * @param {callbackFetchData} [options.data.fetch]\r\n * @param {callbackCheckLoaded} [options.data.check]\r\n * @param {Object} [options.styles] 组件 CSS 结果\r\n * @returns {Function} 封装好的 React 组件\r\n */\r\nconst extend = (options = {}) => (WrappedComponent) => {\r\n    // console.log((typeof store === 'undefined' ? `\\x1b[31m×\\x1b[0m` : `\\x1b[32m√\\x1b[0m`) + ' store in [HOC] extend run')\r\n\r\n    const {\r\n        connect: _connect = false,\r\n        pageinfo,\r\n        data: {\r\n            fetch: _dataFetch,\r\n            check: dataCheck,\r\n            resetWhenUnmount: dataResetWhenUnmount,\r\n        } = {},\r\n        styles: _styles,\r\n        ssr = true,\r\n        // ttt\r\n        // hot: _hot = true,\r\n        // name\r\n    } = options;\r\n\r\n    // console.log('extend hoc run', { name, LocaleId })\r\n\r\n    // 样式相关\r\n\r\n    /** @type {Object} 经过 koot-css-loader 处理后的 css 文件的结果对象 */\r\n    const styles = (!Array.isArray(_styles) ? [_styles] : _styles).filter(\r\n        (obj) => typeof obj === 'object' && typeof obj.wrapper === 'string'\r\n    );\r\n\r\n    /** @type {boolean} 是否有上述结果对象 */\r\n    const hasStyles = Array.isArray(styles) && styles.length > 0;\r\n    // console.log({ ttt, hasStyles, styles })\r\n\r\n    /** @type {boolean} 是否有 pageinfo 对象 */\r\n    const hasPageinfo =\r\n        typeof pageinfo === 'function' || typeof pageinfo === 'object';\r\n\r\n    // 同构数据相关\r\n\r\n    /** @type {boolean} 同构数据是否已经获取成功 */\r\n    // let isDataPreloaded = false\r\n\r\n    /** @type {Function} 获取同构数据 */\r\n    const dataFetch =\r\n        typeof options.data === 'function' || Array.isArray(options.data)\r\n            ? options.data\r\n            : typeof _dataFetch === 'function' || Array.isArray(_dataFetch)\r\n            ? _dataFetch\r\n            : undefined;\r\n\r\n    // 装饰组件\r\n    class KootReactComponent extends React.Component {\r\n        static onServerRenderHtmlExtend = ({ store, renderProps = {} }) => {\r\n            const { title, metas } = doPageinfo(\r\n                store,\r\n                getRenderPropsFromServerProps(renderProps),\r\n                pageinfo\r\n            );\r\n            return { title, metas };\r\n        };\r\n\r\n        //\r\n\r\n        // static contextType = StyleMapContext\r\n\r\n        //\r\n\r\n        clientUpdatePageInfo(to) {\r\n            if (!__CLIENT__) return;\r\n            if (!hasPageinfo) return;\r\n\r\n            const { title, metas } =\r\n                typeof to === 'function'\r\n                    ? doPageinfo(\r\n                          getStore(),\r\n                          getRenderPropsFromComponentProps(this.props),\r\n                          to\r\n                      )\r\n                    : to ||\r\n                      doPageinfo(\r\n                          getStore(),\r\n                          getRenderPropsFromComponentProps(this.props),\r\n                          pageinfo\r\n                      );\r\n\r\n            clientUpdatePageInfo(title, metas);\r\n        }\r\n\r\n        //\r\n\r\n        state = {\r\n            loaded:\r\n                typeof dataCheck === 'function'\r\n                    ? dataCheck(\r\n                          getStore().getState(),\r\n                          getRenderPropsFromComponentProps(this.props)\r\n                      )\r\n                    : undefined,\r\n        };\r\n        mounted = false;\r\n        kootClassNames = [];\r\n\r\n        //\r\n\r\n        constructor(props /*, context*/) {\r\n            super(props /*, context*/);\r\n\r\n            /**\r\n             * _服务器端_\r\n             * 将组件注册到同构渲染对象中\r\n             */\r\n            if (__SERVER__) {\r\n                const SSR = __DEV__ ? global.__KOOT_SSR__ : __KOOT_SSR__;\r\n                if (SSR[needConnectComponents]) {\r\n                    if (__DEV__) {\r\n                        // console.log(options.name || '__');\r\n                        KootComponent.id = devSSRConnectIndex++;\r\n                        // KootComponent.pageinfo = pageinfo;\r\n                    }\r\n                    const { connectedComponents = [] } = SSR;\r\n                    connectedComponents.unshift(KootComponent);\r\n                }\r\n            }\r\n\r\n            if (!isRenderSafe()) return;\r\n\r\n            if (hasStyles) {\r\n                this.kootClassNames = styles.map((obj) => obj.wrapper);\r\n                appendStyle(this.getStyleMap(/*context*/), styles);\r\n                // console.log('----------')\r\n                // console.log('styles', styles)\r\n                // console.log('theStyles', theStyles)\r\n                // console.log('this.classNameWrapper', this.classNameWrapper)\r\n                // console.log('----------')\r\n            }\r\n        }\r\n\r\n        /**\r\n         * 获取 styleMap\r\n         * - 服务器端: 返回全局常量中的对照表\r\n         * - 客户端: 直接返回本文件内的 styleMap\r\n         */\r\n        getStyleMap(/*context*/) {\r\n            // console.log('extend', { LocaleId })\r\n            if (__SERVER__) {\r\n                if (__DEV__) return global.__KOOT_SSR__.styleMap;\r\n                if (typeof __KOOT_SSR__ === 'object')\r\n                    return __KOOT_SSR__.styleMap;\r\n            }\r\n            return styleMap;\r\n            // return context\r\n        }\r\n\r\n        //\r\n\r\n        componentDidUpdate(prevProps) {\r\n            // if (\r\n            //     typeof prevProps.location === 'object' &&\r\n            //     typeof this.props.location === 'object' &&\r\n            //     prevProps.location.pathname !== this.props.location.pathname\r\n            // )\r\n            this.clientUpdatePageInfo();\r\n        }\r\n\r\n        componentDidMount() {\r\n            this.mounted = true;\r\n\r\n            if (!this.state.loaded && typeof dataFetch !== 'undefined') {\r\n                doFetchData(\r\n                    getStore(),\r\n                    getRenderPropsFromComponentProps(this.props),\r\n                    dataFetch\r\n                ).then(() => {\r\n                    if (!this.mounted) return;\r\n                    this.setState({\r\n                        loaded: true,\r\n                    });\r\n                });\r\n            }\r\n\r\n            this.clientUpdatePageInfo();\r\n            if (hasPageinfo && this.mounted) {\r\n                setTimeout(() => {\r\n                    if (this && this.mounted) {\r\n                        this.clientUpdatePageInfo();\r\n                    }\r\n                }, 500);\r\n            }\r\n\r\n            if (everMounted) {\r\n            } else {\r\n                everMounted = true;\r\n            }\r\n        }\r\n\r\n        componentWillUnmount() {\r\n            this.mounted = false;\r\n            if (hasStyles) {\r\n                removeStyle(this.getStyleMap(/*this.context*/), styles);\r\n            }\r\n            if (typeof dataResetWhenUnmount === 'object') {\r\n                setTimeout(() => {\r\n                    this.props.dispatch({\r\n                        type: RESET_CERTAIN_STATE,\r\n                        data: dataResetWhenUnmount,\r\n                    });\r\n                });\r\n            }\r\n        }\r\n\r\n        //\r\n\r\n        render() {\r\n            // console.log('styles', styles)\r\n            // console.log('this', this)\r\n            // console.log('this.kootClassNames', this.kootClassNames)\r\n            // console.log('this.props.className', this.props.className)\r\n\r\n            if (__SERVER__) {\r\n                if (ssr === false) return null;\r\n                if (ssr !== true) return ssr;\r\n            }\r\n\r\n            if (__CLIENT__ && this.kootClassNames instanceof HTMLElement) {\r\n                // console.log(this.kootClassNames)\r\n                this.kootClassNames = [this.kootClassNames.getAttribute('id')];\r\n            }\r\n\r\n            const props = Object.assign({}, this.props, {\r\n                className: this.kootClassNames\r\n                    .concat(this.props.className)\r\n                    .join(' ')\r\n                    .trim(),\r\n                'data-class-name': this.kootClassNames.join(' ').trim(),\r\n            });\r\n            if (hasPageinfo)\r\n                props.updatePageinfo = this.clientUpdatePageInfo.bind(this);\r\n\r\n            // if (__SERVER__) console.log('extender this.state.loaded', this.state.loaded)\r\n            if (\r\n                typeof dataFetch !== 'undefined' &&\r\n                typeof dataCheck === 'function'\r\n            )\r\n                props.loaded = this.state.loaded;\r\n\r\n            // if (typeof props.forwardedRef !== 'undefined') {\r\n            //     console.log(props.forwardedRef);\r\n            // }\r\n            if (typeof props.kootForwardedRef !== 'undefined') {\r\n                props.forwardedRef = props.kootForwardedRef;\r\n                delete props.kootForwardedRef;\r\n            }\r\n\r\n            return <WrappedComponent {...props} />;\r\n        }\r\n    }\r\n\r\n    if (typeof dataFetch !== 'undefined') {\r\n        KootReactComponent.onServerRenderStoreExtend = ({\r\n            store,\r\n            renderProps,\r\n        }) => {\r\n            if (typeof dataFetch === 'undefined')\r\n                return new Promise((resolve) => resolve());\r\n            // console.log('onServerRenderStoreExtend')\r\n            return doFetchData(\r\n                store,\r\n                getRenderPropsFromServerProps(renderProps),\r\n                dataFetch\r\n            );\r\n        };\r\n    }\r\n\r\n    // if (_hot && __DEV__ && __CLIENT__) {\r\n    //     const { hot, setConfig } = require('react-hot-loader')\r\n    //     setConfig({ logLevel: 'debug' })\r\n    //     KootComponent = hot(module)(KootComponent)\r\n    // }\r\n\r\n    // if (typeof styles === 'object' &&\r\n    //     typeof styles.wrapper === 'string'\r\n    // ) {\r\n    //     KootComponent = ImportStyle(styles)(KootComponent)\r\n    // }\r\n    let KootComponent = hoistStatics(KootReactComponent, WrappedComponent);\r\n\r\n    // if (typeof styles === 'object' &&\r\n    //     typeof styles.wrapper === 'string'\r\n    // ) {\r\n    //     KootComponent = ImportStyle(styles)(KootComponent)\r\n    // }\r\n\r\n    if (_connect === true) {\r\n        KootComponent = connect(() => ({}), undefined, undefined, {\r\n            forwardRef: true,\r\n        })(KootComponent);\r\n    } else if (typeof _connect === 'function') {\r\n        KootComponent = connect(_connect, undefined, undefined, {\r\n            forwardRef: true,\r\n        })(KootComponent);\r\n    } else if (Array.isArray(_connect)) {\r\n        if (typeof _connect[3] !== 'object') _connect[3] = {};\r\n        _connect[3].forwardRef = true;\r\n        KootComponent = connect(..._connect)(KootComponent);\r\n    }\r\n\r\n    // return KootComponent;\r\n    return React.forwardRef((props, ref) => {\r\n        if (props.forwardedRef)\r\n            return (\r\n                <KootComponent\r\n                    {...props}\r\n                    kootForwardedRef={props.forwardedRef}\r\n                />\r\n            );\r\n        if (ref) return <KootComponent {...props} kootForwardedRef={ref} />;\r\n        return <KootComponent {...props} />;\r\n    });\r\n};\r\n\r\nexport default extend;\r\n","/**\r\n * 基于 serverProps 返回同构 props\r\n * @param {Object} serverProps \r\n * @return {Object}\r\n */\r\nconst fromServerProps = (serverProps = {}) => {\r\n    // console.log(' ')\r\n    // console.log('----------')\r\n    // console.log(serverProps)\r\n    // console.log('----------')\r\n    // console.log(' ')\r\n    return {\r\n        ...serverProps\r\n    }\r\n}\r\n\r\n/**\r\n * 基于组件 props 返回同构 props\r\n * @param {Object} componentProps \r\n * @return {Object}\r\n */\r\nconst fromComponentProps = (componentProps = {}) => {\r\n    // console.log(' ')\r\n    // console.log('----------')\r\n    // console.log(componentProps)\r\n    // console.log('----------')\r\n    // console.log(' ')\r\n    return {\r\n        ...componentProps\r\n    }\r\n}\r\n\r\nexport {\r\n    fromServerProps,\r\n    fromComponentProps,\r\n}\r\n","// import history from \"__KOOT_CLIENT_REQUIRE_HISTORY__\"\r\nimport createHistory from \"__KOOT_CLIENT_REQUIRE_CREATE_HISTORY__\"\r\nimport { parsePath } from 'history/lib/PathUtils'\r\nimport isI18nEnabled from '../i18n/is-enabled'\r\n\r\n/**\r\n * History Enhancer: use basename\r\n * \r\n * Original useBasename enhancer from history also override all read methods\r\n * `getCurrentLocation` `listenBefore` `listen`\r\n * But as Diablohu tested, when read methods overrided, if the route matched used async method to get component, would fail\r\n * that rendering blank page and no route match event fired\r\n * So we only overrid write methods here. And modify the first level path in routes object to `:localeId`\r\n * \r\n * @param {Function} createHistory\r\n * @returns {Object} History\r\n */\r\nconst kootUseBasename = (createHistory) =>\r\n    (options = {}) => {\r\n        const history = createHistory(options)\r\n        const { basename } = options\r\n\r\n        const addBasename = (location) => {\r\n            if (!location)\r\n                return location\r\n\r\n            if (basename && location.basename == null) {\r\n                if (location.pathname.toLowerCase().indexOf(basename.toLowerCase()) === 0) {\r\n                    location.pathname = location.pathname.substring(basename.length)\r\n                    location.basename = basename\r\n\r\n                    if (location.pathname === '')\r\n                        location.pathname = '/'\r\n                } else {\r\n                    location.basename = ''\r\n                }\r\n            }\r\n\r\n            return location\r\n        }\r\n\r\n        const prependBasename = (location) => {\r\n            if (!basename)\r\n                return location\r\n\r\n            const object = typeof location === 'string' ? parsePath(location) : location\r\n            const pname = object.pathname\r\n            const normalizedBasename = basename.slice(-1) === '/' ? basename : `${basename}/`\r\n            const normalizedPathname = pname.charAt(0) === '/' ? pname.slice(1) : pname\r\n            const pathname = normalizedBasename + normalizedPathname\r\n\r\n            return {\r\n                ...object,\r\n                pathname\r\n            }\r\n        }\r\n\r\n        // Override all write methods with basename-aware versions.\r\n        const push = (location) =>\r\n            history.push(prependBasename(location))\r\n\r\n        const replace = (location) =>\r\n            history.replace(prependBasename(location))\r\n\r\n        const createPath = (location) =>\r\n            history.createPath(prependBasename(location))\r\n\r\n        const createHref = (location) =>\r\n            history.createHref(prependBasename(location))\r\n\r\n        const createLocation = (location, ...args) =>\r\n            addBasename(history.createLocation(prependBasename(location), ...args))\r\n\r\n        return {\r\n            ...history,\r\n            push,\r\n            replace,\r\n            createPath,\r\n            createHref,\r\n            createLocation\r\n        }\r\n    }\r\n\r\nlet historyClient\r\n\r\nconst history = (() => {\r\n    if (__CLIENT__) {\r\n        if (!historyClient) {\r\n            const initialState = window.__REDUX_STATE__ || {}\r\n            const historyConfig = { basename: '/' }\r\n            if (isI18nEnabled() &&\r\n                process.env.KOOT_I18N_URL_USE === 'router' &&\r\n                initialState.localeId\r\n            ) {\r\n                historyConfig.basename = `/${initialState.localeId}`\r\n                historyClient = kootUseBasename(createHistory)(historyConfig)\r\n            } else {\r\n                // historyClient = require(\"__KOOT_CLIENT_REQUIRE_HISTORY__\")\r\n                historyClient = createHistory()\r\n            }\r\n            // console.log({\r\n            //     historyConfig,\r\n            //     historyClient\r\n            // })\r\n        }\r\n        return historyClient\r\n    }\r\n\r\n    if (__SERVER__) {\r\n        return undefined\r\n    }\r\n})()\r\n\r\nexport default history\r\n","/**\r\n * inject 缓存键值\r\n */\r\nmodule.exports = {\r\n    styles: 'STYLES',\r\n    scriptsRunFirst: 'SCRIPTS_RUN_FIRST',\r\n    scriptsInBody: 'SCRIPTS_IN_BODY',\r\n    uriServiceWorker: 'URI_SERVICE_WORKER'\r\n};\r\n","/* global __KOOT_SSR__:false */\r\n\r\nconst { needConnectComponents } = require('../defaults/defines-server');\r\n\r\n/**\r\n * 当前执行和渲染有关的操作是否安全\r\n * - 客户端: 永远安全\r\n * - 服务器端: SSR `dataToStore` 之前不安全，之后安全\r\n * @returns {boolean}\r\n */\r\nmodule.exports = () => {\r\n    if (__SERVER__) {\r\n        const SSR = __DEV__ ? global.__KOOT_SSR__ : __KOOT_SSR__;\r\n        if (SSR[needConnectComponents]) return false;\r\n        return true;\r\n    }\r\n    return true;\r\n};\r\n","export const LOCATION_UPDATE = '@@KOOT@@LOCATION_UPDATE'\r\n","import { LOCATION_UPDATE } from './actionType'\r\n\r\nexport function update(location) {\r\n    return {\r\n        type: LOCATION_UPDATE,\r\n        location\r\n    }\r\n}","import * as actions from './actions.js'\r\n\r\nexport const update = (location) => (dispatch) => {\r\n    return dispatch(\r\n        actions.update(location)\r\n    )\r\n}","export { LOCATION_UPDATE } from './actionType'\r\n\r\nimport reducer from './reducer'\r\nexport { reducer }\r\nexport { update } from './api'\r\n\r\nexport const REALTIME_LOCATION_REDUCER_NAME = 'realtimeLocation'\r\nexport { update as actionUpdate } from './actions'\r\n","import { LOCATION_UPDATE } from './actionType.js'\r\n\r\nconst initialState = {}\r\n\r\nexport default function(state = initialState, action) {\r\n\r\n    switch (action.type) {\r\n\r\n        case LOCATION_UPDATE:\r\n            return action.location\r\n\r\n    }\r\n\r\n    return state;\r\n\r\n}","import merge from 'lodash/merge';\r\nimport {\r\n    createStore as reduxCreateStore,\r\n    combineReducers as reduxCombineReducers,\r\n    applyMiddleware as reduxApplyMiddleware,\r\n    compose as reduxCompose\r\n} from 'redux';\r\nimport { routerReducer, routerMiddleware } from 'react-router-redux';\r\nimport thunk from 'redux-thunk';\r\nimport {\r\n    reducer as realtimeLocationReducer,\r\n    REALTIME_LOCATION_REDUCER_NAME\r\n} from './realtime-location';\r\nimport { SERVER_REDUCER_NAME, serverReducer } from '../ReactApp/server/redux';\r\nimport {\r\n    reducerLocaleId as i18nReducerLocaleId\r\n    // reducerLocales as i18nReducerLocales,\r\n} from '../i18n/redux';\r\nimport isI18nEnabled from '../i18n/is-enabled';\r\n// import history from \"__KOOT_CLIENT_REQUIRE_HISTORY__\"\r\nimport history from './history';\r\nimport { load as loadSessionStore } from './client-session-store';\r\n// const getHistory = () => {\r\n//     if (__SPA__) {\r\n//         return require('react-router/lib/hashHistory')\r\n//     }\r\n//     return require('react-router/lib/browserHistory')\r\n// }\r\n\r\n/******************************************************************************\r\n * ┌─┐┌─┐┌┐┌┌─┐┌┬┐┌─┐┌┐┌┌┬┐┌─┐\r\n * │  │ ││││└─┐ │ ├─┤│││ │ └─┐\r\n * └─┘└─┘┘└┘└─┘ ┴ ┴ ┴┘└┘ ┴ └─┘\r\n *****************************************************************************/\r\n\r\nexport const RESET_CERTAIN_STATE = '@@KOOT@@RESET_CERTAIN_STATE';\r\n\r\n/******************************************************************************\r\n * ┌─┐┌─┐┌─┐┌─┐┌┐┌┌┬┐┬┌─┐┬  ┌─┐\r\n * ├┤ └─┐└─┐├┤ │││ │ │├─┤│  └─┐\r\n * └─┘└─┘└─┘└─┘┘└┘ ┴ ┴┴ ┴┴─┘└─┘\r\n *****************************************************************************/\r\n\r\n/**\r\n * @type {Array}\r\n */\r\nexport const reducers = {\r\n    // 路由状态扩展\r\n    routing: routerReducer,\r\n    // 目的：新页面请求处理完成后再改变URL\r\n    [REALTIME_LOCATION_REDUCER_NAME]: realtimeLocationReducer,\r\n    // 对应服务器生成的store\r\n    [SERVER_REDUCER_NAME]: serverReducer\r\n};\r\nif (isI18nEnabled()) {\r\n    reducers.localeId = i18nReducerLocaleId;\r\n    // reducers.locales = i18nReducerLocales\r\n}\r\n\r\n/**\r\n * @type {Object}\r\n */\r\nexport const initialState = (() => {\r\n    if (__CLIENT__) return merge(window.__REDUX_STATE__, loadSessionStore());\r\n    if (__SERVER__) return {};\r\n})();\r\n\r\n/**\r\n * @type {Array}\r\n */\r\nexport const middlewares = [thunk, routerMiddleware(history)];\r\n\r\n// const enhancerClientModifyState = createStore => (\r\n//     reducer,\r\n//     preloadedState,\r\n//     enhancer\r\n// ) => {\r\n//     const store = createStore(reducer, preloadedState, enhancer);\r\n//     console.log({ store, state: store.getState() });\r\n//     return store;\r\n// };\r\n\r\n// const rootReducerClientResetCertainState = (state, action) => {\r\n//     const reset = (data, prefix = '') => {\r\n//         for (const [key, value] of Object.entries(data)) {\r\n//             const newKey = prefix ? `${prefix}.${key}` : key;\r\n//             if (\r\n//                 typeof value === 'object' &&\r\n//                 typeof state[key] === 'object' &&\r\n//                 !Array.isArray(state[key])\r\n//             ) {\r\n//                 return reset(value, newKey);\r\n//             } else if (value === true) {\r\n//                 console.log(newKey);\r\n//             }\r\n//         }\r\n//     };\r\n//     if (\r\n//         __CLIENT__ &&\r\n//         action.type === RESET_CERTAIN_STATE &&\r\n//         typeof action.data === 'object'\r\n//     ) {\r\n//         reset(action.data);\r\n//     }\r\n// };\r\n\r\n/**\r\n * 创建 redux store\r\n * - _注_: 与 redux 提供的 `createStore` 方法略有不同，仅需提供项目所用的 reducer 对象和中间件列表，**不需要**初始 state 对象\r\n * @param {Object|Function} appReducers 项目使用的 reducer，可为 `ReducersMapObject` (形式为 Object 的列表)，也可以为 `Reducer` (reducer 函数)\r\n * @param {Function[]} appMiddlewares 项目的中间件列表\r\n * @param {Function[]} appEnhancers 项目的 store 增强函数 (enhancer) 列表\r\n * @returns {Object} redux store\r\n */\r\nexport const createStore = (\r\n    appReducer,\r\n    appMiddlewares = [],\r\n    appEnhancers = []\r\n) => {\r\n    // const toCompose = [\r\n    //     reduxApplyMiddleware(...middlewares.concat(appMiddlewares))\r\n    // ];\r\n    // if (__CLIENT__) toCompose.push(enhancerClientModifyState);\r\n\r\n    const projectReducer = (() => {\r\n        if (typeof appReducer === 'function') {\r\n            const kootReducer = reduxCombineReducers({ ...reducers });\r\n            return (state, action) => {\r\n                const { appState, kootState } = sliceStateForReducers(state);\r\n                return {\r\n                    ...appReducer(appState, action),\r\n                    ...kootReducer(kootState, action)\r\n                };\r\n            };\r\n        } else if (\r\n            typeof appReducer === 'object' &&\r\n            !Array.isArray(appReducer)\r\n        ) {\r\n            return reduxCombineReducers({\r\n                ...appReducer,\r\n                ...reducers\r\n            });\r\n        }\r\n\r\n        return reduxCombineReducers({\r\n            ...reducers\r\n        });\r\n    })();\r\n\r\n    if (!Array.isArray(appEnhancers) && appEnhancers)\r\n        appEnhancers = [appEnhancers];\r\n    else if (!appEnhancers) appEnhancers = [];\r\n\r\n    return reduxCreateStore(\r\n        projectReducer,\r\n        initialState,\r\n        reduxCompose(\r\n            reduxApplyMiddleware(...middlewares.concat(appMiddlewares)),\r\n            ...appEnhancers\r\n        )\r\n    );\r\n};\r\n\r\n/******************************************************************************\r\n * ┬ ┬┌─┐┬  ┌─┐┌─┐┬─┐┌─┐\r\n * ├─┤├┤ │  ├─┘├┤ ├┬┘└─┐\r\n * ┴ ┴└─┘┴─┘┴  └─┘┴└─└─┘\r\n *****************************************************************************/\r\n\r\n/**\r\n * 将当前 state 拆分为 _appState_ 和 _kootState_\r\n * @param {Object} state\r\n * @returns {Object} { appState, kootState }\r\n */\r\nconst sliceStateForReducers = state => {\r\n    const appState = {};\r\n    const kootState = {};\r\n    const keysForKootReducer = Object.keys(reducers);\r\n    Object.keys(state).forEach(key => {\r\n        if (keysForKootReducer.includes(key)) {\r\n            kootState[key] = state[key];\r\n        } else {\r\n            appState[key] = state[key];\r\n        }\r\n    });\r\n    return {\r\n        appState,\r\n        kootState\r\n    };\r\n};\r\n","// import React from 'react'\r\n\r\n/**\r\n * 生成 StyleMapContext\r\n */\r\n// export const createStyleMapContext = () => {\r\n//     return React.createContext({})\r\n// }\r\n\r\n// export let StyleMapContext = createStyleMapContext()\r\n\r\n/**\r\n * 将样式表写入到 head 标签内\r\n * @param {Object} styleMap\r\n */\r\nexport const checkAndWriteIntoHead = (styleMap = {}) => {\r\n    if (typeof styleMap !== 'object') return;\r\n    Object.keys(styleMap).forEach(wrapper => {\r\n        const style = styleMap[wrapper];\r\n        const el = document.querySelector(\r\n            `style[${__STYLE_TAG_MODULE_ATTR_NAME__}=${wrapper}]`\r\n        );\r\n        if (style.count > 0) {\r\n            // 配置样式\r\n            if (!el && style.css !== '') {\r\n                const styleTag = document.createElement('style');\r\n                styleTag.innerHTML = style.css;\r\n                // styleTag.setAttribute('id', wrapper);\r\n                styleTag.setAttribute(__STYLE_TAG_MODULE_ATTR_NAME__, wrapper);\r\n                document.getElementsByTagName('head')[0].appendChild(styleTag);\r\n            }\r\n        } else {\r\n            // 移除样式\r\n            if (el) {\r\n                el.remove();\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\n// const getStyleMap = (passedMap) => {\r\n//     if (__CLIENT__)\r\n//         return passedMap\r\n//     if (typeof __KOOT_SSR__ === 'object') {\r\n//         // console.log({ LocaleId })\r\n//         return __KOOT_SSR__.styleMap.get(LocaleId)\r\n//     }\r\n//     return passedMap\r\n// }\r\n\r\n/**\r\n * 追加样式\r\n * @param {Object} styleMap\r\n * @param {Object|Array} style\r\n */\r\nexport const append = (styleMap = {}, style) => {\r\n    // const styleMap = getStyleMap(passedMap)\r\n\r\n    if (Array.isArray(style))\r\n        return style.forEach(theStyle => append(styleMap, theStyle));\r\n\r\n    if (typeof style !== 'object') return;\r\n\r\n    if (!styleMap[style.wrapper]) {\r\n        styleMap[style.wrapper] = {\r\n            css: style.css,\r\n            count: 1\r\n        };\r\n    } else {\r\n        styleMap[style.wrapper].count++;\r\n    }\r\n\r\n    if (__CLIENT__) {\r\n        checkAndWriteIntoHead(styleMap);\r\n    }\r\n};\r\n\r\n/**\r\n * 移除样式\r\n * @param {Object} styleMap\r\n * @param {*} style\r\n */\r\nexport const remove = (styleMap = {}, style) => {\r\n    // const styleMap = getStyleMap(passedMap)\r\n\r\n    if (Array.isArray(style))\r\n        return style.forEach(theStyle => remove(theStyle));\r\n\r\n    if (typeof style !== 'object') return;\r\n\r\n    if (styleMap[style.wrapper]) {\r\n        styleMap[style.wrapper].count--;\r\n    }\r\n};\r\n\r\n// export const idDivStylesContainer = '__KOOT_ISOMORPHIC_STYLES_CONTAINER__'\r\n\r\n// /**\r\n//  * 分析 HTML 代码，解析已有样式表，将其从 HTML 代码中移除，并返回可以直接写入到 head 标签内的样式表代码\r\n//  * @param {String} html\r\n//  * @returns {String} htmlStyles\r\n//  */\r\n// export const parseHtmlForStyles = (html) => {\r\n//     const matches = html.match(new RegExp(`<div id=\"${idDivStylesContainer}\">(.*?)</div>`, 'm'))\r\n//     if (\r\n//         !matches ||\r\n//         typeof matches !== 'object' ||\r\n//         typeof matches.index === 'undefined' ||\r\n//         typeof matches[1] === 'undefined'\r\n//     )\r\n//         return {\r\n//             html,\r\n//             htmlStyles: ''\r\n//         }\r\n//     return {\r\n//         html: html.substr(0, matches.index),\r\n//         htmlStyles: matches[1]\r\n//     }\r\n// }\r\n\r\n// /**\r\n//  * React 组件: 样式表内容容器\r\n//  */\r\n// export class StylesContainer extends React.Component {\r\n//     static contextType = StyleMapContext\r\n//     render() {\r\n//         return (\r\n//             <div\r\n//                 id={idDivStylesContainer}\r\n//                 dangerouslySetInnerHTML={{\r\n//                     __html: Object.keys(this.context)\r\n//                         .filter(id => !!this.context[id].css)\r\n//                         .map(id => `<style id=\"${id}\">${this.context[id].css}</style>`)\r\n//                         .join('')\r\n//                 }}\r\n//             />\r\n//         )\r\n//     }\r\n// }\r\n","export const CHANGE_LANGUAGE = '@@KOOT@@CHANGE_LANGUAGE'\r\nexport const GET_ORIGIN_URL = '@@KOOT@@GET_ORIGIN_URL'\r\nexport const TELL_CLIENT_URL = '@@KOOT@@TELL_CLIENT_URL'\r\nexport const SYNC_COOKIE = '@@KOOT@@SYNC_COOKIE'\r\n\r\nexport default {\r\n    CHANGE_LANGUAGE,\r\n    GET_ORIGIN_URL,\r\n    TELL_CLIENT_URL,\r\n    SYNC_COOKIE,\r\n}\r\n","// import 'regenerator-runtime/runtime';\r\nimport run from './run';\r\n\r\nexport default run;\r\n","// import useRouterHistory from 'react-router/lib/useRouterHistory'\r\n// import createMemoryHistory from 'history/lib/createMemoryHistory'\r\n// import { syncHistoryWithStore } from 'react-router-redux'\r\n\r\nimport { serviceWorker as devRequestServiceWorker } from '../../../../defaults/dev-request-uri';\r\nimport { uriServiceWorker } from '../../../../React/inject/_cache-keys';\r\n\r\nimport getChunkmap from '../../../../utils/get-chunkmap';\r\nimport getSWPathname from '../../../../utils/get-sw-pathname';\r\n\r\nimport i18nGetLangFromCtx from '../../../../i18n/server/get-lang-from-ctx';\r\nimport getI18nType from '../../../../i18n/get-type';\r\nimport localesIds from '../../../../i18n/locale-ids';\r\n\r\n// import initStore from './init-store'\r\nimport validateI18n from '../../validate/i18n';\r\nimport ssr from './ssr';\r\n\r\n/**\r\n * KOA 中间件: 同构\r\n * @param {Object} options\r\n * @param {Object} options.reduxConfig Redux 配置\r\n * @param {Function} [options.reduxConfig.factoryStore] 生成 Redux Store 的方法。`factoryStore` 和 `store` 必须存在一个，且互斥\r\n * @param {Object} [options.reduxConfig.store] Redux Store 对象。`factoryStore` 和 `store` 必须存在一个，且互斥\r\n * @param {Object} [options.reduxConfig.syncCookie] 同步 cookie 到 store 的配置\r\n * @param {Object} options.routerConfig 路由配置对象，直接供 `react-router` 使用\r\n * @returns {Function} KOA middleware\r\n */\r\nconst middlewareIsomorphic = (options = {}) => {\r\n    const {\r\n        // reduxConfig,\r\n        renderCacheMap,\r\n        locales,\r\n        proxyRequestOrigin = {},\r\n        template,\r\n        templateInject = {}\r\n    } = options;\r\n    // const ssrConfig = {}\r\n\r\n    // const localeIds = getLocaleIds()\r\n    // if (localeIds.length) {\r\n    //     localeIds.forEach(localeId => {\r\n    //         styleMap.set(localeId, {})\r\n    //     })\r\n    // } else {\r\n    //     styleMap.set('', {})\r\n    // }\r\n    // const styleMap = {}\r\n\r\n    /**\r\n     * @type {Map}\r\n     * 注入内容缓存\r\n     * 则第一级为语种ID或 `` (空字符串)\r\n     */\r\n    const templateInjectCache = new Map();\r\n\r\n    /** @type {Object} chunkmap */\r\n    const chunkmap = getChunkmap(true);\r\n    /** @type {Map} webpack 的入口，从 chunkmap 中抽取 */\r\n    const entrypoints = new Map();\r\n    /** @type {Map} 文件名与实际结果的文件名的对应表，从 chunkmap 中抽取 */\r\n    const filemap = new Map();\r\n    /** @type {Map} 样式表 */\r\n    // const styleMap = new Map()\r\n    /** @type {Object} 公用缓存空间 */\r\n    const globalCache = new Map();\r\n    globalCache.set('__', {});\r\n\r\n    /** @type {String} i18n 类型 */\r\n    const i18nType = getI18nType();\r\n\r\n    // 针对 i18n 分包形式的项目，静态注入按语言缓存\r\n    if (i18nType === 'default') {\r\n        for (const l in chunkmap) {\r\n            const thisLocaleId = l.substr(0, 1) === '.' ? l.substr(1) : l;\r\n            entrypoints.set(thisLocaleId, chunkmap[l]['.entrypoints']);\r\n            filemap.set(thisLocaleId, chunkmap[l]['.files']);\r\n            const cache = {};\r\n            if (!__DEV__) {\r\n                extendCacheObject(cache, chunkmap, l);\r\n            }\r\n            templateInjectCache.set(thisLocaleId, cache);\r\n            // styleMap.set(thisLocaleId, {})\r\n        }\r\n    } else {\r\n        entrypoints.set('', chunkmap['.entrypoints']);\r\n        filemap.set('', chunkmap['.files']);\r\n        const cache = {};\r\n        if (!__DEV__) {\r\n            extendCacheObject(cache, chunkmap);\r\n        }\r\n        templateInjectCache.set('', cache);\r\n        // styleMap.set('', {})\r\n    }\r\n\r\n    if (Array.isArray(localesIds)) {\r\n        localesIds.forEach(localeId => {\r\n            globalCache.set(localeId, {});\r\n            // Object.defineProperty(globalCache, localeId, {\r\n            //     value: {},\r\n            //     enumerable: false,\r\n            //     writable: false,\r\n            //     configurable: false\r\n            // });\r\n        });\r\n    }\r\n\r\n    return async (ctx, next) => {\r\n        /** @type {String} 本次请求的 URL */\r\n        const url = ctx.path + ctx.search;\r\n\r\n        try {\r\n            // console.log('request url', url)\r\n            // console.log('\\nSSR middleware start')\r\n\r\n            /** @type {String} 本次请求的语种ID */\r\n            const LocaleId = i18nGetLangFromCtx(ctx) || '';\r\n            // setLocaleId(LocaleId)\r\n            // console.log(`LocaleId -> ${LocaleId}`)\r\n\r\n            // 如果存在缓存匹配，直接返回缓存结果\r\n            const thisRenderCache = renderCacheMap\r\n                ? renderCacheMap.get(LocaleId)\r\n                : undefined;\r\n            const cached = thisRenderCache ? thisRenderCache.get(url) : false;\r\n            if (!__DEV__ && cached !== false) {\r\n                ctx.body = cached;\r\n                return;\r\n            }\r\n\r\n            /** @type {Object} 本次请求的 (当前语言的) 注入内容缓存 */\r\n            const thisTemplateInjectCache = templateInjectCache.get(\r\n                i18nType === 'default' ? LocaleId : ''\r\n            );\r\n            /** @type {Object} 本次请求的 (当前语言的) 入口表 */\r\n            const thisEntrypoints = entrypoints.get(\r\n                i18nType === 'default' ? LocaleId : ''\r\n            );\r\n            /** @type {Object} 本次请求的 (当前语言的) 文件名对应表 */\r\n            const thisFilemap = filemap.get(\r\n                i18nType === 'default' ? LocaleId : ''\r\n            );\r\n            /** @type {Object} 本次请求的 (当前语言的) CSS 对照表 */\r\n            const styleMap = {};\r\n            // const thisStyleMap = styleMap.get(i18nType === 'default' ? LocaleId : '')\r\n\r\n            if (__DEV__) {\r\n                extendCacheObject(\r\n                    thisTemplateInjectCache,\r\n                    chunkmap,\r\n                    i18nType === 'default' ? LocaleId : undefined\r\n                );\r\n            }\r\n\r\n            // 生成/清理 Store\r\n            // console.log('\\x1b[36m⚑\\x1b[0m' + ' Store created')\r\n            // const Store = initStore(reduxConfig)\r\n\r\n            // 生成 History\r\n            // const historyConfig = {\r\n            //     basename: LocaleId && process.env.KOOT_I18N_URL_USE === 'router'\r\n            //         ? `/${LocaleId}`\r\n            //         : '/'\r\n            // }\r\n            // const memoryHistory = useRouterHistory(() => createMemoryHistory(url))(historyConfig)\r\n            /** @type {Object} 已生成的 History 实例 */\r\n            // const History = syncHistoryWithStore(memoryHistory, Store)\r\n\r\n            // eval SSR\r\n            // [开发环境] 每次请求都重新验证一次语言包，以确保语言包的更新\r\n            const SSRoptions = {\r\n                ctx,\r\n\r\n                // Store, History,\r\n                // memoryHistory,\r\n                LocaleId,\r\n                locales: __DEV__ ? await validateI18n() : locales,\r\n\r\n                // ssrConfig,\r\n\r\n                // syncCookie: reduxConfig.syncCookie,\r\n                proxyRequestOrigin,\r\n                templateInject,\r\n                template,\r\n\r\n                thisTemplateInjectCache,\r\n                thisEntrypoints,\r\n                thisFilemap, //thisStyleMap,\r\n                styleMap,\r\n                globalCache,\r\n\r\n                connectedComponents: __DEV__\r\n                    ? global.__KOOT_SSR__.connectedComponents || []\r\n                    : []\r\n            };\r\n            if (__DEV__) {\r\n                // global.__KOOT_STORE__ = Store\r\n                // global.__KOOT_HISTORY__ = History\r\n                // global.__KOOT_LOCALEID__ = LocaleId\r\n                // global.__KOOT_SSR__ = SSRoptions\r\n                global.__KOOT_SSR_SET__(SSRoptions);\r\n                global.__KOOT_SSR_SET_LOCALEID__(LocaleId);\r\n            }\r\n            const result = await ssr(SSRoptions);\r\n\r\n            // console.log('eval finished', {\r\n            //     'localeId in store': Store.getState().localeId\r\n            // })\r\n            // console.log('\\n\\n\\n')\r\n\r\n            if (result.body) {\r\n                // HTML 结果暂存入缓存\r\n                if (thisRenderCache) thisRenderCache.set(url, result.body);\r\n                ctx.body = result.body;\r\n                return;\r\n            }\r\n\r\n            if (result.error) throw result.error;\r\n\r\n            if (result.redirect) return ctx.redirect(result.redirect);\r\n\r\n            if (result.next) return await next();\r\n        } catch (err) {\r\n            require('debug')('SYSTEM:isomorphic:error')(\r\n                'Server-Render Error Occures: %O',\r\n                err.stack\r\n            );\r\n            console.error(err);\r\n            ctx.status = 500;\r\n            ctx.body = err.message;\r\n            ctx.app.emit('error', err, ctx);\r\n        }\r\n    };\r\n};\r\n\r\nexport default middlewareIsomorphic;\r\n\r\n// ============================================================================\r\n\r\nconst extendCacheObject = (cache, chunkmap, localeId) => {\r\n    const serviceWorker = getSWPathname(\r\n        localeId ? chunkmap[localeId] : chunkmap\r\n    );\r\n    if (serviceWorker) {\r\n        cache[uriServiceWorker] = __DEV__\r\n            ? devRequestServiceWorker\r\n            : serviceWorker;\r\n    }\r\n};\r\n","/* eslint-disable no-unused-vars */\r\n\r\nimport __KOOT_GET_DIST_PATH__ from '../../../../utils/get-dist-path';\r\n\r\nconst fs = require('fs-extra');\r\nconst path = require('path');\r\n// const vm = require('vm')\r\n// const chalk = require('chalk')\r\n\r\n/** @type {String} ssr.js 文件内容 */\r\nlet __KOOT_SSR_FILE_CONTENT__;\r\n\r\n/**\r\n * 执行服务器端渲染 (Server-Side Rendering)\r\n */\r\nconst ssr = async __KOOT_SSR__ =>\r\n    new Promise(async resolve => {\r\n        __KOOT_SSR__.ssrComplete = result => resolve(result);\r\n\r\n        if (__DEV__) {\r\n            return await require('../../ssr')\r\n                .default()\r\n                .catch(err =>\r\n                    resolve({\r\n                        error: err\r\n                    })\r\n                );\r\n        }\r\n\r\n        if (!__KOOT_SSR_FILE_CONTENT__) {\r\n            const fileSSR = path.resolve(\r\n                __KOOT_GET_DIST_PATH__(),\r\n                'server/ssr.js'\r\n            );\r\n            if (fs.existsSync(fileSSR)) {\r\n                __KOOT_SSR_FILE_CONTENT__ = fs.readFileSync(fileSSR, 'utf-8');\r\n            } else {\r\n                throw new Error(\r\n                    \"No `/server/ssr.js` found. Maybe there's an error while building. Please retry `koot-build`\"\r\n                );\r\n            }\r\n        }\r\n\r\n        // __KOOT_SSR__.result = false\r\n        // const {\r\n        //     Store,\r\n        //     History,\r\n        //     LocaleId,\r\n        // } = __KOOT_SSR__\r\n\r\n        // console.log('before eval', {\r\n        //     LocaleId, logged: __KOOT_SSR__.logged,\r\n        //     'in __KOOT_SSR__': __KOOT_SSR__.LocaleId\r\n        // })\r\n\r\n        // console.log('\\n' + chalk.cyanBright('eval SSR'))\r\n        // await eval(__KOOT_SSR_FILE_CONTENT__)\r\n\r\n        let Store, History, __KOOT_STORE__, __KOOT_HISTORY__, __KOOT_CTX__;\r\n        const {\r\n            // Store: __KOOT_STORE__,\r\n            // History: __KOOT_HISTORY__,\r\n            LocaleId: __KOOT_LOCALEID__\r\n        } = __KOOT_SSR__;\r\n\r\n        const __KOOT_SSR_SET_STORE__ = value => {\r\n            Store = value;\r\n            __KOOT_STORE__ = value;\r\n        };\r\n        const __KOOT_SSR_SET_HISTORY__ = value => {\r\n            History = value;\r\n            __KOOT_HISTORY__ = value;\r\n        };\r\n        const __KOOT_SSR_SET_CTX__ = value => {\r\n            __KOOT_CTX__ = value;\r\n        };\r\n\r\n        try {\r\n            // eslint-disable-next-line no-eval\r\n            eval(__KOOT_SSR_FILE_CONTENT__);\r\n        } catch (err) {\r\n            resolve({\r\n                error: err\r\n            });\r\n        }\r\n    });\r\n\r\nexport default ssr;\r\n","const fs = require('fs-extra');\n\nconst router = new require('koa-router')();\n\n// const { pathnameSockjs } = require('../../../defaults/before-build');\nconst {\n    publicPathPrefix,\n    serviceWorkerFilename,\n} = require('../../../defaults/webpack-dev-server');\nconst { dll, serviceWorker } = require('../../../defaults/dev-request-uri');\n// const getWDSport = require('../../../utils/get-webpack-dev-server-port');\n\nconst getDevRoutes = require('../../../libs/get-dev-routes');\n\nconst { KOOT_DEV_DLL_FILE_CLIENT: fileDllClient } = process.env;\n\ngetDevRoutes().forEach(({ file, route }) => {\n    router.get(route, (ctx) => {\n        ctx.type = 'application/javascript';\n        ctx.body = fs.readFileSync(file);\n    });\n});\nrouter.get(dll, (ctx) => {\n    if (fileDllClient && fs.existsSync(fileDllClient)) {\n        ctx.type = 'application/javascript';\n        ctx.body = fs.readFileSync(fileDllClient);\n    } else {\n        ctx.body = '';\n    }\n});\n\nrouter.get(serviceWorker, async (ctx) => {\n    const uri = `${ctx.origin}/${publicPathPrefix}/dist/${serviceWorkerFilename}`;\n    const res = await fetch(new Request(uri));\n    ctx.body = await res.text();\n    ctx.type = 'application/javascript';\n});\n\n// router.get(`/${pathnameSockjs}/*`, async ctx => {\n//     const portWebpackDevServer = getWDSport();\n//     ctx.redirect(\n//         `${ctx.protocol}://${ctx.hostname}:${portWebpackDevServer}${ctx.path}?${ctx.querystring}`\n//     );\n// });\n\nexport default router.routes();\n","import convert from 'koa-convert';\r\nimport koaStatic from 'koa-static';\r\n\r\nimport getDirDistPublic from '../../../libs/get-dir-dist-public';\r\nimport getDistPath from '../../../utils/get-dist-path';\r\n\r\nimport koaStaticDefaults from '../../../defaults/koa-static';\r\n\r\n/**\r\n * KOA 中间件: 静态资源\r\n * @param {Object} koaStaticConfig\r\n * @return {Function}\r\n */\r\nconst staticMiddleware = (koaStaticConfig = {}) => {\r\n    const dir = getDirDistPublic(getDistPath());\r\n    const config = Object.assign({}, koaStaticDefaults, koaStaticConfig);\r\n    // console.log('koa-statc', {\r\n    //     dir,\r\n    //     config,\r\n    //     koaStaticDefaults,\r\n    //     koaStaticConfig\r\n    // });\r\n    return convert(koaStatic(dir, config));\r\n};\r\n\r\nexport default staticMiddleware;\r\n","// TODO: change to one action type , like: CHANGE_BASE_INFO\r\n\r\nimport { CHANGE_LANGUAGE, TELL_CLIENT_URL, SYNC_COOKIE } from '../action-types';\r\n\r\nexport { CHANGE_LANGUAGE, TELL_CLIENT_URL, SYNC_COOKIE };\r\n\r\nexport const SERVER_REDUCER_NAME = 'server';\r\n\r\nexport const serverReducer = (state = { lang: 'en', origin: '' }, action) => {\r\n    switch (action.type) {\r\n        case CHANGE_LANGUAGE:\r\n            return Object.assign({}, state, {\r\n                lang: action.data\r\n            });\r\n        case TELL_CLIENT_URL:\r\n            return Object.assign({}, state, {\r\n                origin: action.data\r\n            });\r\n        case SYNC_COOKIE:\r\n            return Object.assign({}, state, {\r\n                cookie: action.data\r\n            });\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","/**\r\n * @callback cacheGet\r\n * 缓存检查与吐出方法\r\n * @param {String} url\r\n * @return {Boolean|String} 对该 URL 不使用缓存时返回 false，使用时返回缓存结果 String\r\n */\r\n\r\n/**\r\n * @callback cacheSet\r\n * 缓存存储方法\r\n * @param {String} url\r\n * @param {String} html\r\n */\r\n\r\nconst defaults = require('../../defaults/render-cache');\r\n\r\n/**\r\n * @class React 同构渲染缓存，基于 URL (开发环境: 禁用缓存)\r\n */\r\nclass KootReactRenderCache {\r\n    /**\r\n     * @param {Object} [options={}]\r\n     * @param {number} [options.maxAge] 缓存存在时间\r\n     * @param {number} [options.maxCount] 最多缓存的 URL 的数量\r\n     * @param {cacheGet} [options.get] 自定义缓存检查与吐出方法。存在时, maxAge 和 maxCount 设置将被忽略\r\n     * @param {cacheSet} [options.set] 自定义缓存存储方法。存在时, maxAge 和 maxCount 设置将被忽略\r\n     */\r\n    constructor(options = {}) {\r\n        if (options === true) options = {};\r\n        const {\r\n            maxAge = defaults.maxAge,\r\n            maxCount = defaults.maxCount\r\n        } = options;\r\n\r\n        this.list = new Map();\r\n        this.cachedUrls = [];\r\n        this.maxAge = maxAge;\r\n        this.maxCount = maxCount;\r\n        this.customGet = options.get;\r\n        this.customSet = options.set;\r\n\r\n        // console.log({\r\n        //     maxAge: this.maxAge,\r\n        //     maxCount: this.maxCount\r\n        // });\r\n    }\r\n\r\n    /**\r\n     * 缓存检查与吐出方法\r\n     * @param {String} url\r\n     * @return {Boolean|String} 对该 URL 不使用缓存时返回 false，使用时返回缓存结果 String\r\n     */\r\n    get(url) {\r\n        if (typeof this.customGet === 'function') return this.customGet(url);\r\n\r\n        // 没有该条结果，直接返回 false\r\n        if (!this.list.has(url)) return false;\r\n\r\n        const { html, time } = this.list.get(url);\r\n\r\n        // 缓存时间短于设定的最大时间，返回缓存结果\r\n        if (Date.now() - time < this.maxAge) {\r\n            // console.log('')\r\n            // console.log(`cached result: ${url} | ${time} | ${Date.now() - time}`)\r\n            // console.log('')\r\n            return html;\r\n        }\r\n\r\n        // 否则删除已缓存结果，并返回 false\r\n        this.remove(url);\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 缓存存储方法\r\n     * @param {String} url\r\n     * @param {String} html\r\n     */\r\n    set(url, html) {\r\n        if (typeof this.customSet === 'function')\r\n            return this.customSet(url, html);\r\n\r\n        // 如果当前已缓存的 URL 数量不少于设定的最大数量\r\n        // 移除已缓存列表里的第一条结果\r\n        if (!this.list.has(url) && this.cachedUrls.length >= this.maxCount) {\r\n            // console.log('')\r\n            // console.log(`cached count out: ${url} | ${this.cachedUrls.length}`)\r\n            // console.log('')\r\n            this.remove(this.cachedUrls[0]);\r\n            // console.log('new list', this.cachedUrls)\r\n        }\r\n\r\n        // 缓存结果\r\n        this.cachedUrls.push(url);\r\n        this.list.set(url, {\r\n            html,\r\n            time: Date.now()\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 删除一条已缓存的条目\r\n     * @param {*} url\r\n     */\r\n    remove(url) {\r\n        this.list.delete(url);\r\n        this.cachedUrls.splice(this.cachedUrls.indexOf(url), 1);\r\n    }\r\n}\r\n\r\nmodule.exports = KootReactRenderCache;\r\n","/* eslint-disable no-console */\r\n/* __KOOT_DEV_SSR__ */\r\n\r\n// import koaCompress from 'koa-compress';\r\nimport {\r\n    template as templateConfig,\r\n    server as serverConfig\r\n    // redux as reduxConfigRaw\r\n} from '__KOOT_PROJECT_CONFIG_PORTION_SERVER_PATHNAME__';\r\n\r\nimport getPathnameDevServerStart from '../../utils/get-pathname-dev-server-start';\r\n\r\nimport createKoaApp from '../../libs/create-koa-app';\r\nimport errorMsg from '../../libs/error-msg';\r\nimport log from '../../libs/log';\r\n// import getDist from '../../utils/get-dist-path';\r\n// import sleep from '../../utils/sleep';\r\n\r\nimport validatePort from '../../libs/validate-port';\r\nimport createRenderCacheMap from './validate/create-render-cache-map';\r\n// import validateReduxConfig from '../../React/validate/redux-config'\r\nimport validateI18n from './validate/i18n';\r\nimport validateTemplate from './validate/template';\r\n\r\nimport middlewareRouterDev from './middlewares/router-dev';\r\nimport middlewareIsomorphic from './middlewares/isomorphic';\r\nimport middlewareStatic from './middlewares/static';\r\n\r\n// require('@babel/register')\r\n// require('@babel/polyfill')\r\nrequire('isomorphic-fetch');\r\nconst fs = require('fs-extra');\r\n// const path = require('path');\r\n// const chalk = require('chalk');\r\n\r\n//\r\n\r\n/**\r\n * 启动同构服务器 (KOA)\r\n * @async\r\n */\r\nconst startKootIsomorphicServer = async () => {\r\n    console.log(`\\r\\n  \\x1b[93m[koot/server]\\x1b[0m initializing...`);\r\n    const {\r\n        before: serverBefore,\r\n        after: serverAfter,\r\n        renderCache: renderCacheConfig,\r\n        proxyRequestOrigin,\r\n        inject: templateInject\r\n    } = serverConfig;\r\n\r\n    // 决定服务器启动端口\r\n    // 如果端口不可用，取消启动流程\r\n    /** @type {Number} 服务器启动端口 */\r\n    const port = await validatePort();\r\n    if (!port) throw new Error(errorMsg('VALIDATE_PORT', 'unavailable'));\r\n\r\n    // 确定 Redux 相关配置\r\n    // const reduxConfig = await validateReduxConfig(reduxConfigRaw)\r\n\r\n    // 确定模板内容\r\n    const template = await validateTemplate(templateConfig);\r\n\r\n    // 渲染缓存\r\n    const renderCacheMap = await createRenderCacheMap(renderCacheConfig);\r\n\r\n    // 语言包写入内存\r\n    const locales = !__DEV__ ? await validateI18n() : {};\r\n\r\n    // 创建 Koa 实例 (app)\r\n    /** @type {Koa} Koa 服务器实例 */\r\n    const app = createKoaApp();\r\n\r\n    // 生命周期: 服务器启动前\r\n    if (__DEV__)\r\n        log('callback', 'server', `callback: \\x1b[32m${'before'}\\x1b[0m(app)`);\r\n    if (typeof serverBefore === 'function') await serverBefore(app);\r\n\r\n    // [开发环境] 挂载中间件: 主服务器代理\r\n    if (__DEV__) app.use(middlewareRouterDev);\r\n\r\n    // [生产环境] 挂载中间件: 静态资源压缩\r\n    // if (!__DEV__)\r\n    //     app.use(\r\n    //         koaCompress({\r\n    //             filter: contentType =>\r\n    //                 /^text\\//i.test(contentType) ||\r\n    //                 /\\/(javascript|css|json|ld\\+json)$/i.test(contentType),\r\n    //             threshold: 2048,\r\n    //             flush: require('zlib').Z_SYNC_FLUSH\r\n    //         })\r\n    //     );\r\n\r\n    // 挂载中间件: 静态资源访问\r\n    app.use(\r\n        middlewareStatic(\r\n            (() => {\r\n                if (typeof serverConfig.koaStatic === 'object')\r\n                    return serverConfig.koaStatic;\r\n                if (typeof serverConfig.static === 'object')\r\n                    return serverConfig.static;\r\n                return {};\r\n            })()\r\n        )\r\n    );\r\n\r\n    // 挂载中间件: 同构服务器\r\n    app.use(\r\n        middlewareIsomorphic({\r\n            // reduxConfig,\r\n            renderCacheMap,\r\n            locales,\r\n            proxyRequestOrigin,\r\n            template,\r\n            templateInject\r\n        })\r\n    );\r\n\r\n    // 生命周期: 服务器即将启动\r\n    if (__DEV__)\r\n        log('callback', 'server', `callback: \\x1b[32m${'after'}\\x1b[0m(app)`);\r\n    if (typeof serverAfter === 'function') await serverAfter(app);\r\n\r\n    // [开发环境] 中间件: 请求完成后，触发 server/index.js 保存，让 PM2 重启服务器\r\n    if (__DEV__) {\r\n        app.use(async (ctx, next) => {\r\n            await next();\r\n            console.log('  ');\r\n            log('success', 'server', 'render success');\r\n            console.log('  ');\r\n            console.log('  ');\r\n            console.log('  ');\r\n            console.log('  ');\r\n            console.log('  ');\r\n            //     const fileServer = path.resolve(getDist(), 'server/index.js');\r\n            //     if (fs.existsSync(fileServer)) {\r\n            //         await sleep(200);\r\n            //         const content = await fs.readFile(fileServer, 'utf-8');\r\n            //         await fs.writeFile(fileServer, content, 'utf-8');\r\n            //     }\r\n        });\r\n    }\r\n\r\n    // 初始化完成，准备启动服务器\r\n    log(' ', 'server', `init \\x1b[32m${'OK'}\\x1b[0m!`);\r\n\r\n    // 启动服务器\r\n    await new Promise(resolve => {\r\n        if (__DEV__) {\r\n            app.listen(process.env.SERVER_PORT);\r\n            // 修改 flag 文件\r\n            setTimeout(() => {\r\n                console.log(\r\n                    `\\x1b[32m√\\x1b[0m ` +\r\n                        `\\x1b[93m[koot/server]\\x1b[0m started on \\x1b[32m${'http://localhost:' +\r\n                            port}\\x1b[0m`\r\n                );\r\n                fs.writeJsonSync(getPathnameDevServerStart(), {\r\n                    port: process.env.SERVER_PORT_DEV_MAIN,\r\n                    portServer: process.env.SERVER_PORT\r\n                });\r\n                console.log(' ');\r\n                return resolve();\r\n            });\r\n        } else {\r\n            app.listen(port);\r\n            setTimeout(() => {\r\n                console.log(\r\n                    `\\x1b[32m√\\x1b[0m ` +\r\n                        `\\x1b[93m[koot/server]\\x1b[0m listening port \\x1b[32m${port}\\x1b[0m`\r\n                );\r\n                console.log(' ');\r\n                return resolve();\r\n            });\r\n        }\r\n    }).catch(err => {\r\n        if (err instanceof Error)\r\n            err.message = errorMsg('KOA_APP_LAUNCH', err.message);\r\n        throw err;\r\n    });\r\n};\r\n\r\nexport default startKootIsomorphicServer;\r\n\r\nstartKootIsomorphicServer().catch(err => {\r\n    console.error(err);\r\n});\r\n","import RenderCache from '../render-cache';\r\nimport availableLocaleIds from '../../../i18n/locale-ids';\r\n// import isI18nEnabled from '../../../i18n/is-enabled'\r\n\r\n/**\r\n * 创建服务器渲染缓存存储空间\r\n *\r\n * Map 的第一级为语种ID，每个语种有独立的空间，非多语言项目为 `` (空String)\r\n *\r\n * @param {Object|boolean} renderCacheConfig\r\n * @returns {Map}\r\n */\r\nconst createRenderCacheMap = (renderCacheConfig = {}) => {\r\n    // console.log({ renderCacheConfig });\r\n    if (renderCacheConfig === false) return false;\r\n\r\n    const renderCache = new Map();\r\n\r\n    if (availableLocaleIds.length) {\r\n        availableLocaleIds.forEach(localeId => {\r\n            renderCache.set(localeId, new RenderCache(renderCacheConfig));\r\n        });\r\n    } else {\r\n        renderCache.set('', new RenderCache(renderCacheConfig));\r\n    }\r\n\r\n    return renderCache;\r\n};\r\n\r\nexport default createRenderCacheMap;\r\n","import isI18nEnabled from '../../../i18n/is-enabled';\r\nimport { setLocales } from '../../../i18n/locales';\r\nimport getDist from '../../../utils/get-dist-path';\r\nimport readLocaleFileSync from '../../../i18n/read-locale-file-sync';\r\n\r\nconst fs = require('fs-extra');\r\nconst path = require('path');\r\n\r\n/**\r\n * 验证 i18n 相关信息\r\n *\r\n * 如果没有开启多语言，不进行任何操作\r\n *\r\n * - 将所有可用语种ID写入内存\r\n * - 将所有语种的语言包写入内存\r\n *\r\n * _开发环境_ 同构中间件需执行该验证方法\r\n *\r\n * @returns {void}\r\n */\r\nconst validateI18n = () => {\r\n    if (!isI18nEnabled()) return;\r\n\r\n    /** @type {Object} 完整语言包配置 */\r\n    const localesFull = getLocalesFull();\r\n    // /** @type {String} 多语言类型 */\r\n    // const type = JSON.parse(process.env.KOOT_I18N_TYPE) || false\r\n    // const localeIds = []\r\n    const locales = {};\r\n    localesFull.forEach(arr => {\r\n        const [localeId, localeObj] = arr;\r\n        // localeIds.push(localeId)\r\n        locales[localeId] = localeObj;\r\n    });\r\n\r\n    // 服务器端注册多语言\r\n    setLocales(locales);\r\n\r\n    return locales;\r\n};\r\n\r\nexport default validateI18n;\r\n\r\n/**\r\n * 获取完整语言包配置\r\n * @returns {Object}\r\n */\r\nconst getLocalesFull = () => {\r\n    const locales = JSON.parse(process.env.KOOT_I18N_LOCALES);\r\n    return locales.map(l => [\r\n        l[0],\r\n        readLocaleFileSync(__DEV__ ? l[2] : getLocaleFile(l[3])),\r\n        l[2],\r\n        l[3]\r\n    ]);\r\n    // return JSON.parse(process.env.KOOT_I18N_LOCALES);\r\n};\r\n\r\n/** 通过环境变量中记录的相对路径读取语言包内容 */\r\nconst getLocaleFile = relativePath => {\r\n    let file = relativePath;\r\n    if (fs.existsSync(file)) return file;\r\n\r\n    file = path.resolve(getDist(), 'server', relativePath);\r\n    if (fs.existsSync(file)) return file;\r\n\r\n    file = path.resolve('server', relativePath);\r\n    if (fs.existsSync(file)) return file;\r\n\r\n    file = path.resolve(relativePath);\r\n    if (fs.existsSync(file)) return file;\r\n\r\n    return {};\r\n};\r\n","import errorMsg from '../../../libs/error-msg';\r\n\r\n/**\r\n * 验证模板内容\r\n *\r\n * 获取环境常量 `process.env.KOOT_HTML_TEMPLATE`，并返回合法的值\r\n *\r\n * @param {String} template Koot 配置项: `template`\r\n * @returns {String}\r\n */\r\nconst validateTemplate = template => {\r\n    if (__DEV__) {\r\n        return require('../../../libs/validate-template')(template);\r\n    }\r\n\r\n    if (typeof process.env.KOOT_HTML_TEMPLATE === 'string')\r\n        template = process.env.KOOT_HTML_TEMPLATE;\r\n\r\n    if (typeof template !== 'string')\r\n        throw new Error(\r\n            errorMsg(\r\n                'VALIDATE_TEMPLATE',\r\n                '`config.template` should be Pathname or EJS String'\r\n            )\r\n        );\r\n\r\n    // if (template.substr(0, 2) === './') {\r\n    //     // template = require(`raw-loader?` + path.resolve(\r\n    //     //     getCwd(), template\r\n    //     // ))\r\n    //     template = fs.readFileSync(path.resolve(\r\n    //         getCwd(), template\r\n    //     ), 'utf-8')\r\n    // }\r\n    // process.env.KOOT_HTML_TEMPLATE = template\r\n\r\n    return template;\r\n};\r\n\r\nexport default validateTemplate;\r\n","/**\r\n * Webpack 打包相关的常量，包括：\r\n * - 文件名\r\n * - 代码中使用的临时常量名\r\n * - `koot.config.js` 的属性名\r\n * - 其他代码中用到的常量名\r\n */\r\nmodule.exports = {\r\n    // 处理项目配置相关\r\n    keyFileProjectConfigTempFull: '__FILE_PROJECT_CONFIG_TEMP_FULL__',\r\n    keyFileProjectConfigTempPortionServer:\r\n        '__FILE_PROJECT_CONFIG_TEMP_PORTION_SERVER__',\r\n    keyFileProjectConfigTempPortionClient:\r\n        '__FILE_PROJECT_CONFIG_TEMP_PORTION_CLIENT__',\r\n    keyFileProjectConfigTempPortionOtherClient:\r\n        '__FILE_PROJECT_CONFIG_TEMP_PORTION_OTHER_CLIENT__',\r\n    keyKootBaseVersion: '__KOOT_BASE_VERSION__',\r\n    dirConfigTemp: 'logs/tmp/config',\r\n    filenameProjectConfigTempFull: 'full.*.js',\r\n    filenameProjectConfigTempPortionServer: 'portion.server.*.js',\r\n    filenameProjectConfigTempPortionClient: 'portion.client.*.js',\r\n    filenameProjectConfigTempPortionOtherClient: 'portion.client-other.*.js',\r\n    propertiesToExtract: [\r\n        ['name', ''],\r\n        ['type', 'react'],\r\n        ['template', ''],\r\n        ['templateInject', ''],\r\n        ['routes', ''],\r\n        ['historyType', ''],\r\n        ['store', ''],\r\n        ['cookiesToStore', ''],\r\n        ['client', {}],\r\n        ['server', {}]\r\n    ],\r\n    typesSPA: ['spa', 'reactspa', 'react-spa'],\r\n\r\n    // 打包 DLL 相关\r\n    keyConfigBuildDll: '__BUILD_DLL__',\r\n    filenameDll: '.dll.js',\r\n    filenameDllManifest: '.dll.manifest.json',\r\n    dirDll: 'dev-dll',\r\n\r\n    // 其他项目配置项名\r\n    keyConfigQuiet: '__QUIET__',\r\n    keyConfigOutputPathShouldBe: '__OUTPUT_PATH_SHOULD_BE__',\r\n    keyConfigWebpackSPATemplateInject: '__SPA_TEMPLATE_INJECT__',\r\n    keyConfigWebpackSPAServer: '__SPA_SERVER__',\r\n    keyConfigClientAssetsPublicPath: '__CLIENT_ASSETS_PUBLIC_PATH__',\r\n    keyConfigClientServiceWorkerPathname: '__CLIENT_SERVICE_WORKER_PATHNAME__',\r\n    WEBPACK_OUTPUT_PATH: '__WEBPACK_OUTPUT_PATH',\r\n    CLIENT_ROOT_PATH: '__CLIENT_ROOT_PATH',\r\n    WEBPACK_MODIFIED_PUBLIC_PATH: '__WEBPACK_MODIFIED_PUBLIC_PATH',\r\n    // CLEANUP_PREVIOUS_BUILDS_IDS: '__CLEANUP_PREVIOUS_BUILDS_IDS',\r\n    // CLEANUP_PREVIOUS_BUILDS_FILES: '__CLEANUP_PREVIOUS_BUILDS_FILES',\r\n\r\n    // 自定义 chunk\r\n    chunkNameExtractCss: '__KOOT__EXTRACT__CSS__',\r\n    chunkNameExtractCssForImport: '__KOOT__EXTRACT__CSS__NO__PUBLIC__PATH__',\r\n    chunkNameClientRunFirst: '__KOOT__CLIENT__RUN__FIRST__',\r\n\r\n    // [开发环境] 临时文件名\r\n    filenameWebpackDevServerPortTemp: '.dev_webpack-dev-server_port',\r\n    filenameBuilding: '.koot-building',\r\n    filenameBuildFail: '.koot-build-fail',\r\n    filenameSPATemplateInjectJS: '.spa-template-inject.LOCALEID.js',\r\n\r\n    // [生产环境] 文件名\r\n    // filenameCurrentBundle: '.koot-current',\r\n\r\n    // 标签属性\r\n    styleTagGlobalAttributeName: 'data-koot-global',\r\n    styleTagModuleAttributeName: 'data-koot-module',\r\n    scriptTagEntryAttributeName: 'data-koot-entry',\r\n\r\n    // 模板中的一些判断阈值\r\n    /**\r\n     * @type {number} 全局 CSS 抽出总结果文件尺寸阈值 (字节)\r\n     * - 如果超过这个值，会采用 <link> 引用的方式\r\n     * - 如果小于等于这个值，直接将文件内容写入 HTML\r\n     */\r\n    thresholdStylesExtracted: 50 * 1024,\r\n    /**\r\n     * @type {number} run-first 入口的文件尺寸阈值 (字节)\r\n     * - 如果超过这个值，会采用 <script> 引用的方式\r\n     * - 如果小于等于这个值，直接将文件内容写入 HTML\r\n     */\r\n    thresholdScriptRunFirst: 15 * 1024,\r\n\r\n    /** @type {string} 打包结果目录中的文件对照表文件名 */\r\n    buildManifestFilename: '.koot-public-manifest.json',\r\n    /** @type {string} 打包结果目录中输出文件总集文件名 */\r\n    buildOutputsFilename: '.koot-public-outputs.json',\r\n\r\n    /** @type {string} Webpack Dev Server 热更新 Web Socket 地址 */\r\n    pathnameSockjs: `sockjs-node`\r\n};\r\n","module.exports = __CLIENT__\r\n    ? {}\r\n    : {\r\n          needConnectComponents: '__NEED_CONNECT_COMPONENTS__'\r\n      };\r\n","module.exports = {\r\n    __KOOT_INJECT_ATTRIBUTE_NAME__: 'koot-inject',\r\n    __KOOT_INJECT_METAS_START__: 'koot-inject-metas-start',\r\n    __KOOT_INJECT_METAS_END__: 'koot-inject-metas-end',\r\n\r\n    // hl 这个参数名是参考了Instargram\r\n    changeLocaleQueryKey: 'hl',\r\n\r\n    sessionStoreKey: '__KOOT_SESSION_STORE__'\r\n};\r\n","/**\r\n * [开发环境] 特殊的请求 URI\r\n */\r\nmodule.exports = {\r\n    dll: '/__koot_dev_dll',\r\n    serviceWorker: `/__KOOT_DEV_SERVICE_WORKER.${\r\n        process.env.KOOT_PROJECT_NAME\r\n            ? encodeURIComponent(process.env.KOOT_PROJECT_NAME)\r\n            : '_'\r\n    }.js`\r\n};\r\n","module.exports = {\r\n    maxage: 0,\r\n    hidden: false,\r\n    index: 'index.html',\r\n    defer: false,\r\n    gzip: true,\r\n    extensions: false\r\n};\r\n","module.exports = {\r\n    maxAge: 5 * 1000,\r\n    maxCount: 50,\r\n}\r\n","module.exports = {\r\n    publicPathPrefix: '__koot_webpack_dev_server__',\r\n    entryClientHMR: 'webpack-dev-server-client',\r\n\r\n    serviceWorkerFilename: '__KOOT_DEV_SERVICE_WORKER__.js',\r\n\r\n    hmrOptions: {\r\n        // multiStep: true,\r\n        // fullBuildTimeout: process.env.WEBPACK_BUILD_TYPE === 'spa' ? 500 : undefined,\r\n        // requestTimeout: process.env.WEBPACK_BUILD_TYPE === 'spa' ? undefined : 1000\r\n    }\r\n};\r\n","export const I18N_INIT = '@@KOOT@@I18N_INIT'\r\nexport const I18N_SET_LOCALES = '@@KOOT@@I18N_SET_LOCALES'\r\n","/**\r\n * 从当前的 Redux state 中获取语言列表字符串\r\n * 如果 uri search 中存在 fb_locale，将该值放在第一位\r\n * \r\n * @param {object} state 当前的 Redux state\r\n * \r\n * @returns {string} 语言列表，使用分号(;)分割\r\n */\r\nexport const getLanguagelistFromState = ({\r\n    server = {},\r\n    routing\r\n}) => {\r\n    const fb_locale = (\r\n        routing &&\r\n        routing.locationBeforeTransitions &&\r\n        routing.locationBeforeTransitions.query\r\n    ) ? routing.locationBeforeTransitions.query.fb_locale : null\r\n\r\n    let lang = server.lang\r\n    if (fb_locale) lang = fb_locale + ';' + lang\r\n\r\n    return lang || ''\r\n}\r\n\r\nexport default getLanguagelistFromState\r\n","const isI18nEnabled = require('./is-enabled')\r\n\r\nlet locales\r\n\r\n/**\r\n * 获取 i18n 配置数组\r\n * @returns {Array}\r\n */\r\nmodule.exports = () => {\r\n    if (!Array.isArray(locales)) {\r\n        if (isI18nEnabled()) {\r\n            locales = JSON.parse(process.env.KOOT_I18N_LOCALES) || []\r\n        } else {\r\n            locales = []\r\n        }\r\n    }\r\n\r\n    return locales\r\n}\r\n","const isI18nEnabled = require('./is-enabled');\r\n\r\n/**\r\n * 获取当前多语言配置类型\r\n * @returns {String}\r\n */\r\nmodule.exports = () =>\r\n    isI18nEnabled()\r\n        ? JSON.parse(process.env.KOOT_I18N_TYPE) || 'default'\r\n        : undefined;\r\n","/**\r\n * 检查当前项目是否开启多语言支持\r\n * @returns {Boolean}\r\n */\r\nconst isI18nEnabled = () => {\r\n    if (!process.env.KOOT_I18N || !JSON.parse(process.env.KOOT_I18N))\r\n        return false;\r\n    return true;\r\n};\r\nmodule.exports = isI18nEnabled;\r\n","const getLocalesConfig = require('./get-locales-config')\r\n\r\nlet result\r\n\r\n/**\r\n * 获取 i18n 语种列表\r\n * @returns {Array}\r\n */\r\nmodule.exports = (() => {\r\n    if (!Array.isArray(result)) {\r\n        result = getLocalesConfig()\r\n        result = result.map(l => l[0])\r\n\r\n        if (!result.length)\r\n            result = ['']\r\n    }\r\n\r\n    return result\r\n})()\r\n","/* global __KOOT_SSR__:false, __KOOT_SSR_STATE__:false */\r\nconst __devLocales = {};\r\n\r\n/**\r\n * 根据当前环境，返回语言包对象的引用\r\n * - 客户端: 当前语种的语言包对象 (仅当多语言类型为 `store` 时)\r\n * - 服务器端: 所有语种语言包合集对象\r\n * @returns {Object}\r\n */\r\nconst getLocalesObject = () => {\r\n    if (__SERVER__) {\r\n        if (__DEV__) {\r\n            return __devLocales;\r\n        } else if (typeof __KOOT_SSR__ === 'object')\r\n            return __KOOT_SSR__.locales;\r\n    }\r\n    if (__CLIENT__) {\r\n        if (typeof __KOOT_SSR_STATE__ === 'object') {\r\n            return __KOOT_SSR_STATE__.locales;\r\n        }\r\n    }\r\n    return false;\r\n};\r\n\r\n/**\r\n * @type {Object}\r\n * 语言包对象\r\n * - 客户端: 当前语种的语言包对象 (仅当多语言类型为 `store` 时)\r\n * - 服务器端: 所有语种语言包合集对象\r\n */\r\nexport let locales = (() => getLocalesObject() || {})();\r\n\r\nexport const setLocales = (newLocales = {}) => {\r\n    // const obj = getLocalesObject()\r\n    if (locales) Object.assign(locales, newLocales);\r\n    else locales = newLocales;\r\n    return locales;\r\n};\r\n\r\nexport default locales;\r\n","/**\r\n * 根据输入的语言列表字符串，返回语言列表array\r\n *\r\n * @param {string} langList 语言列表字符串，eg: zh-CN,zh;q=0.8,en;q=0.6\r\n *\r\n * @returns {array} 语言列表\r\n */\r\nmodule.exports = langList =>\r\n    langList.split(',').map(value => value.split(';')[0]);\r\n","const parseLanguageList = require('./parse-language-list');\r\nconst availableLocaleIds = require('./locale-ids');\r\n\r\n/**\r\n * 根据输入返回项目匹配的语言包ID (localeId)\r\n * 如果没有匹配，返回项目语言包ID的第一项\r\n * 注：仅为返回，没有赋值操作\r\n *\r\n * @param {string|string[]} input\r\n * @param {string[]} [localeIds] 可选语言ID列表\r\n * @returns 匹配的语言包ID localeId 或 availableLocaleIds[0]\r\n */\r\nconst parseLocaleId = (input, localeIds = availableLocaleIds) => {\r\n    // 检查是否包含分号，如果是，按语言列表处理为array\r\n    // eg: zh-CN,zh;q=0.8,en;q=0.6\r\n    if (typeof input === 'string' && input.indexOf(';') > -1)\r\n        input = parseLanguageList(input);\r\n\r\n    // 检查是否为array\r\n    if (Array.isArray(input)) {\r\n        let id;\r\n\r\n        input.some(thisId => {\r\n            id = checkItem(thisId, localeIds);\r\n            return id;\r\n        });\r\n\r\n        return id || localeIds[0];\r\n    } else if (!input && typeof navigator !== 'undefined')\r\n        return parseLocaleId(\r\n            navigator.languages ||\r\n                navigator.language ||\r\n                navigator.browserLanguage ||\r\n                navigator.systemLanguage ||\r\n                navigator.userLanguage ||\r\n                localeIds[0],\r\n            localeIds\r\n        );\r\n    else if (input) return checkItem(input, localeIds) || localeIds[0];\r\n\r\n    return localeIds[0];\r\n};\r\n\r\nmodule.exports = parseLocaleId;\r\n\r\n// ============================================================================\r\n\r\n/**\r\n * 标准化语言包ID，方便匹配\r\n * - 全部小写\r\n * - `_` 变为 `-`\r\n * @param {string} input\r\n * @returns {string}\r\n */\r\nconst normalize = localeId => localeId.toLowerCase().replace(/_/g, '-');\r\n\r\n/**\r\n * 获取基础语种\r\n * @param {string} localeId\r\n * @param {string} [seperator='-'] 连接线，默认为 `-`\r\n * @returns {string}\r\n */\r\nconst getLocaleBase = (localeId, seperator = '-') =>\r\n    localeId.split(seperator)[0];\r\n\r\n/**\r\n * 检查单项，如果和availableLocales内的项目有匹配，返回匹配，否则返回null\r\n * @param {string} input 检查项\r\n * @param {string[]} [localeIds] 可选语言ID列表\r\n * @returns 匹配的 localeId 或 null\r\n */\r\nconst checkItem = (input, localeIds = availableLocaleIds) => {\r\n    const inputNormalized = normalize(input);\r\n    const localeIdsNormalized = localeIds.map(normalize);\r\n\r\n    let result;\r\n\r\n    // 如果有完整匹配的项，直接返回结果\r\n    localeIdsNormalized.some((thisLocaleId, index) => {\r\n        if (thisLocaleId === inputNormalized) {\r\n            result = localeIds[index];\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n    if (result) return result;\r\n\r\n    // 之后根据基础语种进行检查\r\n\r\n    /** 基础语种 (eg: `zh-CN` 基础语种为 `zh`) */\r\n    const baseLocale = getLocaleBase(inputNormalized, '-');\r\n\r\n    // 如果可选列表中有对应的基础语种，返回该结果\r\n    localeIdsNormalized.some((thisLocaleId, index) => {\r\n        if (thisLocaleId === baseLocale) {\r\n            result = localeIds[index];\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n    if (result) return result;\r\n\r\n    // 检查可选列表中每一项的基础语种，返回第一个匹配\r\n    localeIdsNormalized.some((thisLocaleId, index) => {\r\n        const thisBaseLocale = getLocaleBase(thisLocaleId, '-');\r\n        if (thisBaseLocale === baseLocale) {\r\n            result = localeIds[index];\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n    if (result) return result;\r\n\r\n    return null;\r\n};\r\n","/* eslint-disable no-eval */\r\nconst fs = require('fs-extra');\r\nconst path = require('path');\r\n\r\nconst getCwd = require('../utils/get-cwd');\r\n\r\nmodule.exports = pathname => {\r\n    // if (process.env.WEBPACK_BUILD_STAGE === 'client') return {};\r\n\r\n    const file = path.isAbsolute(pathname)\r\n        ? pathname\r\n        : path.resolve(getCwd(), pathname);\r\n    // console.log({\r\n    //     pathname,\r\n    //     file,\r\n    //     extname: path.extname(file),\r\n    //     exists: fs.existsSync(file)\r\n    // });\r\n    return path.extname(file) === '.json'\r\n        ? fs.readJsonSync(file)\r\n        : eval(`require(\"${file.replace(/\\\\/g, '\\\\\\\\')}\")`);\r\n};\r\n","import parseLanguageList from '../parse-language-list'\r\nimport getLanguagelistFromState from '../get-language-list-from-state'\r\nimport parseLocaleId from '../parse-locale-id'\r\n\r\n// import locales from '../locales'\r\nimport { I18N_INIT/*, I18N_SET_LOCALES*/ } from '../action-types'\r\n\r\n/**\r\n * Redux reducer: 初始化 localeId\r\n * \r\n * @param {*} state \r\n * @param {*} action\r\n * \r\n * @returns {*} state\r\n */\r\nexport const reducerLocaleId = (state = null, action) => {\r\n    switch (action.type) {\r\n        case I18N_INIT:\r\n            return action.localeId\r\n    }\r\n    return state\r\n}\r\n\r\n\r\n// /**\r\n//  * Redux reducer: 初始化 locales\r\n//  * \r\n//  * @param {*} state \r\n//  * @param {*} action\r\n//  * \r\n//  * @returns {*} state\r\n//  */\r\n// export const reducerLocales = (state = {}, action) => {\r\n//     switch (action.type) {\r\n//         case I18N_SET_LOCALES:\r\n//             return Object.assign({}, state, action.locales)\r\n//     }\r\n//     return state\r\n// }\r\n\r\n/**\r\n * Redux action: 初始化\r\n * \r\n * @param {Object} state \r\n * @returns {Object}\r\n */\r\nexport const actionInit = (state) => {\r\n    // setLocaleId(localeId)\r\n\r\n    const localeId = __SERVER__\r\n        ? init(parseLanguageList(\r\n            (typeof state === 'object') ? getLanguagelistFromState(state) : state\r\n        ), state.localeId)\r\n        : state.localeId\r\n\r\n    // setLocaleId(localeId)\r\n\r\n    return {\r\n        type: I18N_INIT,\r\n        localeId: '' + localeId\r\n    }\r\n}\r\n\r\n// /**\r\n//  * Redux action: 设置语言包内容对象\r\n//  * \r\n//  * @returns {Object}\r\n//  */\r\n// export const actionLocales = (state) => {\r\n//     return {\r\n//         type: I18N_SET_LOCALES,\r\n//         locales: locales[state.localeId]\r\n//     }\r\n// }\r\n\r\n/**\r\n * 服务器环境：根据语言列表，初始化i18n，获得并赋值 localeId\r\n * \r\n * @param {array|string} langList 语言列表\r\n * \r\n * @returns (如果已初始化)locales[localeId]\r\n */\r\nconst init = (langList = [], localeId) => {\r\n    if (__SERVER__) {\r\n        // console.log(locales[localeId])\r\n        if (typeof langList === 'string')\r\n            if (langList.indexOf(';') > -1)\r\n                langList = parseLanguageList(langList)\r\n            else\r\n                return init([langList], localeId)\r\n\r\n        const parsed = parseLocaleId(langList)\r\n        // if (parsed) setLocaleId(parsed)\r\n        // else setLocaleId(localeId)\r\n\r\n        if (parsed) return parsed\r\n        return localeId\r\n\r\n        // if (locales[localeId]) return locales[localeId]\r\n    }\r\n}\r\n","// import cookie from 'cookie'\nimport { changeLocaleQueryKey } from '../../defaults/defines';\nimport availableLocaleIds from '../locale-ids';\nimport parseLocaleId from '../parse-locale-id';\nimport setCookie from '../set-cookie';\nimport isI18nEnabled from '../is-enabled';\n\n/**\n * 根据 KOA Context 获取语种ID\n * @param {Object} ctx KOA Context\n * @returns {String} 匹配到的或当前项目默认语种ID\n */\nconst getLangFromCtx = (ctx) => {\n    if (!isI18nEnabled()) return '';\n\n    // const localeIds = getLocaleIds()\n\n    // 根据项目设置，从 URL 中抽取语种 ID\n    if (process.env.KOOT_I18N_URL_USE === 'router') {\n        let pathname = ctx.path;\n        if (pathname.substr(0, 1) === '/') pathname = pathname.substr(1);\n        pathname = pathname.split('/');\n        if (availableLocaleIds.includes(pathname[0])) return pathname[0];\n    } else if (process.env.KOOT_I18N_URL_USE === 'subdomain') {\n        const domainSplit = ctx.hostname.split('.');\n        if (availableLocaleIds.includes(domainSplit[0])) return domainSplit[0];\n        return availableLocaleIds[0];\n    } else {\n        if (ctx.query[changeLocaleQueryKey]) {\n            if (availableLocaleIds.includes(ctx.query[changeLocaleQueryKey]))\n                return ctx.query[changeLocaleQueryKey];\n            ctx.redirect(\n                ctx.url\n                    .replace(\n                        new RegExp(`(\\\\?|&)${changeLocaleQueryKey}=(.+)$`),\n                        ''\n                    )\n                    .replace(\n                        new RegExp(`(\\\\?|&)${changeLocaleQueryKey}=(.+)&`),\n                        ''\n                    )\n            );\n            return availableLocaleIds[0];\n        }\n    }\n\n    // 如果上一步没有结果，从 COOKIE 中获取\n    // const cookies = cookie.parse(ctx.request.header.cookie || '')\n    // if (cookies[process.env.KOOT_I18N_COOKIE_KEY] && cookies[process.env.KOOT_I18N_COOKIE_KEY] !== 'null')\n    //     return cookies[process.env.KOOT_I18N_COOKIE_KEY]\n    const cookieValue = ctx.cookies.get(process.env.KOOT_I18N_COOKIE_KEY);\n    if (cookieValue && availableLocaleIds.includes(cookieValue)) {\n        return cookieValue;\n    }\n\n    // console.log('ctx.cookies.get(process.env.KOOT_I18N_COOKIE_KEY)', cookieValue)\n    // 如果上一步没有结果，从请求 headers 中获取\n    if (ctx.header['accept-language']) {\n        // const acceptLanguage = ctx.header['accept-language']\n        // const acceptLanguages = acceptLanguage.split(',').map(str => str.split(';')[0])\n        // console.log('acceptLanguage', acceptLanguage)\n        // console.log('acceptLanguages', acceptLanguages)\n        // console.log('parsed locale id', parseLocaleId(acceptLanguage))\n        const localeId = parseLocaleId(ctx.header['accept-language']);\n        if (localeId) return setLocale(localeId, ctx);\n    }\n\n    // 如果上一步没有结果，返回项目默认语种\n    return setLocale(availableLocaleIds[0], ctx);\n};\n\nexport default getLangFromCtx;\n\n/**\n * 服务器环境: 设置 cookie\n * @param {*} localeId\n */\nconst setLocale = (localeId, ctx) => {\n    setCookie(localeId, ctx);\n    return localeId;\n};\n","/**\r\n * 设置 cookie\r\n * @param {String} localeId\r\n * @param {Object} ctx Koa context\r\n */\r\nmodule.exports = (localeId, ctx) => {\r\n\r\n    const maxDate = 365\r\n    const options = {}\r\n    if (typeof process.env.KOOT_I18N_COOKIE_DOMAIN === 'string' &&\r\n        process.env.KOOT_I18N_COOKIE_DOMAIN) {\r\n        options.domain = process.env.KOOT_I18N_COOKIE_DOMAIN\r\n    }\r\n\r\n    if (__CLIENT__) {\r\n        if (localeId && typeof document !== 'undefined' && typeof document.cookie !== 'undefined') {\r\n            require('js-cookie').set(\r\n                process.env.KOOT_I18N_COOKIE_KEY,\r\n                localeId,\r\n                {\r\n                    expires: maxDate,\r\n                    ...options\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n    if (__SERVER__) {\r\n        // TODO: set cookie on server\r\n        // console.log('ctx.host', ctx.host)\r\n        // console.log('ctx.hostname', ctx.hostname)\r\n        // console.log(process.env.KOOT_I18N_COOKIE_KEY, localeId, { domain: ctx.hostname, ...options })\r\n        // ctx.cookies.set(process.env.KOOT_I18N_COOKIE_KEY, localeId, {\r\n        //     domain: ctx.hostname,\r\n        //     maxAge: maxDate * 24 * 60 * 60 * 1000,\r\n        //     signed: false,\r\n        //     ...options\r\n        // })\r\n    }\r\n}\r\n","/* global\r\n    __KOOT_SSR__: false,\r\n    __KOOT_STORE__: false,\r\n    __KOOT_HISTORY__: false,\r\n    __KOOT_LOCALEID__: false,\r\n    __KOOT_CTX__: false,\r\n*/\r\n\r\nimport isRenderSafe from './React/is-render-safe';\r\n\r\n// ============================================================================\r\n\r\n/**\r\n * 手动创建 Redux Store 时需要的相关对象\r\n * @type {Object}\r\n */\r\nimport * as _reduxForCreateStore from './React/redux';\r\n\r\nconst { createStore, ...reduxForCreateStore } = _reduxForCreateStore;\r\nexport { createStore, reduxForCreateStore };\r\n\r\n/**\r\n * 通用的高阶组件/方法的装饰器\r\n * @type {Function}\r\n */\r\nexport { default as extend } from '__KOOT_HOC_EXTEND__';\r\n\r\n// ============================================================================\r\n\r\nexport const getLocaleId = () => {\r\n    if (__CLIENT__) return window.__KOOT_LOCALEID__ || '';\r\n    if (__SERVER__) {\r\n        if (__DEV__) return global.__KOOT_LOCALEID__;\r\n        if (typeof __KOOT_LOCALEID__ === 'undefined') return '';\r\n        return __KOOT_LOCALEID__ || '';\r\n    }\r\n};\r\nexport const resetLocaleId = () => (localeId = getLocaleId());\r\nexport let localeId = (() => getLocaleId())();\r\n\r\n// ============================================================================\r\n\r\nexport const getStore = () => {\r\n    if (__CLIENT__) return window.__KOOT_STORE__;\r\n    if (__SERVER__) {\r\n        if (__DEV__) return global.__KOOT_STORE__;\r\n        if (typeof __KOOT_STORE__ === 'undefined') return '';\r\n        return __KOOT_STORE__;\r\n    }\r\n};\r\nexport const resetStore = () => (store = getStore());\r\nexport let store = (() => getStore())();\r\n\r\n// ============================================================================\r\n\r\nexport const getHistory = () => {\r\n    if (__CLIENT__) return window.__KOOT_HISTORY__;\r\n    if (__SERVER__) {\r\n        if (__DEV__) return global.__KOOT_HISTORY__;\r\n        if (typeof __KOOT_HISTORY__ === 'undefined') return '';\r\n        return __KOOT_HISTORY__;\r\n    }\r\n};\r\nexport const resetHistory = () => (history = getHistory());\r\nexport let history = (() => getHistory())();\r\n\r\n// ============================================================================\r\n\r\nexport const getCache = localeId => {\r\n    if (!isRenderSafe()) return {};\r\n    if (__CLIENT__) {\r\n        if (typeof window.__KOOT_CACHE__ !== 'object')\r\n            window.__KOOT_CACHE__ = {};\r\n        return window.__KOOT_CACHE__;\r\n    }\r\n    if (__SERVER__) {\r\n        const SSR = __DEV__ ? global.__KOOT_SSR__ : __KOOT_SSR__;\r\n        const cache = SSR.globalCache;\r\n        if (!cache) return {};\r\n        if (localeId === true) return cache.get(getLocaleId());\r\n        if (localeId) return cache.get(localeId) || {};\r\n        return cache.get('__');\r\n    }\r\n};\r\n\r\n// ============================================================================\r\n\r\nexport const getCtx = () => {\r\n    if (__CLIENT__) return undefined;\r\n    if (__DEV__) return global.__KOOT_CTX__;\r\n    if (typeof __KOOT_CTX__ === 'undefined') return undefined;\r\n    return __KOOT_CTX__;\r\n};\r\n\r\n// ============================================================================\r\n\r\nif (__DEV__) {\r\n    global.__KOOT_SSR_SET__ = v => {\r\n        global.__KOOT_SSR__ = v;\r\n    };\r\n    global.__KOOT_SSR_SET_LOCALEID__ = v => {\r\n        global.__KOOT_LOCALEID__ = v;\r\n        localeId = v;\r\n    };\r\n    global.__KOOT_SSR_SET_STORE__ = v => {\r\n        global.__KOOT_STORE__ = v;\r\n        store = v;\r\n    };\r\n    global.__KOOT_SSR_SET_HISTORY__ = v => {\r\n        global.__KOOT_HISTORY__ = v;\r\n        history = v;\r\n    };\r\n    global.__KOOT_SSR_SET_CTX__ = v => {\r\n        global.__KOOT_CTX__ = v;\r\n    };\r\n    // if (__CLIENT__) {\r\n    //     window.__DEV_KOOT_GET_STYLES__ = getStyles;\r\n    // }\r\n}\r\n","const Koa = require('koa');\r\nconst helmet = require('koa-helmet');\r\n\r\nconst removeSlashes = require('./koa-middlewares/remove-slashes');\r\n\r\n/**\r\n * 创建 Koa App\r\n * @returns {Object} app\r\n */\r\nconst create = () => {\r\n    const app = new Koa();\r\n    app.use(helmet());\r\n    app.use(removeSlashes);\r\n\r\n    return app;\r\n};\r\n\r\nmodule.exports = create;\r\n","/**\r\n * 生成错误信息\r\n * @param {String} msg\r\n * @returns {String}\r\n */\r\nconst errorMsg = (type, msg) => {\r\n    if (typeof type === 'string' && typeof msg === 'string')\r\n        return `${type}::${msg}`\r\n    return type\r\n}\r\n\r\nmodule.exports = errorMsg\r\n","const itemsBlacklist = ['localeId', 'realtimeLocation', 'routing', 'server'];\r\n\r\n/**\r\n * 过滤 state，将黑名单内的项目删除，并返回过滤后的 state\r\n *\r\n * 黑名单中包括：\r\n * - `localeId`\r\n * - `realtimeLocation`\r\n * - `routing`\r\n * - `server`\r\n *\r\n * @param {Object} state\r\n * @returns {Object}\r\n */\r\nconst filter = oldState =>\r\n    itemsBlacklist.reduce((state, item) => {\r\n        const { [item]: _, ...rest } = state;\r\n        return rest;\r\n    }, oldState);\r\n\r\nmodule.exports = filter;\r\n","const path = require('path');\nconst glob = require('glob');\n\nconst getDirDevDll = require('./get-dir-dev-dll');\n\n/**\n * @typedef {Object} RouteMap\n * @property {string} file - 硬盘路径\n * @property {string} route - 访问路由/pathname\n */\n\n/**\n * _仅针对开发环境_ 获取静态文件路由，这些文件通常临时生成并保存在硬盘中\n * @return {RouteMap[]}\n */\nmodule.exports = () => {\n    if (process.env.WEBPACK_BUILD_ENV !== 'dev') return [];\n\n    const dirDevDll = getDirDevDll();\n\n    return glob\n        .sync(path.resolve(dirDevDll, '**/*'), {\n            dot: true,\n        })\n        .map((file) => {\n            let route = path.relative(dirDevDll, file);\n            if (route.substr(0, 1) !== '/') route = '/' + route;\n            return {\n                file,\n                route,\n            };\n        });\n};\n","const path = require('path')\r\nconst getDirDevTmp = require('./get-dir-dev-tmp')\r\n\r\n/**\r\n * _仅针对开发环境_ 获取 DLL 文件存放路径\r\n * @param {String} cwd\r\n * @param {String} [stage]\r\n * @returns {String}\r\n */\r\nmodule.exports = (cwd, stage = process.env.WEBPACK_BUILD_STAGE) =>\r\n    path.resolve(getDirDevTmp(cwd), 'dll', stage)\r\n","const path = require('path')\r\nconst getCwd = require('../utils/get-cwd')\r\n\r\n/**\r\n * _仅针对开发环境_ 获取开发环境临时目录\r\n * @param {String} [cwd]\r\n * @param {String} [type]\r\n * @returns {String} 如果提供 `type`，则返回对应类型的目录\r\n */\r\nmodule.exports = (cwd = getCwd(), type = \"\") => path.resolve(\r\n    cwd, 'logs/dev', type ? `.${type}` : ''\r\n)\r\n","/**\r\n * 获取客户端打包结果 public 目录名\r\n * @returns {String}\r\n */\r\nmodule.exports = () => process.env.WEBPACK_BUILD_TYPE === 'spa' ? '' : `public`\r\n","const path = require('path');\r\n\r\nconst getDirDistPublicFoldername = require('./get-dir-dist-public-foldername');\r\n\r\n/**\r\n * 获取打包结果基础目录\r\n * 最终的打包目录是该目录下的 includes (默认情况)\r\n * @param {String} dist 打包结果目录\r\n * @returns {String}\r\n */\r\nmodule.exports = dist => {\r\n    if (!result) {\r\n        result = path.resolve(dist, getDirDistPublicFoldername());\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\nlet result;\r\n","const portfinder = require('portfinder')\r\n\r\n/**\r\n * 获取可用端口\r\n * @async\r\n * @param {Number|Number[]|Object} 正在使用、被占用或保留的端口\r\n * @returns {Number}\r\n */\r\nmodule.exports = async (portUsed) => {\r\n\r\n    const portStart = 3000\r\n    const portEnd = 65535\r\n\r\n    /** @type {Array[]} 使用 portfinder 检查的端口号范围组 */\r\n    const ranges = [\r\n        [portStart, portEnd]\r\n    ]\r\n\r\n    // console.log('portUsed', portUsed)\r\n\r\n    /** @type {Number[]} 忽略的端口号 */\r\n    const portsIgnore = []\r\n    if (isNumber(portUsed)) {\r\n        portsIgnore.push(parseInt(portUsed))\r\n    } else if (Array.isArray(portUsed)) {\r\n        portUsed.filter(value => isNumber(value))\r\n            .forEach(port => portsIgnore.push(parseInt(port)))\r\n    } else if (typeof portUsed === 'object') {\r\n        Object.values(portUsed)\r\n            .filter(value => isNumber(value))\r\n            .forEach(port => portsIgnore.push(parseInt(port)))\r\n    }\r\n\r\n    // console.log('portsIgnore', portsIgnore)\r\n\r\n    // 如果存在忽略的端口号，修改 ranges 为多组模式\r\n    if (portsIgnore.length) {\r\n        ranges.shift()\r\n        let lastPort = portStart\r\n        portsIgnore.forEach(port => {\r\n            ranges.push([lastPort, port - 1])\r\n            lastPort = port\r\n        })\r\n    }\r\n\r\n    // console.log('ranges', ranges)\r\n\r\n    for (let [start, end] of ranges) {\r\n        const result = await getFreePort(start, end)\r\n        // console.log(result)\r\n        if (result)\r\n            return result\r\n    }\r\n}\r\n\r\nconst isNumber = (value) => Boolean(\r\n    typeof value === 'number' ||\r\n    !isNaN(value)\r\n)\r\n\r\n/**\r\n * 获取范围内可用的端口\r\n * @param {Number} start \r\n * @param {Number} end \r\n * @returns {Number}\r\n */\r\nconst getFreePort = async (start, end) =>\r\n    portfinder.getPortPromise({\r\n        port: start,    // minimum port\r\n        stopPort: end   // maximum port\r\n    })\r\n        .then((port) => {\r\n            //\r\n            // `port` is guaranteed to be a free port\r\n            // in this scope.\r\n            //\r\n            return port\r\n        })\r\n        .catch((/*err*/) => {\r\n            //\r\n            // Could not get a free port, `err` contains the reason.\r\n            //\r\n        })\r\n","const chalk = require('chalk')\r\n\r\n/**\r\n * 生成 log 消息内容\r\n * @variation 只提供内容\r\n * @param {String} content 内容\r\n *//**\r\n* 生成 log 消息内容\r\n* @variation 提供标记和内容\r\n* @param {String|Boolean} [mark=\"\"] 标记\r\n* @param {String} content 内容\r\n*//**\r\n * 生成 log 消息内容\r\n* @variation 提供标记、类型和内容\r\n* @param {String|Boolean} [mark=\"\"] 标记\r\n* @param {String} [type=\"\"] 操作类型\r\n* @param {String} content 内容\r\n*/\r\nconst generateLogMsg = (mark, type, content) => {\r\n    if (typeof mark !== 'undefined' && typeof type === 'undefined' && typeof content === 'undefined')\r\n        return generateLogMsg('', '', mark)\r\n    if (typeof type !== 'undefined' && typeof content === 'undefined')\r\n        return generateLogMsg(mark, '', type)\r\n\r\n    let markColor = 'cyan'\r\n    if (mark === false) mark = ''\r\n    switch (mark.toLowerCase()) {\r\n        case '×':\r\n        case 'x':\r\n        case 'x ':\r\n        case 'error': {\r\n            mark = '× '\r\n            markColor = 'redBright'\r\n            break\r\n        }\r\n        case 'success': {\r\n            mark = '√ '\r\n            markColor = 'green'\r\n            break\r\n        }\r\n        case 'cb':\r\n        case 'callback': {\r\n            mark = '⚑ '\r\n            markColor = 'cyan'\r\n            break\r\n        }\r\n        case 'warning': {\r\n            mark = '! '\r\n            markColor = 'yellowBright'\r\n            break\r\n        }\r\n        case '': {\r\n            break\r\n        }\r\n        default: {\r\n            mark = '  '\r\n        }\r\n    }\r\n\r\n    const typeColor = (() => {\r\n        switch (type) {\r\n            default: return 'yellowBright'\r\n        }\r\n    })()\r\n\r\n    return (mark === '' ? '' : chalk[markColor](mark))\r\n        + chalk[typeColor](`[koot${type ? `/${type}` : ''}] `)\r\n        + content\r\n}\r\n\r\nmodule.exports = generateLogMsg\r\n","/**\r\n * KOA 中间件: 移除 URL 起始部分的多余斜线\r\n * @param {Object} koaStaticConfig\r\n * @return {Function}\r\n */\r\nconst removeSlashesMiddleware = async (ctx, next) => {\r\n    if (/^\\/{2}/.test(ctx.url)) {\r\n        return ctx.redirect(ctx.origin + ctx.url.replace(/^\\/{2}/, '/'));\r\n    }\r\n    await next();\r\n};\r\n\r\nmodule.exports = removeSlashesMiddleware;\r\n","/* eslint-disable no-console */\r\n/**\r\n * 命令行 Log\r\n * @variation 1\r\n * @param {String} content 内容\r\n */ /**\r\n * 命令行 Log\r\n * @variation 2\r\n * @param {String} [type=\"\"] 操作类型\r\n * @param {String} content 内容\r\n */ /**\r\n * 命令行 Log\r\n * @variation 3\r\n * @param {String} [mark=\"\"] 标记\r\n * @param {String} [type=\"\"] 操作类型\r\n * @param {String} content 内容\r\n */\r\nmodule.exports = (...args) => {\r\n    console.log(require('./get-log-msg')(...args));\r\n};\r\n","const fs = require('fs-extra');\r\nconst isPortReachable = require('is-port-reachable');\r\nconst inquirer = require('inquirer');\r\n// const osLocale = require('os-locale')\r\n\r\nconst getPathnameDevServerStart = require('../utils/get-pathname-dev-server-start');\r\nconst getFreePort = require('./get-free-port');\r\n\r\n/**\r\n * @async\r\n * @returns {Number|Boolean} 如果最终没有结果，返回 false，否则返回可用的端口数\r\n */\r\nconst doValidatePort = async () => {\r\n    // [开发环境] 如果 flag 文件中写有端口，直接使用该端口\r\n    if (__DEV__) {\r\n        let infos;\r\n        try {\r\n            infos = await fs.readJson(getPathnameDevServerStart());\r\n        } catch (e) {}\r\n        if (typeof infos === 'object') return infos.port;\r\n    }\r\n\r\n    // const locale = osLocale.sync()\r\n    // console.log('locale', locale)\r\n\r\n    // 如果环境变量中不存在 SERVER_PORT 同时全局变量 __SERVER_PORT__ 存在可用值，赋值环境变量\r\n    // __SERVER_PORT__ 为 webpack 打包时使用 definePlugin 替换入的全局变量值\r\n    if (\r\n        typeof process.env.SERVER_PORT === 'undefined' &&\r\n        typeof __SERVER_PORT__ !== 'undefined'\r\n    )\r\n        process.env.SERVER_PORT = __SERVER_PORT__;\r\n\r\n    /** @type {Boolean} 环境变量 SERVER_PORT 的端口号是否可用 */\r\n    const isPortInEnvFree = await isPortFree(process.env.SERVER_PORT);\r\n\r\n    // 如果可用，返回该端口号，结束\r\n    if (isPortInEnvFree) return process.env.SERVER_PORT;\r\n\r\n    // 如果不可用，输出日志\r\n    logPortTaken(process.env.SERVER_PORT);\r\n\r\n    // [开发环境] 修改 flag 文件，标记端口被占用，并结束\r\n    if (__DEV__) {\r\n        // 修改 flag 文件\r\n        await fs.writeFile(\r\n            getPathnameDevServerStart(),\r\n            `port ${process.env.SERVER_PORT} has been taken.`,\r\n            'utf-8'\r\n        );\r\n        // 跳出\r\n        return false;\r\n    }\r\n\r\n    /** @type {Boolean} 端口是否被占用 */\r\n    let isPortTaken = true;\r\n    /** @type {Number} 端口结果 */\r\n    let port;\r\n\r\n    while (isPortTaken) {\r\n        const askForPort = await inquirer.prompt([\r\n            {\r\n                type: 'input',\r\n                name: 'port',\r\n                message:\r\n                    'Please input a new port number (leave empty for cancel)',\r\n                validate: input => {\r\n                    if (!input) return true;\r\n                    if (isNaN(input)) return 'Must be a number or null';\r\n                    return true;\r\n                }\r\n            }\r\n        ]);\r\n        if (!askForPort.port) {\r\n            isPortTaken = false;\r\n            port = undefined;\r\n        } else {\r\n            port = await isPortFree(askForPort.port);\r\n            isPortTaken = !port ? true : false;\r\n            if (isPortTaken) logPortTaken(askForPort.port);\r\n        }\r\n    }\r\n\r\n    if (port) return port;\r\n    return false;\r\n};\r\n\r\n/**\r\n * 验证目标端口是否可用\r\n * @async\r\n * @param {Number|String} port\r\n * @returns {Number|Boolean} 如果端口可用，返回该端口；如果不可用，返回 false\r\n */\r\nconst isPortFree = async port => {\r\n    const isPortOpen = !(await isPortReachable(port));\r\n    if (isPortOpen) return port;\r\n    return false;\r\n};\r\n\r\n/**\r\n * log: 目标端口被占用\r\n * @param {Number|String} port\r\n */\r\nconst logPortTaken = port => {\r\n    console.log(\r\n        `\\x1b[31m×\\x1b[0m ` +\r\n            `\\x1b[93m[koot/server]\\x1b[0m port \\x1b[32m${port}\\x1b[0m has been taken.`\r\n    );\r\n};\r\n\r\n/**\r\n * 验证服务器启动端口\r\n *\r\n * 依次检查以下变量/常量，当发现可用值时进入下一步\r\n * - `__SERVER_PORT__`\r\n * - `process.env.SERVER_PORT`\r\n *\r\n * 检查设定好的端口号是否可用\r\n * - 如果可用，直接返回结果\r\n * - 如果不可用，提示下一步操作\r\n * - 如果不可用同时之后的操作取消，返回 false\r\n *\r\n * _生产环境_\r\n * 设定环境变量\r\n * - `SERVER_PORT` -> 指定的端口\r\n *\r\n * _开发环境_\r\n * 设定环境变量\r\n * - `SERVER_PORT` -> 随机端口\r\n * - `SERVER_PORT_DEV_MAIN` -> 指定的端口\r\n *\r\n * @async\r\n * @returns {Number|Boolean} 如果最终没有结果，返回 false，否则返回可用的端口数\r\n */\r\nconst validatePort = async () => {\r\n    const port = await doValidatePort();\r\n    if (!port) return false;\r\n    if (__DEV__) {\r\n        // 开发环境：在随机端口启用服务器\r\n        const portFree = await getFreePort(port);\r\n        process.env.SERVER_PORT = portFree;\r\n        process.env.SERVER_PORT_DEV_MAIN = port;\r\n    }\r\n    return port;\r\n};\r\n\r\n// export default validatePort;\r\nmodule.exports = validatePort;\r\n","const path = require('path');\r\nconst getDistPath = require('./get-dist-path');\r\nconst getDirDevTmp = require('../libs/get-dir-dev-tmp');\r\nconst { buildManifestFilename } = require('../defaults/before-build');\r\n\r\n/**\r\n * 获取打包文件对应表 (chunkmap) 的文件路径\r\n * @param {string} [dist] 打包结果目录，默认为项目指定的路径\r\n * @returns {string}\r\n */\r\nmodule.exports = (dist = getDistPath()) => {\r\n    if (process.env.WEBPACK_BUILD_ENV === 'dev')\r\n        return path.resolve(getDirDevTmp(), buildManifestFilename);\r\n    return path.resolve(dist, buildManifestFilename);\r\n};\r\n","const fs = require('fs-extra');\r\n\r\nconst getIsI18nEnabled = require('../i18n/is-enabled');\r\nconst getI18nType = require('../i18n/get-type');\r\nconst getChunkmapPath = require('./get-chunkmap-path');\r\nconst getDistPath = require('./get-dist-path');\r\n\r\nlet cachedChunkmap;\r\n\r\n/**\r\n * 获取打包文件对应表 (chunkmap)\r\n *\r\n * @param {String} [localeId] 当前语言，默认为当前语言 (i18n开启时) 或未指定 (i18n未开启时)\r\n * @param {Boolean} [getFullResult = false] 仅 i18n 开启时：获取 chunkmap 全文，而非当前语言的片段\r\n * @param {Boolean} [ignoreCache = false] 忽略结果缓存，强制重新获取对照表\r\n * @returns {Object}\r\n */\r\nconst getChunkmap = (localeId, getFullResult = false, ignoreCache = false) => {\r\n    if (localeId === true) return getChunkmap(getFullResult || undefined, true);\r\n\r\n    const isI18nEnabled = getIsI18nEnabled();\r\n\r\n    if (isI18nEnabled && typeof localeId === 'undefined') {\r\n        try {\r\n            localeId = require('../index').localeId;\r\n        } catch (e) {}\r\n    }\r\n\r\n    const i18nType = getI18nType();\r\n    const isI18nDefault = isI18nEnabled && i18nType === 'default';\r\n\r\n    const chunkmap = (() => {\r\n        if (!ignoreCache && cachedChunkmap) return cachedChunkmap;\r\n\r\n        let chunkmap;\r\n\r\n        if (typeof global.chunkmap === 'object') chunkmap = global.chunkmap;\r\n        try {\r\n            chunkmap = JSON.parse(process.env.WEBPACK_CHUNKMAP);\r\n        } catch (e) {\r\n            chunkmap = false;\r\n        }\r\n        if (typeof chunkmap !== 'object' && typeof getDistPath() === 'string') {\r\n            chunkmap = fs.readJsonSync(getChunkmapPath());\r\n            if (process.env.WEBPACK_BUILD_STAGE === 'server')\r\n                global.chunkmap = chunkmap;\r\n        }\r\n\r\n        if (process.env.WEBPACK_BUILD_ENV === 'prod') cachedChunkmap = chunkmap;\r\n\r\n        return chunkmap;\r\n    })();\r\n\r\n    if (typeof chunkmap === 'object') {\r\n        // let chunkmap = fs.readJsonSync(pathChunckmap)\r\n        if (getFullResult) return chunkmap || {};\r\n        if (isI18nEnabled && isI18nDefault)\r\n            return chunkmap[`.${localeId}`] || {};\r\n    }\r\n\r\n    return chunkmap || {};\r\n};\r\n\r\nmodule.exports = getChunkmap;\r\n","/* global\r\n    __KOOT_LOCALEID__: false,\r\n*/\r\n\r\nconst fs = require('fs-extra');\r\nconst path = require('path');\r\n\r\nconst getI18nType = require('../i18n/get-type');\r\nconst getPublicPath = require('./get-public-dir');\r\nconst getChunkmap = require('./get-chunkmap');\r\n\r\n/**\r\n * 获指定文件在客户端/取浏览器端中的可访问路径\r\n * @param {String} filename 要查找的文件的文件名。根据打包文件对应表 (chunkmap) 查询文件名和实际打包结果文件的对应关系\r\n * @param {String} [localeId] 当前语言\r\n * @param {Boolean} [isPathname = false] 如果标记为 true，表示提供的 filename 为确切的访问地址，无需查询对照表，直接返回结果\r\n * @param {Boolean} [isSSRReading = false] 如果标记为 true，表示用于 SSR 时读取文件，会对 publicPath 进行特殊处理\r\n * @returns {String|String[]} 浏览器环境中的访问路径、空字符串或包含所有可能结果的 Array\r\n */\r\nconst getFilePath = (\r\n    filename,\r\n    localeId,\r\n    isPathname = false,\r\n    isSSRReading = false\r\n) => {\r\n    // 如果第一个参数为 true，表示完全信任，不进行 chunkmap 对照查询，直接进行处理并返回结果\r\n    if (filename === true)\r\n        return getFilePath(\r\n            localeId,\r\n            isPathname || undefined,\r\n            true,\r\n            isSSRReading\r\n        );\r\n\r\n    if (typeof localeId === 'undefined') {\r\n        try {\r\n            if (\r\n                typeof __KOOT_SPA_TEMPLATE_INJECT__ === 'boolean' &&\r\n                __KOOT_SPA_TEMPLATE_INJECT__\r\n            ) {\r\n                localeId = __KOOT_LOCALEID__ || undefined;\r\n            } else {\r\n                localeId = require('../index').localeId;\r\n            }\r\n        } catch (e) {\r\n            // console.error(e);\r\n        }\r\n    }\r\n\r\n    const pathPublic = getPublicPath(isSSRReading);\r\n\r\n    const i18nType = getI18nType();\r\n    const isI18nDefault = i18nType === 'default';\r\n    const isDev =\r\n        process.env.WEBPACK_BUILD_ENV === 'dev' ||\r\n        (typeof __DEV__ !== 'undefined' && __DEV__);\r\n    // const localeId = 'zh'\r\n\r\n    // 如果标记为 pathname，直接返回结果\r\n    if (isPathname)\r\n        return pathPublic + filename.replace(/(^\\.\\/|^)public\\//, '');\r\n\r\n    const chunkmap = getChunkmap(localeId);\r\n    const regPublicPath = chunkmap['.public']\r\n        ? new RegExp(`(^\\\\.\\\\/|^)${chunkmap['.public']}`)\r\n        : /(^\\.\\/|^)public\\//;\r\n\r\n    /**************************************************************************\r\n     *   ┌─┐┌─┐┌┬┐┌┬┐┌─┐┌┐┌  ┌─┐┬ ┬┌┐┌┌─┐┌┬┐┬┌─┐┌┐┌┌─┐\r\n     *  │  │ ││││││││ ││││  ├┤ │ │││││   │ ││ ││││└─┐\r\n     * └─┘└─┘┴ ┴┴ ┴└─┘┘└┘  └  └─┘┘└┘└─┘ ┴ ┴└─┘┘└┘└─┘\r\n     *************************************************************************/\r\n\r\n    /**\r\n     * 返回可供客户端/浏览器端使用的访问地址\r\n     * @param {String} pathname\r\n     * @returns {String}\r\n     */\r\n    const getResultPathname = pathname =>\r\n        pathPublic + pathname.replace(regPublicPath, '');\r\n\r\n    /**************************************************************************\r\n     *   ┌┬┐┌─┐┌┐ ┬ ┬┌─┐\r\n     *   ││├┤ ├┴┐│ ││ ┬\r\n     * ─┴┘└─┘└─┘└─┘└─┘\r\n     *************************************************************************/\r\n\r\n    // console.log('----------')\r\n    // console.log(filename)\r\n    // console.log(chunkmap)\r\n    // console.log(chunkmap['.files'])\r\n    // console.log(chunkmap['.files'][filename])\r\n    // console.log(regPublicPath)\r\n    // console.log(pathPublic + chunkmap['.files'][filename].replace(regPublicPath, ''))\r\n    // console.log({\r\n    //     regPublicPath,\r\n    // })\r\n    // console.log('----------')\r\n\r\n    /**************************************************************************\r\n     *   ┌─┐┬ ┬┌─┐┌─┐┬┌─   ┬   ┬─┐┌─┐┌┬┐┬─┐┬ ┬┌┐┌┌─┐\r\n     *  │  ├─┤├┤ │  ├┴┐  ┌┼─  ├┬┘├┤  │ ├┬┘│ ││││└─┐\r\n     * └─┘┴ ┴└─┘└─┘┴ ┴  └┘   ┴└─└─┘ ┴ ┴└─└─┘┘└┘└─┘\r\n     *************************************************************************/\r\n\r\n    // 检查 `.files` 下是否有该文件名的直接对应\r\n    // 如果有，直接返回该结果\r\n    if (\r\n        typeof chunkmap === 'object' &&\r\n        typeof chunkmap['.files'] === 'object' &&\r\n        typeof chunkmap['.files'][filename] === 'string'\r\n    ) {\r\n        return getResultPathname(chunkmap['.files'][filename]);\r\n    }\r\n    if (isDev) {\r\n        const prefix = pathPublic + (isI18nDefault ? localeId : '');\r\n        if (\r\n            typeof chunkmap['.files'] === 'object' &&\r\n            typeof chunkmap['.files'][filename] === 'string'\r\n        )\r\n            return prefix + chunkmap['.files'][filename];\r\n        return prefix + `.${filename}`;\r\n    }\r\n\r\n    /** @type {String} 目标文件的扩展名 */\r\n    const extname = path.extname(filename);\r\n    /** @type {String} 目标文件的文件名（不包括扩展名） */\r\n    const basename = path.basename(filename, extname);\r\n\r\n    // 检查 `.entrypoints` 下是否有该文件的文件名对应（不包括扩展名）\r\n    // 如果有，同时只有一个结果，返回该结果\r\n    // 如果有，同时有多个结果，返回包含所有结果的 Array\r\n    if (Array.isArray(chunkmap['.entrypoints'][basename])) {\r\n        const files = chunkmap['.entrypoints'][basename].filter(\r\n            file => path.extname(file) === extname\r\n        );\r\n        if (files.length === 1) return getResultPathname(files[0]);\r\n        else if (files.length)\r\n            return files.map(file => getResultPathname(file));\r\n    }\r\n\r\n    // 检查 chunkmap 第一级是否有包含该文件的文件名的对应（不包括扩展名）\r\n    // 如果有，直接返回该结果\r\n    if (typeof chunkmap === 'object') {\r\n        let result;\r\n        if (Array.isArray(chunkmap[basename])) {\r\n            chunkmap[basename].some(value => {\r\n                if (path.extname(value) === extname) {\r\n                    result = value;\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n        }\r\n        if (result) return getResultPathname(result);\r\n    }\r\n\r\n    // 如果没有找到 chunkmap 或是 chunkmap 中未找到目标项目，转为过滤文件形式\r\n    // if (fs.existsSync(path.resolve(pathPublic, filename))) {\r\n    //     return '/' + filename;\r\n    // }\r\n    if (fs.existsSync(path.resolve(filename))) {\r\n        return pathPublic + filename;\r\n    }\r\n\r\n    console.warn(\r\n        `File not found:` +\r\n            (isI18nDefault ? `[${localeId}] ` : '') +\r\n            ` ${filename}`\r\n    );\r\n\r\n    return '';\r\n\r\n    // const segs = pathname.split('/').filter(seg => seg !== '/')\r\n    // const file = segs.pop()\r\n    // const dir = segs.length ? `${segs.join('/')}/` : ''\r\n    // return `/${dir}${\r\n    //     require('./filterTargetFile')(\r\n    //         require('./readFilesInPath')(`./${distPathname}/public/${appName ? `${appName}/` : ''}${dir}`),\r\n    //         file\r\n    //     )}`\r\n};\r\n\r\nmodule.exports = getFilePath;\r\n// module.exports = (pathname, pathDist = 'dist') => {\r\n//     if (__DEV__) {\r\n//         return `http://localhost:${process.env.WEBPACK_DEV_SERVER_PORT || '3001'}/dist/${pathname}`\r\n//     } else {\r\n//         const segs = pathname.split('/').filter(seg => seg !== '/')\r\n//         const file = segs.pop()\r\n//         const dir = segs.length ? `${segs.join('/')}/` : ''\r\n//         return `/${dir}${\r\n//             require('./filterTargetFile')(\r\n//                 require('./readFilesInPath')(`./${pathDist}/public/${dir}`),\r\n//                 file\r\n//             )}`\r\n//     }\r\n// }\r\n","/**\r\n * 获取运行目录\r\n * @returns {String}\r\n */\r\nmodule.exports = () => {\r\n    // console.log('process.env.KOOT_CWD', process.env.KOOT_CWD)\r\n    // console.log('process.cwd()', process.cwd())\r\n    return typeof process.env.KOOT_CWD === 'string'\r\n        ? process.env.KOOT_CWD\r\n        : process.cwd()\r\n}\r\n","const fs = require('fs-extra');\r\nconst path = require('path');\r\nconst getCwd = require('./get-cwd');\r\n\r\nlet p;\r\n\r\n/**\r\n * 获取打包结果路径\r\n * @returns {String} 打包结果路径 (硬盘绝对路径)\r\n */\r\nmodule.exports = () => {\r\n    // console.log('global.KOOT_DIST_DIR', global.KOOT_DIST_DIR)\r\n    if (typeof p !== 'string') {\r\n        p =\r\n            typeof global.KOOT_DIST_DIR === 'string'\r\n                ? global.KOOT_DIST_DIR\r\n                : (() => {\r\n                      let cwd = getCwd();\r\n                      let parent = path.resolve(cwd, '..');\r\n                      let result = path.resolve(cwd, process.env.KOOT_DIST_DIR);\r\n                      while (!fs.existsSync(result) && cwd !== parent) {\r\n                          cwd = parent;\r\n                          parent = path.resolve(cwd, '..');\r\n                          result = path.resolve(cwd, process.env.KOOT_DIST_DIR);\r\n                      }\r\n                      if (fs.existsSync(result)) return result;\r\n                      return path.resolve(cwd, process.env.KOOT_DIST_DIR);\r\n                  })();\r\n    }\r\n    return p;\r\n};\r\n","const path = require('path')\r\nconst getDirDevTmp = require('../libs/get-dir-dev-tmp')\r\n\r\nmodule.exports = (cwd) => path.resolve(getDirDevTmp(cwd), '.server-start')\r\n","const getWDSport = require('./get-webpack-dev-server-port');\r\n\r\nlet publicPath;\r\nlet publicPathSSRReading;\r\n\r\n/**\r\n * 获取浏览器环境中的访问根路径\r\n * @param {Boolean} [isSSRReading = false] 如果标记为 true，表示用于 SSR 时读取文件，会对 publicPath 进行特殊处理\r\n * @returns {String} 浏览器环境中的访问根路径\r\n */\r\nmodule.exports = (isSSRReading = false) => {\r\n    if (isSSRReading && typeof publicPathSSRReading === 'string')\r\n        return publicPathSSRReading;\r\n    if (typeof publicPath === 'string') return publicPath;\r\n\r\n    const isDev =\r\n        process.env.WEBPACK_BUILD_ENV === 'dev' ||\r\n        (typeof __DEV__ !== 'undefined' && __DEV__);\r\n\r\n    if (process.env.WEBPACK_BUILD_TYPE === 'spa') {\r\n        if (isDev || /^browser/.test(process.env.KOOT_HISTORY_TYPE)) {\r\n            publicPath = '/';\r\n            publicPathSSRReading = publicPath;\r\n        } else {\r\n            publicPath = '';\r\n            publicPathSSRReading = publicPath;\r\n        }\r\n    } else if (isDev) {\r\n        const port = getWDSport();\r\n        const origin =\r\n            typeof global.koaCtxOrigin === 'string'\r\n                ? global.koaCtxOrigin\r\n                      .split(':')\r\n                      .slice(0, 2)\r\n                      .join(':')\r\n                : 'http://localhost';\r\n        publicPath = `${origin}:${port}/dist/`;\r\n        publicPathSSRReading = publicPath;\r\n    } else if (typeof process.env.KOOT_SSR_PUBLIC_PATH === 'string') {\r\n        publicPath = JSON.parse(process.env.KOOT_SSR_PUBLIC_PATH);\r\n        publicPathSSRReading = '/';\r\n    } else {\r\n        publicPath = `/`;\r\n        publicPathSSRReading = publicPath;\r\n    }\r\n\r\n    if (isSSRReading) return publicPathSSRReading;\r\n    return publicPath;\r\n};\r\n","const getPublic = require('./get-public-dir');\r\n\r\n/**\r\n * 获取 service-worker 访问 URI\r\n * @param {String} [localeId] 如果提供，则会返回 [NAME].[localeId].js\r\n * @returns {String}\r\n */\r\nmodule.exports = localeId => {\r\n    if (typeof process.env.KOOT_PWA_PATHNAME !== 'string') return '';\r\n\r\n    // 如果 localeId 是对象，表示 chunkmap\r\n    if (typeof localeId === 'object') {\r\n        const { 'service-worker': sw = [] } = localeId;\r\n        if (sw.length) {\r\n            const file = sw[0];\r\n            const { '.public': p } = localeId;\r\n            const regex = new RegExp(`^${p}`);\r\n            const P = getPublic();\r\n            if (regex.test(file)) return P + file.replace(regex, '');\r\n            return P + file.replace(/^public\\//, '');\r\n        }\r\n        return '';\r\n    }\r\n\r\n    const i18nType = JSON.parse(process.env.KOOT_I18N)\r\n        ? JSON.parse(process.env.KOOT_I18N_TYPE)\r\n        : undefined;\r\n\r\n    const pwaPathname = JSON.parse(process.env.KOOT_PWA_PATHNAME);\r\n\r\n    if (i18nType !== 'default') return pwaPathname;\r\n\r\n    if (!localeId) return pwaPathname;\r\n\r\n    const chunks = pwaPathname.split('.');\r\n    chunks.splice(chunks.length - 1, 0, localeId);\r\n    return chunks.join('.');\r\n};\r\n","/**\r\n * 获取 webpack-dev-server 端口号\r\n * @returns {Number}\r\n */\r\nmodule.exports = () => {\r\n    // console.log('process.env.WEBPACK_DEV_SERVER_PORT', process.env.WEBPACK_DEV_SERVER_PORT)\r\n    return process.env.WEBPACK_DEV_SERVER_PORT || 3001\r\n}\r\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignMergeValue;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","var Stack = require('./_Stack'),\n    assignMergeValue = require('./_assignMergeValue'),\n    baseFor = require('./_baseFor'),\n    baseMergeDeep = require('./_baseMergeDeep'),\n    isObject = require('./isObject'),\n    keysIn = require('./keysIn'),\n    safeGet = require('./_safeGet');\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nmodule.exports = baseMerge;\n","var assignMergeValue = require('./_assignMergeValue'),\n    cloneBuffer = require('./_cloneBuffer'),\n    cloneTypedArray = require('./_cloneTypedArray'),\n    copyArray = require('./_copyArray'),\n    initCloneObject = require('./_initCloneObject'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isPlainObject = require('./isPlainObject'),\n    isTypedArray = require('./isTypedArray'),\n    safeGet = require('./_safeGet'),\n    toPlainObject = require('./toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nmodule.exports = baseMergeDeep;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nmodule.exports = safeGet;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nmodule.exports = merge;\n","var baseSet = require('./_baseSet');\n\n/**\n * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n * it's created. Arrays are created for missing index properties while objects\n * are created for all other missing properties. Use `_.setWith` to customize\n * `path` creation.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.set(object, 'a[0].b.c', 4);\n * console.log(object.a[0].b.c);\n * // => 4\n *\n * _.set(object, ['x', '0', 'y', 'z'], 5);\n * console.log(object.x[0].y.z);\n * // => 5\n */\nfunction set(object, path, value) {\n  return object == null ? object : baseSet(object, path, value);\n}\n\nmodule.exports = set;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","\nif (typeof Promise === 'undefined') {\n   throw new ReferenceError(\"Promise wrappers must be enabled to use the promise API\");\n}\n\nfunction isAsyncCall (fn) {\n   return /^[^)]+then\\s*\\)/.test(fn) || /\\._run\\(/.test(fn);\n}\n\nmodule.exports = function (baseDir) {\n\n   var Git = require('./src/git');\n   var gitFactory = require('./src');\n   var git;\n\n\n   var chain = Promise.resolve();\n\n   try {\n      git = gitFactory(baseDir);\n   }\n   catch (e) {\n      chain = Promise.reject(e);\n   }\n\n   return Object.keys(Git.prototype).reduce(function (promiseApi, fn) {\n      if (/^_|then/.test(fn)) {\n         return promiseApi;\n      }\n\n      if (isAsyncCall(Git.prototype[fn])) {\n         promiseApi[fn] = git ? asyncWrapper(fn, git) : function () {\n            return chain;\n         };\n      }\n\n      else {\n         promiseApi[fn] = git ? syncWrapper(fn, git, promiseApi) : function () {\n            return promiseApi;\n         };\n      }\n\n      return promiseApi;\n\n   }, {});\n\n   function asyncWrapper (fn, git) {\n      return function () {\n         var args = [].slice.call(arguments);\n\n         if (typeof args[args.length] === 'function') {\n            throw new TypeError(\n               \"Promise interface requires that handlers are not supplied inline, \" +\n               \"trailing function not allowed in call to \" + fn);\n         }\n\n         return chain.then(function () {\n            return new Promise(function (resolve, reject) {\n               args.push(function (err, result) {\n                  if (err) {\n                     return reject(toError(err));\n                  }\n\n                  resolve(result);\n               });\n\n               git[fn].apply(git, args);\n            });\n         });\n      };\n   }\n\n   function syncWrapper (fn, git, api) {\n      return function () {\n         git[fn].apply(git, arguments);\n\n         return api;\n      };\n   }\n\n};\n\nfunction toError (error) {\n\n   if (error instanceof Error) {\n      return error;\n   }\n\n   if (typeof error === 'string') {\n      return new Error(error);\n   }\n\n   return Object.create(new Error(error), {\n      git: { value: error },\n   });\n}\n","(function () {\n\n   'use strict';\n\n   var debug = require('debug')('simple-git');\n   var deferred = require('./util/deferred');\n   var exists = require('./util/exists');\n   var NOOP = function () {};\n   var responses = require('./responses');\n\n   /**\n    * Git handling for node. All public functions can be chained and all `then` handlers are optional.\n    *\n    * @param {string} baseDir base directory for all processes to run\n    *\n    * @param {Object} ChildProcess The ChildProcess module\n    * @param {Function} Buffer The Buffer implementation to use\n    *\n    * @constructor\n    */\n   function Git (baseDir, ChildProcess, Buffer) {\n      this._baseDir = baseDir;\n      this._runCache = [];\n\n      this.ChildProcess = ChildProcess;\n      this.Buffer = Buffer;\n   }\n\n   /**\n    * @type {string} The command to use to reference the git binary\n    */\n   Git.prototype._command = 'git';\n\n   /**\n    * @type {[key: string]: string} An object of key=value pairs to be passed as environment variables to the\n    *                               spawned child process.\n    */\n   Git.prototype._env = null;\n\n   /**\n    * @type {Function} An optional handler to use when a child process is created\n    */\n   Git.prototype._outputHandler = null;\n\n   /**\n    * @type {boolean} Property showing whether logging will be silenced - defaults to true in a production environment\n    */\n   Git.prototype._silentLogging = /prod/.test(process.env.NODE_ENV);\n\n   /**\n    * Sets the path to a custom git binary, should either be `git` when there is an installation of git available on\n    * the system path, or a fully qualified path to the executable.\n    *\n    * @param {string} command\n    * @returns {Git}\n    */\n   Git.prototype.customBinary = function (command) {\n      this._command = command;\n      return this;\n   };\n\n   /**\n    * Sets an environment variable for the spawned child process, either supply both a name and value as strings or\n    * a single object to entirely replace the current environment variables.\n    *\n    * @param {string|Object} name\n    * @param {string} [value]\n    * @returns {Git}\n    */\n   Git.prototype.env = function (name, value) {\n      if (arguments.length === 1 && typeof name === 'object') {\n         this._env = name;\n      }\n      else {\n         (this._env = this._env || {})[name] = value;\n      }\n\n      return this;\n   };\n\n   /**\n    * Sets the working directory of the subsequent commands.\n    *\n    * @param {string} workingDirectory\n    * @param {Function} [then]\n    * @returns {Git}\n    */\n   Git.prototype.cwd = function (workingDirectory, then) {\n      var git = this;\n      var next = Git.trailingFunctionArgument(arguments);\n\n      return this.exec(function () {\n         git._baseDir = workingDirectory;\n         if (!exists(workingDirectory, exists.FOLDER)) {\n            Git.exception(git, 'Git.cwd: cannot change to non-directory \"' + workingDirectory + '\"', next);\n         }\n         else {\n            next && next(null, workingDirectory);\n         }\n      });\n   };\n\n   /**\n    * Sets a handler function to be called whenever a new child process is created, the handler function will be called\n    * with the name of the command being run and the stdout & stderr streams used by the ChildProcess.\n    *\n    * @example\n    * require('simple-git')\n    *    .outputHandler(function (command, stdout, stderr) {\n    *       stdout.pipe(process.stdout);\n    *    })\n    *    .checkout('https://github.com/user/repo.git');\n    *\n    * @see https://nodejs.org/api/child_process.html#child_process_class_childprocess\n    * @see https://nodejs.org/api/stream.html#stream_class_stream_readable\n    * @param {Function} outputHandler\n    * @returns {Git}\n    */\n   Git.prototype.outputHandler = function (outputHandler) {\n      this._outputHandler = outputHandler;\n      return this;\n   };\n\n   /**\n    * Initialize a git repo\n    *\n    * @param {Boolean} [bare=false]\n    * @param {Function} [then]\n    */\n   Git.prototype.init = function (bare, then) {\n      var commands = ['init'];\n      var next = Git.trailingFunctionArgument(arguments);\n\n      if (bare === true) {\n         commands.push('--bare');\n      }\n\n      return this._run(commands, function (err) {\n         next && next(err);\n      });\n   };\n\n   /**\n    * Check the status of the local repo\n    *\n    * @param {Function} [then]\n    */\n   Git.prototype.status = function (then) {\n      return this._run(\n         ['status', '--porcelain', '-b', '-u'],\n         Git._responseHandler(then, 'StatusSummary')\n      );\n   };\n\n   /**\n    * List the stash(s) of the local repo\n    *\n    * @param {Object|Array} [options]\n    * @param {Function} [then]\n    */\n   Git.prototype.stashList = function (options, then) {\n      var handler = Git.trailingFunctionArgument(arguments);\n      var opt = (handler === then ? options : null) || {};\n\n      var splitter = opt.splitter || requireResponseHandler('ListLogSummary').SPLITTER;\n      var command = [\"stash\", \"list\", \"--pretty=format:\"\n         + requireResponseHandler('ListLogSummary').START_BOUNDARY\n         + \"%H %ai %s%d %aN %ae\".replace(/\\s+/g, splitter)\n         + requireResponseHandler('ListLogSummary').COMMIT_BOUNDARY\n      ];\n\n      if (Array.isArray(opt)) {\n         command = command.concat(opt);\n      }\n\n      return this._run(command,\n         Git._responseHandler(handler, 'ListLogSummary', splitter)\n      );\n   };\n\n   /**\n    * Stash the local repo\n    *\n    * @param {Object|Array} [options]\n    * @param {Function} [then]\n    */\n   Git.prototype.stash = function (options, then) {\n      var command = ['stash'];\n      Git._appendOptions(command, Git.trailingOptionsArgument(arguments));\n      command.push.apply(command, Git.trailingArrayArgument(arguments));\n\n      return this._run(command, Git._responseHandler(Git.trailingFunctionArgument(arguments)));\n   };\n\n   /**\n    * Clone a git repo\n    *\n    * @param {string} repoPath\n    * @param {string} localPath\n    * @param {String[]} [options] Optional array of options to pass through to the clone command\n    * @param {Function} [then]\n    */\n   Git.prototype.clone = function (repoPath, localPath, options, then) {\n      var next = Git.trailingFunctionArgument(arguments);\n      var command = ['clone'].concat(Git.trailingArrayArgument(arguments));\n\n      for (var i = 0, iMax = arguments.length; i < iMax; i++) {\n         if (typeof arguments[i] === 'string') {\n            command.push(arguments[i]);\n         }\n      }\n\n      return this._run(command, function (err, data) {\n         next && next(err, data);\n      });\n   };\n\n   /**\n    * Mirror a git repo\n    *\n    * @param {string} repoPath\n    * @param {string} localPath\n    * @param {Function} [then]\n    */\n   Git.prototype.mirror = function (repoPath, localPath, then) {\n      return this.clone(repoPath, localPath, ['--mirror'], then);\n   };\n\n   /**\n    * Moves one or more files to a new destination.\n    *\n    * @see https://git-scm.com/docs/git-mv\n    *\n    * @param {string|string[]} from\n    * @param {string} to\n    * @param {Function} [then]\n    */\n   Git.prototype.mv = function (from, to, then) {\n      var handler = Git.trailingFunctionArgument(arguments);\n\n      var command = [].concat(from);\n      command.unshift('mv', '-v');\n      command.push(to);\n\n      this._run(command, Git._responseHandler(handler, 'MoveSummary'))\n   };\n\n   /**\n    * Internally uses pull and tags to get the list of tags then checks out the latest tag.\n    *\n    * @param {Function} [then]\n    */\n   Git.prototype.checkoutLatestTag = function (then) {\n      var git = this;\n      return this.pull(function () {\n         git.tags(function (err, tags) {\n            git.checkout(tags.latest, then);\n         });\n      });\n   };\n\n   /**\n    * Adds one or more files to source control\n    *\n    * @param {string|string[]} files\n    * @param {Function} [then]\n    */\n   Git.prototype.add = function (files, then) {\n      return this._run(['add'].concat(files), function (err, data) {\n         then && then(err);\n      });\n   };\n\n   /**\n    * Commits changes in the current working directory - when specific file paths are supplied, only changes on those\n    * files will be committed.\n    *\n    * @param {string|string[]} message\n    * @param {string|string[]} [files]\n    * @param {Object} [options]\n    * @param {Function} [then]\n    */\n   Git.prototype.commit = function (message, files, options, then) {\n      var handler = Git.trailingFunctionArgument(arguments);\n\n      var command = ['commit'];\n\n      [].concat(message).forEach(function (message) {\n         command.push('-m', message);\n      });\n\n      [].push.apply(command, [].concat(typeof files === \"string\" || Array.isArray(files) ? files : []));\n\n      Git._appendOptions(command, Git.trailingOptionsArgument(arguments));\n\n      return this._run(\n         command,\n         Git._responseHandler(handler, 'CommitSummary')\n      );\n   };\n\n   /**\n    * Gets a function to be used for logging.\n    *\n    * @param {string} level\n    * @param {string} [message]\n    *\n    * @returns {Function}\n    * @private\n    */\n   Git.prototype._getLog = function (level, message) {\n      var log = this._silentLogging ? NOOP : console[level].bind(console);\n      if (arguments.length > 1) {\n         log(message);\n      }\n      return log;\n   };\n\n   /**\n    * Pull the updated contents of the current repo\n    *\n    * @param {string} [remote] When supplied must also include the branch\n    * @param {string} [branch] When supplied must also include the remote\n    * @param {Object} [options] Optionally include set of options to merge into the command\n    * @param {Function} [then]\n    */\n   Git.prototype.pull = function (remote, branch, options, then) {\n      var command = [\"pull\"];\n      var handler = Git.trailingFunctionArgument(arguments);\n\n      if (typeof remote === 'string' && typeof branch === 'string') {\n         command.push(remote, branch);\n      }\n\n      Git._appendOptions(command, Git.trailingOptionsArgument(arguments));\n\n      return this._run(command, Git._responseHandler(handler, 'PullSummary'));\n   };\n\n   /**\n    * Fetch the updated contents of the current repo.\n    *\n    * @example\n    *   .fetch('upstream', 'master') // fetches from master on remote named upstream\n    *   .fetch(function () {}) // runs fetch against default remote and branch and calls function\n    *\n    * @param {string} [remote]\n    * @param {string} [branch]\n    * @param {Function} [then]\n    */\n   Git.prototype.fetch = function (remote, branch, then) {\n      var command = [\"fetch\"];\n      var next = Git.trailingFunctionArgument(arguments);\n      Git._appendOptions(command, Git.trailingOptionsArgument(arguments));\n\n      if (typeof remote === 'string' && typeof branch === 'string') {\n         command.push(remote, branch);\n      }\n\n      if (Array.isArray(remote)) {\n         command = command.concat(remote);\n      }\n\n      return this._run(\n         command,\n         Git._responseHandler(next, 'FetchSummary'),\n         {\n            concatStdErr: true\n         }\n      );\n   };\n\n   /**\n    * Disables/enables the use of the console for printing warnings and errors, by default messages are not shown in\n    * a production environment.\n    *\n    * @param {boolean} silence\n    * @returns {Git}\n    */\n   Git.prototype.silent = function (silence) {\n      this._silentLogging = !!silence;\n      return this;\n   };\n\n   /**\n    * List all tags. When using git 2.7.0 or above, include an options object with `\"--sort\": \"property-name\"` to\n    * sort the tags by that property instead of using the default semantic versioning sort.\n    *\n    * Note, supplying this option when it is not supported by your Git version will cause the operation to fail.\n    *\n    * @param {Object} [options]\n    * @param {Function} [then]\n    */\n   Git.prototype.tags = function (options, then) {\n      var next = Git.trailingFunctionArgument(arguments);\n\n      var command = ['-l'];\n      Git._appendOptions(command, Git.trailingOptionsArgument(arguments));\n\n      var hasCustomSort = command.some(function (option) {\n         return /^--sort=/.test(option);\n      });\n\n      return this.tag(\n         command,\n         Git._responseHandler(next, 'TagList', [hasCustomSort])\n      );\n   };\n\n   /**\n    * Rebases the current working copy. Options can be supplied either as an array of string parameters\n    * to be sent to the `git rebase` command, or a standard options object.\n    *\n    * @param {Object|String[]} [options]\n    * @param {Function} [then]\n    * @returns {Git}\n    */\n   Git.prototype.rebase = function (options, then) {\n      var command = ['rebase'];\n      Git._appendOptions(command, Git.trailingOptionsArgument(arguments));\n      command.push.apply(command, Git.trailingArrayArgument(arguments));\n\n\n      return this._run(command, Git._responseHandler(Git.trailingFunctionArgument(arguments)));\n   };\n\n   /**\n    * Reset a repo\n    *\n    * @param {string|string[]} [mode=soft] Either an array of arguments supported by the 'git reset' command, or the\n    *                                        string value 'soft' or 'hard' to set the reset mode.\n    * @param {Function} [then]\n    */\n   Git.prototype.reset = function (mode, then) {\n      var command = ['reset'];\n      var next = Git.trailingFunctionArgument(arguments);\n      if (next === mode || typeof mode === 'string' || !mode) {\n         var modeStr = ['mixed', 'soft', 'hard'].includes(mode) ? mode : 'soft';\n         command.push('--' + modeStr);\n      }\n      else if (Array.isArray(mode)) {\n         command.push.apply(command, mode);\n      }\n\n      return this._run(command, function (err) {\n         next && next(err || null);\n      });\n   };\n\n   /**\n    * Revert one or more commits in the local working copy\n    *\n    * @param {string} commit The commit to revert. Can be any hash, offset (eg: `HEAD~2`) or range (eg: `master~5..master~2`)\n    * @param {Object} [options] Optional options object\n    * @param {Function} [then]\n    */\n   Git.prototype.revert = function (commit, options, then) {\n      var next = Git.trailingFunctionArgument(arguments);\n      var command = ['revert'];\n\n      Git._appendOptions(command, Git.trailingOptionsArgument(arguments));\n\n      if (typeof commit !== 'string') {\n         return this.exec(function () {\n            next && next(new TypeError(\"Commit must be a string\"));\n         });\n      }\n\n      command.push(commit);\n      return this._run(command, function (err) {\n         next && next(err || null);\n      });\n   };\n\n   /**\n    * Add a lightweight tag to the head of the current branch\n    *\n    * @param {string} name\n    * @param {Function} [then]\n    */\n   Git.prototype.addTag = function (name, then) {\n      if (typeof name !== \"string\") {\n         return this.exec(function () {\n            then && then(new TypeError(\"Git.addTag requires a tag name\"));\n         });\n      }\n\n      var command = [name];\n      return then ? this.tag(command, then) : this.tag(command);\n   };\n\n   /**\n    * Add an annotated tag to the head of the current branch\n    *\n    * @param {string} tagName\n    * @param {string} tagMessage\n    * @param {Function} [then]\n    */\n   Git.prototype.addAnnotatedTag = function (tagName, tagMessage, then) {\n      return this.tag(['-a', '-m', tagMessage, tagName], function (err) {\n         then && then(err);\n      });\n   };\n\n   /**\n    * Check out a tag or revision, any number of additional arguments can be passed to the `git checkout` command\n    * by supplying either a string or array of strings as the `what` parameter.\n    *\n    * @param {string|string[]} what One or more commands to pass to `git checkout`\n    * @param {Function} [then]\n    */\n   Git.prototype.checkout = function (what, then) {\n      var command = ['checkout'];\n      command = command.concat(what);\n\n      return this._run(command, function (err, data) {\n         then && then(err, !err && this._parseCheckout(data));\n      });\n   };\n\n   /**\n    * Check out a remote branch\n    *\n    * @param {string} branchName name of branch\n    * @param {string} startPoint (e.g origin/development)\n    * @param {Function} [then]\n    */\n   Git.prototype.checkoutBranch = function (branchName, startPoint, then) {\n      return this.checkout(['-b', branchName, startPoint], then);\n   };\n\n   /**\n    * Check out a local branch\n    *\n    * @param {string} branchName of branch\n    * @param {Function} [then]\n    */\n   Git.prototype.checkoutLocalBranch = function (branchName, then) {\n      return this.checkout(['-b', branchName], then);\n   };\n\n   /**\n    * Delete a local branch\n    *\n    * @param {string} branchName name of branch\n    * @param {Function} [then]\n    */\n   Git.prototype.deleteLocalBranch = function (branchName, then) {\n      return this.branch(['-d', branchName], then);\n   };\n\n   /**\n    * List all branches\n    *\n    * @param {Object | string[]} [options]\n    * @param {Function} [then]\n    */\n   Git.prototype.branch = function (options, then) {\n      var isDelete, responseHandler;\n      var next = Git.trailingFunctionArgument(arguments);\n      var command = ['branch'];\n\n      command.push.apply(command, Git.trailingArrayArgument(arguments));\n      Git._appendOptions(command, Git.trailingOptionsArgument(arguments));\n\n      if (!arguments.length || next === options) {\n         command.push('-a');\n      }\n\n      isDelete = ['-d', '-D', '--delete'].reduce(function (isDelete, flag) {\n         return isDelete || command.indexOf(flag) > 0;\n      }, false);\n\n      if (command.indexOf('-v') < 0) {\n         command.splice(1, 0, '-v');\n      }\n\n      responseHandler = isDelete\n         ? Git._responseHandler(next, 'BranchDeleteSummary', false)\n         : Git._responseHandler(next, 'BranchSummary');\n\n      return this._run(command, responseHandler);\n   };\n\n   /**\n    * Return list of local branches\n    *\n    * @param {Function} [then]\n    */\n   Git.prototype.branchLocal = function (then) {\n      return this.branch(['-v'], then);\n   };\n\n   /**\n    * Add config to local git instance\n    *\n    * @param {string} key configuration key (e.g user.name)\n    * @param {string} value for the given key (e.g your name)\n    * @param {Function} [then]\n    */\n   Git.prototype.addConfig = function (key, value, then) {\n      return this._run(['config', '--local', key, value], function (err, data) {\n         then && then(err, !err && data);\n      });\n   };\n\n   /**\n    * Executes any command against the git binary.\n    *\n    * @param {string[]|Object} commands\n    * @param {Function} [then]\n    *\n    * @returns {Git}\n    */\n   Git.prototype.raw = function (commands, then) {\n      var command = [];\n      if (Array.isArray(commands)) {\n         command = commands.slice(0);\n      }\n      else {\n         Git._appendOptions(command, Git.trailingOptionsArgument(arguments));\n      }\n\n      var next = Git.trailingFunctionArgument(arguments);\n\n      if (!command.length) {\n         return this.exec(function () {\n            next && next(new Error('Raw: must supply one or more command to execute'), null);\n         });\n      }\n\n      return this._run(command, function (err, data) {\n         next && next(err, !err && data || null);\n      });\n   };\n\n   /**\n    * Add a submodule\n    *\n    * @param {string} repo\n    * @param {string} path\n    * @param {Function} [then]\n    */\n   Git.prototype.submoduleAdd = function (repo, path, then) {\n      return this._run(['submodule', 'add', repo, path], function (err) {\n         then && then(err);\n      });\n   };\n\n   /**\n    * Update submodules\n    *\n    * @param {string[]} [args]\n    * @param {Function} [then]\n    */\n   Git.prototype.submoduleUpdate = function (args, then) {\n      if (typeof args === 'string') {\n         this._getLog('warn', 'Git#submoduleUpdate: args should be supplied as an array of individual arguments');\n      }\n\n      var next = Git.trailingFunctionArgument(arguments);\n      var command = (args !== next) ? args : [];\n\n      return this.subModule(['update'].concat(command), function (err, args) {\n         next && next(err, args);\n      });\n   };\n\n   /**\n    * Initialize submodules\n    *\n    * @param {string[]} [args]\n    * @param {Function} [then]\n    */\n   Git.prototype.submoduleInit = function (args, then) {\n      if (typeof args === 'string') {\n         this._getLog('warn', 'Git#submoduleInit: args should be supplied as an array of individual arguments');\n      }\n\n      var next = Git.trailingFunctionArgument(arguments);\n      var command = (args !== next) ? args : [];\n\n      return this.subModule(['init'].concat(command), function (err, args) {\n         next && next(err, args);\n      });\n   };\n\n   /**\n    * Call any `git submodule` function with arguments passed as an array of strings.\n    *\n    * @param {string[]} options\n    * @param {Function} [then]\n    */\n   Git.prototype.subModule = function (options, then) {\n      if (!Array.isArray(options)) {\n         return this.exec(function () {\n            then && then(new TypeError(\"Git.subModule requires an array of arguments\"));\n         });\n      }\n\n      if (options[0] !== 'submodule') {\n         options.unshift('submodule');\n      }\n\n      return this._run(options, function (err, data) {\n         then && then(err || null, err ? null : data);\n      });\n   };\n\n   /**\n    * List remote\n    *\n    * @param {string[]} [args]\n    * @param {Function} [then]\n    */\n   Git.prototype.listRemote = function (args, then) {\n      var next = Git.trailingFunctionArgument(arguments);\n      var data = next === args || args === undefined ? [] : args;\n\n      if (typeof data === 'string') {\n         this._getLog('warn', 'Git#listRemote: args should be supplied as an array of individual arguments');\n      }\n\n      return this._run(['ls-remote'].concat(data), function (err, data) {\n         next && next(err, data);\n      });\n   };\n\n   /**\n    * Adds a remote to the list of remotes.\n    *\n    * @param {string} remoteName Name of the repository - eg \"upstream\"\n    * @param {string} remoteRepo Fully qualified SSH or HTTP(S) path to the remote repo\n    * @param {Function} [then]\n    * @returns {*}\n    */\n   Git.prototype.addRemote = function (remoteName, remoteRepo, then) {\n      return this._run(['remote', 'add', remoteName, remoteRepo], function (err) {\n         then && then(err);\n      });\n   };\n\n   /**\n    * Removes an entry from the list of remotes.\n    *\n    * @param {string} remoteName Name of the repository - eg \"upstream\"\n    * @param {Function} [then]\n    * @returns {*}\n    */\n   Git.prototype.removeRemote = function (remoteName, then) {\n      return this._run(['remote', 'remove', remoteName], function (err) {\n         then && then(err);\n      });\n   };\n\n   /**\n    * Gets the currently available remotes, setting the optional verbose argument to true includes additional\n    * detail on the remotes themselves.\n    *\n    * @param {boolean} [verbose=false]\n    * @param {Function} [then]\n    */\n   Git.prototype.getRemotes = function (verbose, then) {\n      var next = Git.trailingFunctionArgument(arguments);\n      var args = verbose === true ? ['-v'] : [];\n\n      return this.remote(args, function (err, data) {\n         next && next(err, !err && function () {\n            return data.trim().split('\\n').filter(Boolean).reduce(function (remotes, remote) {\n               var detail = remote.trim().split(/\\s+/);\n               var name = detail.shift();\n\n               if (!remotes[name]) {\n                  remotes[name] = remotes[remotes.length] = {\n                     name: name,\n                     refs: {}\n                  };\n               }\n\n               if (detail.length) {\n                  remotes[name].refs[detail.pop().replace(/[^a-z]/g, '')] = detail.pop();\n               }\n\n               return remotes;\n            }, []).slice(0);\n         }());\n      });\n   };\n\n   /**\n    * Call any `git remote` function with arguments passed as an array of strings.\n    *\n    * @param {string[]} options\n    * @param {Function} [then]\n    */\n   Git.prototype.remote = function (options, then) {\n      if (!Array.isArray(options)) {\n         return this.exec(function () {\n            then && then(new TypeError(\"Git.remote requires an array of arguments\"));\n         });\n      }\n\n      if (options[0] !== 'remote') {\n         options.unshift('remote');\n      }\n\n      return this._run(options, function (err, data) {\n         then && then(err || null, err ? null : data);\n      });\n   };\n\n   /**\n    * Merges from one branch to another, equivalent to running `git merge ${from} $[to}`, the `options` argument can\n    * either be an array of additional parameters to pass to the command or null / omitted to be ignored.\n    *\n    * @param {string} from\n    * @param {string} to\n    * @param {string[]} [options]\n    * @param {Function} [then]\n    */\n   Git.prototype.mergeFromTo = function (from, to, options, then) {\n      var commands = [\n         from,\n         to\n      ];\n      var callback = Git.trailingFunctionArgument(arguments);\n\n      if (Array.isArray(options)) {\n         commands = commands.concat(options);\n      }\n\n      return this.merge(commands, callback);\n   };\n\n   /**\n    * Runs a merge, `options` can be either an array of arguments\n    * supported by the [`git merge`](https://git-scm.com/docs/git-merge)\n    * or an options object.\n    *\n    * Conflicts during the merge result in an error response,\n    * the response type whether it was an error or success will be a MergeSummary instance.\n    * When successful, the MergeSummary has all detail from a the PullSummary\n    *\n    * @param {Object | string[]} [options]\n    * @param {Function} [then]\n    * @returns {*}\n    *\n    * @see ./responses/MergeSummary.js\n    * @see ./responses/PullSummary.js\n    */\n   Git.prototype.merge = function (options, then) {\n      var self = this;\n      var userHandler = Git.trailingFunctionArgument(arguments) || NOOP;\n      var mergeHandler = function (err, mergeSummary) {\n         if (!err && mergeSummary.failed) {\n            return Git.fail(self, mergeSummary, userHandler);\n         }\n\n         userHandler(err, mergeSummary);\n      };\n\n      var command = [];\n      Git._appendOptions(command, Git.trailingOptionsArgument(arguments));\n      command.push.apply(command, Git.trailingArrayArgument(arguments));\n\n      if (command[0] !== 'merge') {\n         command.unshift('merge');\n      }\n\n      if (command.length === 1) {\n         return this.exec(function () {\n            then && then(new TypeError(\"Git.merge requires at least one option\"));\n         });\n      }\n\n      return this._run(command, Git._responseHandler(mergeHandler, 'MergeSummary'), {\n         concatStdErr: true\n      });\n   };\n\n   /**\n    * Call any `git tag` function with arguments passed as an array of strings.\n    *\n    * @param {string[]} options\n    * @param {Function} [then]\n    */\n   Git.prototype.tag = function (options, then) {\n      var command = [];\n      Git._appendOptions(command, Git.trailingOptionsArgument(arguments));\n      command.push.apply(command, Git.trailingArrayArgument(arguments));\n\n      if (command[0] !== 'tag') {\n         command.unshift('tag');\n      }\n\n      return this._run(command, Git._responseHandler(Git.trailingFunctionArgument(arguments)));\n   };\n\n   /**\n    * Updates repository server info\n    *\n    * @param {Function} [then]\n    */\n   Git.prototype.updateServerInfo = function (then) {\n      return this._run([\"update-server-info\"], function (err, data) {\n         then && then(err, !err && data);\n      });\n   };\n\n   /**\n    * Pushes the current committed changes to a remote, optionally specify the names of the remote and branch to use\n    * when pushing. Supply multiple options as an array of strings in the first argument - see examples below.\n    *\n    * @param {string|string[]} [remote]\n    * @param {string} [branch]\n    * @param {Function} [then]\n    */\n   Git.prototype.push = function (remote, branch, then) {\n      var command = [];\n      var handler = Git.trailingFunctionArgument(arguments);\n\n      if (typeof remote === 'string' && typeof branch === 'string') {\n         command.push(remote, branch);\n      }\n\n      if (Array.isArray(remote)) {\n         command = command.concat(remote);\n      }\n\n      Git._appendOptions(command, Git.trailingOptionsArgument(arguments));\n\n      if (command[0] !== 'push') {\n         command.unshift('push');\n      }\n\n      return this._run(command, function (err, data) {\n         handler && handler(err, !err && data);\n      });\n   };\n\n   /**\n    * Pushes the current tag changes to a remote which can be either a URL or named remote. When not specified uses the\n    * default configured remote spec.\n    *\n    * @param {string} [remote]\n    * @param {Function} [then]\n    */\n   Git.prototype.pushTags = function (remote, then) {\n      var command = ['push'];\n      if (typeof remote === \"string\") {\n         command.push(remote);\n      }\n      command.push('--tags');\n\n      then = typeof arguments[arguments.length - 1] === \"function\" ? arguments[arguments.length - 1] : null;\n\n      return this._run(command, function (err, data) {\n         then && then(err, !err && data);\n      });\n   };\n\n   /**\n    * Removes the named files from source control.\n    *\n    * @param {string|string[]} files\n    * @param {Function} [then]\n    */\n   Git.prototype.rm = function (files, then) {\n      return this._rm(files, '-f', then);\n   };\n\n   /**\n    * Removes the named files from source control but keeps them on disk rather than deleting them entirely. To\n    * completely remove the files, use `rm`.\n    *\n    * @param {string|string[]} files\n    * @param {Function} [then]\n    */\n   Git.prototype.rmKeepLocal = function (files, then) {\n      return this._rm(files, '--cached', then);\n   };\n\n   /**\n    * Returns a list of objects in a tree based on commit hash. Passing in an object hash returns the object's content,\n    * size, and type.\n    *\n    * Passing \"-p\" will instruct cat-file to determine the object type, and display its formatted contents.\n    *\n    * @param {string[]} [options]\n    * @param {Function} [then]\n    */\n   Git.prototype.catFile = function (options, then) {\n      return this._catFile('utf-8', arguments);\n   };\n\n   /**\n    * Equivalent to `catFile` but will return the native `Buffer` of content from the git command's stdout.\n    *\n    * @param {string[]} options\n    * @param then\n    */\n   Git.prototype.binaryCatFile = function (options, then) {\n      return this._catFile('buffer', arguments);\n   };\n\n   Git.prototype._catFile = function (format, args) {\n      var handler = Git.trailingFunctionArgument(args);\n      var command = ['cat-file'];\n      var options = args[0];\n\n      if (typeof options === 'string') {\n         throw new TypeError('Git#catFile: options must be supplied as an array of strings');\n      }\n      else if (Array.isArray(options)) {\n         command.push.apply(command, options);\n      }\n\n      return this._run(command, function (err, data) {\n         handler && handler(err, data);\n      }, {\n         format: format\n      });\n   };\n\n   /**\n    * Return repository changes.\n    *\n    * @param {string[]} [options]\n    * @param {Function} [then]\n    */\n   Git.prototype.diff = function (options, then) {\n      var command = ['diff'];\n\n      if (typeof options === 'string') {\n         command[0] += ' ' + options;\n         this._getLog('warn',\n            'Git#diff: supplying options as a single string is now deprecated, switch to an array of strings');\n      }\n      else if (Array.isArray(options)) {\n         command.push.apply(command, options);\n      }\n\n      if (typeof arguments[arguments.length - 1] === 'function') {\n         then = arguments[arguments.length - 1];\n      }\n\n      return this._run(command, function (err, data) {\n         then && then(err, data);\n      });\n   };\n\n   Git.prototype.diffSummary = function (options, then) {\n      var next = Git.trailingFunctionArgument(arguments);\n      var command = ['--stat=4096'];\n\n      if (options && options !== next) {\n         command.push.apply(command, [].concat(options));\n      }\n\n      return this.diff(command, Git._responseHandler(next, 'DiffSummary'));\n   };\n\n   /**\n    * Wraps `git rev-parse`. Primarily used to convert friendly commit references (ie branch names) to SHA1 hashes.\n    *\n    * Options should be an array of string options compatible with the `git rev-parse`\n    *\n    * @param {string|string[]} [options]\n    * @param {Function} [then]\n    *\n    * @see https://git-scm.com/docs/git-rev-parse\n    */\n   Git.prototype.revparse = function (options, then) {\n      var command = ['rev-parse'];\n\n      if (typeof options === 'string') {\n         command = command + ' ' + options;\n         this._getLog('warn',\n            'Git#revparse: supplying options as a single string is now deprecated, switch to an array of strings');\n      }\n      else if (Array.isArray(options)) {\n         command.push.apply(command, options);\n      }\n\n      if (typeof arguments[arguments.length - 1] === 'function') {\n         then = arguments[arguments.length - 1];\n      }\n\n      return this._run(command, function (err, data) {\n         then && then(err, err ? null : String(data).trim());\n      });\n   };\n\n   /**\n    * Show various types of objects, for example the file at a certain commit\n    *\n    * @param {string[]} [options]\n    * @param {Function} [then]\n    */\n   Git.prototype.show = function (options, then) {\n      var args = [].slice.call(arguments, 0);\n      var handler = typeof args[args.length - 1] === \"function\" ? args.pop() : null;\n      var command = ['show'];\n      if (typeof options === 'string') {\n         command = command + ' ' + options;\n         this._getLog('warn',\n            'Git#show: supplying options as a single string is now deprecated, switch to an array of strings');\n      }\n      else if (Array.isArray(options)) {\n         command.push.apply(command, options);\n      }\n\n      return this._run(command, function (err, data) {\n         handler && handler(err, !err && data);\n      });\n   };\n\n   /**\n    * @param {string} mode Required parameter \"n\" or \"f\"\n    * @param {string[]} options\n    * @param {Function} [then]\n    */\n   Git.prototype.clean = function (mode, options, then) {\n      var handler = Git.trailingFunctionArgument(arguments);\n\n      if (typeof mode !== 'string' || !/[nf]/.test(mode)) {\n         return this.exec(function () {\n            handler && handler(new TypeError('Git clean mode parameter (\"n\" or \"f\") is required'));\n         });\n      }\n\n      if (/[^dfinqxX]/.test(mode)) {\n         return this.exec(function () {\n            handler && handler(new TypeError('Git clean unknown option found in ' + JSON.stringify(mode)));\n         });\n      }\n\n      var command = ['clean', '-' + mode];\n      if (Array.isArray(options)) {\n         command = command.concat(options);\n      }\n\n      if (command.some(interactiveMode)) {\n         return this.exec(function () {\n            handler && handler(new TypeError('Git clean interactive mode is not supported'));\n         });\n      }\n\n      return this._run(command, function (err, data) {\n         handler && handler(err, !err && data);\n      });\n\n      function interactiveMode (option) {\n         if (/^-[^\\-]/.test(option)) {\n            return option.indexOf('i') > 0;\n         }\n\n         return option === '--interactive';\n      }\n   };\n\n   /**\n    * Call a simple function at the next step in the chain.\n    * @param {Function} [then]\n    */\n   Git.prototype.exec = function (then) {\n      this._run([], function () {\n         typeof then === 'function' && then();\n      });\n      return this;\n   };\n\n   /**\n    * Deprecated means of adding a regular function call at the next step in the chain. Use the replacement\n    * Git#exec, the Git#then method will be removed in version 2.x\n    *\n    * @see exec\n    * @deprecated\n    */\n   Git.prototype.then = function (then) {\n      this._getLog(\n         'error', `\nGit#then is deprecated after version 1.72 and will be removed in version 2.x\nTo use promises switch to importing 'simple-git/promise'.`);\n\n      return this.exec(then);\n   };\n\n   /**\n    * Show commit logs from `HEAD` to the first commit.\n    * If provided between `options.from` and `options.to` tags or branch.\n    *\n    * Additionally you can provide options.file, which is the path to a file in your repository. Then only this file will be considered.\n    *\n    * To use a custom splitter in the log format, set `options.splitter` to be the string the log should be split on.\n    *\n    * Options can also be supplied as a standard options object for adding custom properties supported by the git log command.\n    * For any other set of options, supply options as an array of strings to be appended to the git log command.\n    *\n    * @param {Object|string[]} [options]\n    * @param {string} [options.from] The first commit to include\n    * @param {string} [options.to] The most recent commit to include\n    * @param {string} [options.file] A single file to include in the result\n    * @param {boolean} [options.multiLine] Optionally include multi-line commit messages\n    *\n    * @param {Function} [then]\n    */\n   Git.prototype.log = function (options, then) {\n      var handler = Git.trailingFunctionArgument(arguments);\n      var opt = (handler === then ? options : null) || {};\n\n      var splitter = opt.splitter || requireResponseHandler('ListLogSummary').SPLITTER;\n      var format = opt.format || {\n         hash: '%H',\n         date: '%ai',\n         message: '%s',\n         refs: '%D',\n         body: opt.multiLine ? '%B' : '%b',\n         author_name: '%aN',\n         author_email: '%ae'\n      };\n      var rangeOperator = (opt.symmetric !== false) ? '...' : '..';\n\n      var fields = Object.keys(format);\n      var formatstr = fields.map(function (k) {\n         return format[k];\n      }).join(splitter);\n      var suffix = [];\n      var command = [\"log\", \"--pretty=format:\"\n         + requireResponseHandler('ListLogSummary').START_BOUNDARY\n         + formatstr\n         + requireResponseHandler('ListLogSummary').COMMIT_BOUNDARY\n      ];\n\n      if (Array.isArray(opt)) {\n         command = command.concat(opt);\n         opt = {};\n      }\n      else if (typeof arguments[0] === \"string\" || typeof arguments[1] === \"string\") {\n         this._getLog('warn',\n            'Git#log: supplying to or from as strings is now deprecated, switch to an options configuration object');\n         opt = {\n            from: arguments[0],\n            to: arguments[1]\n         };\n      }\n\n      if (opt.n || opt['max-count']) {\n         command.push(\"--max-count=\" + (opt.n || opt['max-count']));\n      }\n\n      if (opt.from && opt.to) {\n         command.push(opt.from + rangeOperator + opt.to);\n      }\n\n      if (opt.file) {\n         suffix.push(\"--follow\", options.file);\n      }\n\n      'splitter n max-count file from to --pretty format symmetric multiLine'.split(' ').forEach(function (key) {\n         delete opt[key];\n      });\n\n      Git._appendOptions(command, opt);\n\n      return this._run(\n         command.concat(suffix),\n         Git._responseHandler(handler, 'ListLogSummary', [splitter, fields])\n      );\n   };\n\n   /**\n    * Clears the queue of pending commands and returns the wrapper instance for chaining.\n    *\n    * @returns {Git}\n    */\n   Git.prototype.clearQueue = function () {\n      this._runCache.length = 0;\n      return this;\n   };\n\n   /**\n    * Check if a pathname or pathnames are excluded by .gitignore\n    *\n    * @param {string|string[]} pathnames\n    * @param {Function} [then]\n    */\n   Git.prototype.checkIgnore = function (pathnames, then) {\n      var handler = Git.trailingFunctionArgument(arguments);\n      var command = [\"check-ignore\"];\n\n      if (handler !== pathnames) {\n         command = command.concat(pathnames);\n      }\n\n      return this._run(command, function (err, data) {\n         handler && handler(err, !err && this._parseCheckIgnore(data));\n      });\n   };\n\n   /**\n    * Validates that the current repo is a Git repo.\n    *\n    * @param {Function} [then]\n    */\n   Git.prototype.checkIsRepo = function (then) {\n      function onError (exitCode, stdErr, done, fail) {\n         if (exitCode === 128 && /(Not a git repository|Kein Git-Repository)/i.test(stdErr)) {\n            return done(false);\n         }\n\n         fail(stdErr);\n      }\n\n      function handler (err, isRepo) {\n         then && then(err, String(isRepo).trim() === 'true');\n      }\n\n      return this._run(['rev-parse', '--is-inside-work-tree'], handler, {onError: onError});\n   };\n\n   Git.prototype._rm = function (_files, options, then) {\n      var files = [].concat(_files);\n      var args = ['rm', options];\n      args.push.apply(args, files);\n\n      return this._run(args, function (err) {\n         then && then(err);\n      });\n   };\n\n   Git.prototype._parseCheckout = function (checkout) {\n      // TODO\n   };\n\n   /**\n    * Parser for the `check-ignore` command - returns each\n    * @param {string} [files]\n    * @returns {string[]}\n    */\n   Git.prototype._parseCheckIgnore = function (files) {\n      return files.split(/\\n/g).filter(Boolean).map(function (file) {\n         return file.trim()\n      });\n   };\n\n   /**\n    * Schedules the supplied command to be run, the command should not include the name of the git binary and should\n    * be an array of strings passed as the arguments to the git binary.\n    *\n    * @param {string[]} command\n    * @param {Function} then\n    * @param {Object} [opt]\n    * @param {boolean} [opt.concatStdErr=false] Optionally concatenate stderr output into the stdout\n    * @param {boolean} [opt.format=\"utf-8\"] The format to use when reading the content of stdout\n    * @param {Function} [opt.onError] Optional error handler for this command - can be used to allow non-clean exits\n    *                                  without killing the remaining stack of commands\n    * @param {number} [opt.onError.exitCode]\n    * @param {string} [opt.onError.stdErr]\n    *\n    * @returns {Git}\n    */\n   Git.prototype._run = function (command, then, opt) {\n      if (typeof command === \"string\") {\n         command = command.split(\" \");\n      }\n      this._runCache.push([command, then, opt || {}]);\n      this._schedule();\n\n      return this;\n   };\n\n   Git.prototype._schedule = function () {\n      if (!this._childProcess && this._runCache.length) {\n         var git = this;\n         var Buffer = git.Buffer;\n         var task = git._runCache.shift();\n\n         var command = task[0];\n         var then = task[1];\n         var options = task[2];\n\n         debug(command);\n\n         var result = deferred();\n\n         var attempted = false;\n         var attemptClose = function attemptClose (e) {\n\n            // closing when there is content, terminate immediately\n            if (attempted || stdErr.length || stdOut.length) {\n               result.resolve(e);\n               attempted = true;\n            }\n\n            // first attempt at closing but no content yet, wait briefly for the close/exit that may follow\n            if (!attempted) {\n               attempted = true;\n               setTimeout(attemptClose.bind(this, e), 50);\n            }\n\n         };\n\n         var stdOut = [];\n         var stdErr = [];\n         var spawned = git.ChildProcess.spawn(git._command, command.slice(0), {\n            cwd: git._baseDir,\n            env: git._env,\n            windowsHide: true\n         });\n\n         spawned.stdout.on('data', function (buffer) {\n            stdOut.push(buffer);\n         });\n\n         spawned.stderr.on('data', function (buffer) {\n            stdErr.push(buffer);\n         });\n\n         spawned.on('error', function (err) {\n            stdErr.push(Buffer.from(err.stack, 'ascii'));\n         });\n\n         spawned.on('close', attemptClose);\n         spawned.on('exit', attemptClose);\n\n         result.promise.then(function (exitCode) {\n            function done (output) {\n               then.call(git, null, output);\n            }\n\n            function fail (error) {\n               Git.fail(git, error, then);\n            }\n\n            delete git._childProcess;\n\n            if (exitCode && stdErr.length && options.onError) {\n               options.onError(exitCode, Buffer.concat(stdErr).toString('utf-8'), done, fail);\n            }\n            else if (exitCode && stdErr.length) {\n               fail(Buffer.concat(stdErr).toString('utf-8'));\n            }\n            else {\n               if (options.concatStdErr) {\n                  [].push.apply(stdOut, stdErr);\n               }\n\n               var stdOutput = Buffer.concat(stdOut);\n               if (options.format !== 'buffer') {\n                  stdOutput = stdOutput.toString(options.format || 'utf-8');\n               }\n\n               done(stdOutput);\n            }\n\n            process.nextTick(git._schedule.bind(git));\n         });\n\n         git._childProcess = spawned;\n\n         if (git._outputHandler) {\n            git._outputHandler(command[0], git._childProcess.stdout, git._childProcess.stderr);\n         }\n      }\n   };\n\n   /**\n    * Handles an exception in the processing of a command.\n    */\n   Git.fail = function (git, error, handler) {\n      git._getLog('error', error);\n      git._runCache.length = 0;\n      if (typeof handler === 'function') {\n         handler.call(git, error, null);\n      }\n   };\n\n   /**\n    * Given any number of arguments, returns the last argument if it is a function, otherwise returns null.\n    * @returns {Function|null}\n    */\n   Git.trailingFunctionArgument = function (args) {\n      var trailing = args[args.length - 1];\n      return (typeof trailing === \"function\") ? trailing : null;\n   };\n\n   /**\n    * Given any number of arguments, returns the trailing options argument, ignoring a trailing function argument\n    * if there is one. When not found, the return value is null.\n    * @returns {Object|null}\n    */\n   Git.trailingOptionsArgument = function (args) {\n      var options = args[(args.length - (Git.trailingFunctionArgument(args) ? 2 : 1))];\n      return Object.prototype.toString.call(options) === '[object Object]' ? options : null;\n   };\n\n   /**\n    * Given any number of arguments, returns the trailing options array argument, ignoring a trailing function argument\n    * if there is one. When not found, the return value is an empty array.\n    * @returns {Array}\n    */\n   Git.trailingArrayArgument = function (args) {\n      var options = args[(args.length - (Git.trailingFunctionArgument(args) ? 2 : 1))];\n      return Object.prototype.toString.call(options) === '[object Array]' ? options : [];\n   };\n\n   /**\n    * Mutates the supplied command array by merging in properties in the options object. When the\n    * value of the item in the options object is a string it will be concatenated to the key as\n    * a single `name=value` item, otherwise just the name will be used.\n    *\n    * @param {string[]} command\n    * @param {Object} options\n    * @private\n    */\n   Git._appendOptions = function (command, options) {\n      if (options === null) {\n         return;\n      }\n\n      Object.keys(options).forEach(function (key) {\n         var value = options[key];\n         if (typeof value === 'string') {\n            command.push(key + '=' + value);\n         }\n         else {\n            command.push(key);\n         }\n      });\n   };\n\n   /**\n    * Given the type of response and the callback to receive the parsed response,\n    * uses the correct parser and calls back the callback.\n    *\n    * @param {Function} callback\n    * @param {string} [type]\n    * @param {Object[]} [args]\n    *\n    * @private\n    */\n   Git._responseHandler = function (callback, type, args) {\n      return function (error, data) {\n         if (typeof callback !== 'function') {\n            return;\n         }\n\n         if (error) {\n            return callback(error, null);\n         }\n\n         if (!type) {\n            return callback(null, data);\n         }\n\n         var handler = requireResponseHandler(type);\n         var result = handler.parse.apply(handler, [data].concat(args === undefined ? [] : args));\n\n         callback(null, result);\n      };\n\n   };\n\n   /**\n    * Marks the git instance as having had a fatal exception by clearing the pending queue of tasks and\n    * logging to the console.\n    *\n    * @param git\n    * @param error\n    * @param callback\n    */\n   Git.exception = function (git, error, callback) {\n      git._runCache.length = 0;\n      if (typeof callback === 'function') {\n         callback(error instanceof Error ? error : new Error(error));\n      }\n\n      git._getLog('error', error);\n   };\n\n   module.exports = Git;\n\n   /**\n    * Requires and returns a response handler based on its named type\n    * @param {string} type\n    */\n   function requireResponseHandler (type) {\n      return responses[type];\n   }\n\n}());\n","\nvar Git = require('./git');\n\nmodule.exports = function (baseDir) {\n\n   var dependencies = require('./util/dependencies');\n\n   if (baseDir && !dependencies.exists(baseDir, dependencies.exists.FOLDER)) {\n       throw new Error(\"Cannot use simple-git on a directory that does not exist.\");\n    }\n\n    return new Git(baseDir || process.cwd(), dependencies.childProcess(), dependencies.buffer());\n};\n\n","\nmodule.exports = BranchDeletion;\n\nfunction BranchDeletion (branch, hash) {\n   this.branch = branch;\n   this.hash = hash;\n   this.success = hash !== null;\n}\n\nBranchDeletion.deleteSuccessRegex = /(\\S+)\\s+\\(\\S+\\s([^\\)]+)\\)/;\nBranchDeletion.deleteErrorRegex = /^error[^']+'([^']+)'/;\n\nBranchDeletion.parse = function (data, asArray) {\n   var result;\n   var branchDeletions = data.trim().split('\\n').map(function (line) {\n         if (result = BranchDeletion.deleteSuccessRegex.exec(line)) {\n            return new BranchDeletion(result[1], result[2]);\n         }\n         else if (result = BranchDeletion.deleteErrorRegex.exec(line)) {\n            return new BranchDeletion(result[1], null);\n         }\n      })\n      .filter(Boolean);\n\n   return asArray ? branchDeletions : branchDeletions.pop();\n};\n","\nmodule.exports = BranchSummary;\n\nfunction BranchSummary () {\n   this.detached = false;\n   this.current = '';\n   this.all = [];\n   this.branches = {};\n}\n\nBranchSummary.prototype.push = function (current, detached, name, commit, label) {\n   if (current) {\n      this.detached = detached;\n      this.current = name;\n   }\n   this.all.push(name);\n   this.branches[name] = {\n      current: current,\n      name: name,\n      commit: commit,\n      label: label\n   };\n};\n\nBranchSummary.detachedRegex = /^(\\*?\\s+)\\((?:HEAD )?detached (?:from|at) (\\S+)\\)\\s+([a-z0-9]+)\\s(.*)$/;\nBranchSummary.branchRegex = /^(\\*?\\s+)(\\S+)\\s+([a-z0-9]+)\\s(.*)$/;\n\nBranchSummary.parse = function (commit) {\n   var branchSummary = new BranchSummary();\n\n   commit.split('\\n')\n      .forEach(function (line) {\n         var detached = true;\n         var branch = BranchSummary.detachedRegex.exec(line);\n         if (!branch) {\n            detached = false;\n            branch = BranchSummary.branchRegex.exec(line);\n         }\n\n         if (branch) {\n            branchSummary.push(\n               branch[1].charAt(0) === '*',\n               detached,\n               branch[2],\n               branch[3],\n               branch[4]\n            );\n         }\n      });\n\n   return branchSummary;\n};\n","\nmodule.exports = CommitSummary;\n\nfunction CommitSummary () {\n   this.branch = '';\n   this.commit = '';\n   this.summary = {\n      changes: 0,\n      insertions: 0,\n      deletions: 0\n   };\n   this.author = null;\n}\n\nvar COMMIT_BRANCH_MESSAGE_REGEX = /\\[([^\\s]+) ([^\\]]+)/;\nvar COMMIT_AUTHOR_MESSAGE_REGEX = /\\s*Author:\\s(.+)/i;\n\nfunction setBranchFromCommit (commitSummary, commitData) {\n   if (commitData) {\n      commitSummary.branch = commitData[1];\n      commitSummary.commit = commitData[2];\n   }\n}\n\nfunction setSummaryFromCommit (commitSummary, commitData) {\n   if (commitSummary.branch && commitData) {\n      commitSummary.summary.changes = commitData[1] || 0;\n      commitSummary.summary.insertions = commitData[2] || 0;\n      commitSummary.summary.deletions = commitData[3] || 0;\n   }\n}\n\nfunction setAuthorFromCommit (commitSummary, commitData) {\n   var parts = commitData[1].split('<');\n   var email = parts.pop();\n\n   if (email.indexOf('@') <= 0) {\n      return;\n   }\n\n   commitSummary.author = {\n      email: email.substr(0, email.length - 1),\n      name: parts.join('<').trim()\n   };\n}\n\nCommitSummary.parse = function (commit) {\n   var lines = commit.trim().split('\\n');\n   var commitSummary = new CommitSummary();\n\n   setBranchFromCommit(commitSummary, COMMIT_BRANCH_MESSAGE_REGEX.exec(lines.shift()));\n\n   if (COMMIT_AUTHOR_MESSAGE_REGEX.test(lines[0])) {\n      setAuthorFromCommit(commitSummary, COMMIT_AUTHOR_MESSAGE_REGEX.exec(lines.shift()));\n   }\n\n   setSummaryFromCommit(commitSummary, /(\\d+)[^,]*(?:,\\s*(\\d+)[^,]*)?(?:,\\s*(\\d+))?/g.exec(lines.shift()));\n\n   return commitSummary;\n};\n","\nmodule.exports = DiffSummary;\n\n/**\n * The DiffSummary is returned as a response to getting `git().status()`\n *\n * @constructor\n */\nfunction DiffSummary () {\n   this.files = [];\n   this.insertions = 0;\n   this.deletions = 0;\n   this.changed = 0;\n}\n\n/**\n * Number of lines added\n * @type {number}\n */\nDiffSummary.prototype.insertions = 0;\n\n/**\n * Number of lines deleted\n * @type {number}\n */\nDiffSummary.prototype.deletions = 0;\n\n/**\n * Number of files changed\n * @type {number}\n */\nDiffSummary.prototype.changed = 0;\n\nDiffSummary.parse = function (text) {\n   var line, handler;\n\n   var lines = text.trim().split('\\n');\n   var status = new DiffSummary();\n\n   var summary = lines.pop();\n   if (summary) {\n      summary.trim().split(', ').forEach(function (text) {\n         var summary = /(\\d+)\\s([a-z]+)/.exec(text);\n         if (!summary) {\n            return;\n         }\n\n         if (/files?/.test(summary[2])) {\n            status.changed = parseInt(summary[1], 10);\n         }\n         else {\n            status[summary[2].replace(/s$/, '') + 's'] = parseInt(summary[1], 10);\n         }\n      });\n   }\n\n   while (line = lines.shift()) {\n      textFileChange(line, status.files) || binaryFileChange(line, status.files);\n   }\n\n   return status;\n};\n\nfunction textFileChange (line, files) {\n   line = line.trim().match(/^(.+)\\s+\\|\\s+(\\d+)(\\s+[+\\-]+)?$/);\n\n   if (line) {\n      var alterations = (line[3] || '').trim();\n      files.push({\n         file: line[1].trim(),\n         changes: parseInt(line[2], 10),\n         insertions: alterations.replace(/-/g, '').length,\n         deletions: alterations.replace(/\\+/g, '').length,\n         binary: false\n      });\n\n      return true;\n   }\n}\n\nfunction binaryFileChange (line, files) {\n   line = line.match(/^(.+) \\|\\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)$/);\n   if (line) {\n      files.push({\n         file: line[1].trim(),\n         before: +line[2],\n         after: +line[3],\n         binary: true\n      });\n      return true;\n   }\n}\n","'use strict';\n\nfunction FetchSummary (raw) {\n   this.raw = raw;\n\n   this.remote = null;\n   this.branches = [];\n   this.tags = [];\n}\n\nFetchSummary.parsers = [\n   [\n      /From (.+)$/, function (fetchSummary, matches) {\n         fetchSummary.remote = matches[0];\n      }\n   ],\n   [\n      /\\* \\[new branch\\]\\s+(\\S+)\\s*\\-> (.+)$/, function (fetchSummary, matches) {\n         fetchSummary.branches.push({\n            name: matches[0],\n            tracking: matches[1]\n         });\n      }\n   ],\n   [\n      /\\* \\[new tag\\]\\s+(\\S+)\\s*\\-> (.+)$/, function (fetchSummary, matches) {\n         fetchSummary.tags.push({\n            name: matches[0],\n            tracking: matches[1]\n         });\n      }\n   ]\n];\n\nFetchSummary.parse = function (data) {\n   var fetchSummary = new FetchSummary(data);\n\n   String(data)\n      .trim()\n      .split('\\n')\n      .forEach(function (line) {\n         var original = line.trim();\n         FetchSummary.parsers.some(function (parser) {\n            var parsed = parser[0].exec(original);\n            if (parsed) {\n               parser[1](fetchSummary, parsed.slice(1));\n               return true;\n            }\n         });\n      });\n\n   return fetchSummary;\n};\n\nmodule.exports = FetchSummary;\n","'use strict';\n\nfunction FileStatusSummary (path, index, working_dir) {\n   this.path = path;\n   this.index = index;\n   this.working_dir = working_dir;\n\n   if ('R' === index + working_dir) {\n      var detail = FileStatusSummary.fromPathRegex.exec(path) || [null, path, path];\n      this.from = detail[1];\n      this.path = detail[2];\n   }\n}\n\nFileStatusSummary.fromPathRegex = /^(.+) -> (.+)$/;\n\nFileStatusSummary.prototype = {\n   path: '',\n   from: ''\n};\n\nmodule.exports = FileStatusSummary;\n","\nmodule.exports = ListLogSummary;\n\nvar DiffSummary = require('./DiffSummary');\n\n/**\n * The ListLogSummary is returned as a response to getting `git().log()` or `git().stashList()`\n *\n * @constructor\n */\nfunction ListLogSummary (all) {\n   this.all = all;\n   this.latest = all.length && all[0] || null;\n   this.total = all.length;\n}\n\n/**\n * Detail for each of the log lines\n * @type {ListLogLine[]}\n */\nListLogSummary.prototype.all = null;\n\n/**\n * Most recent entry in the log\n * @type {ListLogLine}\n */\nListLogSummary.prototype.latest = null;\n\n/**\n * Number of items in the log\n * @type {number}\n */\nListLogSummary.prototype.total = 0;\n\nfunction ListLogLine (line, fields) {\n   for (var k = 0; k < fields.length; k++) {\n      this[fields[k]] = line[k] || '';\n   }\n}\n\n/**\n * When the log was generated with a summary, the `diff` property contains as much detail\n * as was provided in the log (whether generated with `--stat` or `--shortstat`.\n * @type {DiffSummary}\n */\nListLogLine.prototype.diff = null;\n\nListLogSummary.START_BOUNDARY = 'òòòòòò ';\n\nListLogSummary.COMMIT_BOUNDARY = ' òò';\n\nListLogSummary.SPLITTER = ' ò ';\n\nListLogSummary.parse = function (text, splitter, fields) {\n   fields = fields || ['hash', 'date', 'message', 'refs', 'author_name', 'author_email'];\n   return new ListLogSummary(\n      text\n         .trim()\n         .split(ListLogSummary.START_BOUNDARY)\n         .filter(function(item) { return !!item.trim(); })\n         .map(function (item) {\n            var lineDetail = item.trim().split(ListLogSummary.COMMIT_BOUNDARY);\n            var listLogLine = new ListLogLine(lineDetail[0].trim().split(splitter), fields);\n\n            if (lineDetail.length > 1 && !!lineDetail[1].trim()) {\n               listLogLine.diff = DiffSummary.parse(lineDetail[1]);\n            }\n\n            return listLogLine;\n         })\n   );\n};\n","module.exports = MergeSummary;\nmodule.exports.MergeConflict = MergeConflict;\n\nvar PullSummary = require('./PullSummary');\n\nfunction MergeConflict (reason, file, meta) {\n   this.reason = reason;\n   this.file = file;\n   if (meta) {\n      this.meta = meta;\n   }\n}\n\nMergeConflict.prototype.meta = null;\n\nMergeConflict.prototype.toString = function () {\n   return this.file + ':' + this.reason;\n};\n\nfunction MergeSummary () {\n   PullSummary.call(this);\n\n   this.conflicts = [];\n   this.merges = [];\n}\n\nMergeSummary.prototype = Object.create(PullSummary.prototype);\n\nMergeSummary.prototype.result = 'success';\n\nMergeSummary.prototype.toString = function () {\n   if (this.conflicts.length) {\n      return 'CONFLICTS: ' + this.conflicts.join(', ');\n   }\n   return 'OK';\n};\n\nObject.defineProperty(MergeSummary.prototype, 'failed', {\n   get: function () {\n      return this.conflicts.length > 0;\n   }\n});\n\nMergeSummary.parsers = [\n   {\n      test: /^Auto-merging\\s+(.+)$/,\n      handle: function (result, mergeSummary) {\n         mergeSummary.merges.push(result[1]);\n      }\n   },\n   {\n      // Parser for standard merge conflicts\n      test: /^CONFLICT\\s+\\((.+)\\): Merge conflict in (.+)$/,\n      handle: function (result, mergeSummary) {\n         mergeSummary.conflicts.push(new MergeConflict(result[1], result[2]));\n      }\n   },\n   {\n      // Parser for modify/delete merge conflicts (modified by us/them, deleted by them/us)\n      test: /^CONFLICT\\s+\\((.+\\/delete)\\): (.+) deleted in (.+) and/,\n      handle: function (result, mergeSummary) {\n         mergeSummary.conflicts.push(\n            new MergeConflict(result[1], result[2], {deleteRef: result[3]})\n         );\n      }\n   },\n   {\n      // Catch-all parser for unknown/unparsed conflicts\n      test: /^CONFLICT\\s+\\((.+)\\):/,\n      handle: function (result, mergeSummary) {\n         mergeSummary.conflicts.push(new MergeConflict(result[1], null));\n      }\n   },\n   {\n      test: /^Automatic merge failed;\\s+(.+)$/,\n      handle: function (result, mergeSummary) {\n         mergeSummary.reason = mergeSummary.result = result[1];\n      }\n   }\n];\n\nMergeSummary.parse = function (output) {\n   let mergeSummary = new MergeSummary();\n\n   output.trim().split('\\n').forEach(function (line) {\n      for (var i = 0, iMax = MergeSummary.parsers.length; i < iMax; i++) {\n         let parser = MergeSummary.parsers[i];\n\n         var result = parser.test.exec(line);\n         if (result) {\n            parser.handle(result, mergeSummary);\n            break;\n         }\n      }\n   });\n\n   let pullSummary = PullSummary.parse(output);\n   if (pullSummary.summary.changes) {\n      Object.assign(mergeSummary, pullSummary);\n   }\n\n   return mergeSummary;\n};\n","\nmodule.exports = MoveSummary;\n\n/**\n * The MoveSummary is returned as a response to getting `git().status()`\n *\n * @constructor\n */\nfunction MoveSummary () {\n   this.moves = [];\n   this.sources = {};\n}\n\nMoveSummary.SUMMARY_REGEX = /^Renaming (.+) to (.+)$/;\n\nMoveSummary.parse = function (text) {\n   var lines = text.split('\\n');\n   var summary = new MoveSummary();\n\n   for (var i = 0, iMax = lines.length, line; i < iMax; i++) {\n      line = MoveSummary.SUMMARY_REGEX.exec(lines[i].trim());\n\n      if (line) {\n         summary.moves.push({\n            from: line[1],\n            to: line[2]\n         });\n      }\n   }\n\n   return summary;\n};\n","\nmodule.exports = PullSummary;\n\n/**\n * The PullSummary is returned as a response to getting `git().pull()`\n *\n * @constructor\n */\nfunction PullSummary () {\n   this.files = [];\n   this.insertions = {};\n   this.deletions = {};\n\n   this.summary = {\n      changes: 0,\n      insertions: 0,\n      deletions: 0\n   };\n\n   this.created = [];\n   this.deleted = [];\n}\n\n/**\n * Array of files that were created\n * @type {string[]}\n */\nPullSummary.prototype.created = null;\n\n/**\n * Array of files that were deleted\n * @type {string[]}\n */\nPullSummary.prototype.deleted = null;\n\n/**\n * The array of file paths/names that have been modified in any part of the pulled content\n * @type {string[]}\n */\nPullSummary.prototype.files = null;\n\n/**\n * A map of file path to number to show the number of insertions per file.\n * @type {Object}\n */\nPullSummary.prototype.insertions = null;\n\n/**\n * A map of file path to number to show the number of deletions per file.\n * @type {Object}\n */\nPullSummary.prototype.deletions = null;\n\n/**\n * Overall summary of changes/insertions/deletions and the number associated with each\n * across all content that was pulled.\n * @type {Object}\n */\nPullSummary.prototype.summary = null;\n\nPullSummary.FILE_UPDATE_REGEX = /^\\s*(.+?)\\s+\\|\\s+\\d+\\s*(\\+*)(-*)/;\nPullSummary.SUMMARY_REGEX = /(\\d+)\\D+((\\d+)\\D+\\(\\+\\))?(\\D+(\\d+)\\D+\\(-\\))?/;\nPullSummary.ACTION_REGEX = /(create|delete) mode \\d+ (.+)/;\n\nPullSummary.parse = function (text) {\n   var pullSummary = new PullSummary;\n   var lines = text.split('\\n');\n\n   while (lines.length) {\n      var line = lines.shift().trim();\n      if (!line) {\n         continue;\n      }\n\n      update(pullSummary, line) || summary(pullSummary, line) || action(pullSummary, line);\n   }\n\n   return pullSummary;\n};\n\nfunction update (pullSummary, line) {\n\n   var update = PullSummary.FILE_UPDATE_REGEX.exec(line);\n   if (!update) {\n      return false;\n   }\n\n   pullSummary.files.push(update[1]);\n\n   var insertions = update[2].length;\n   if (insertions) {\n      pullSummary.insertions[update[1]] = insertions;\n   }\n\n   var deletions = update[3].length;\n   if (deletions) {\n      pullSummary.deletions[update[1]] = deletions;\n   }\n\n   return true;\n}\n\nfunction summary (pullSummary, line) {\n   if (!pullSummary.files.length) {\n      return false;\n   }\n\n   var update = PullSummary.SUMMARY_REGEX.exec(line);\n   if (!update || (update[3] === undefined && update[5] === undefined)) {\n      return false;\n   }\n\n   pullSummary.summary.changes = +update[1] || 0;\n   pullSummary.summary.insertions = +update[3] || 0;\n   pullSummary.summary.deletions = +update[5] || 0;\n\n   return true;\n}\n\nfunction action (pullSummary, line) {\n\n   var match = PullSummary.ACTION_REGEX.exec(line);\n   if (!match) {\n      return false;\n   }\n\n   var file = match[2];\n\n   if (pullSummary.files.indexOf(file) < 0) {\n      pullSummary.files.push(file);\n   }\n\n   var container = (match[1] === 'create') ? pullSummary.created : pullSummary.deleted;\n   container.push(file);\n\n   return true;\n}\n","\n\n\nvar FileStatusSummary = require('./FileStatusSummary');\n\nmodule.exports = StatusSummary;\n\n/**\n * The StatusSummary is returned as a response to getting `git().status()`\n *\n * @constructor\n */\nfunction StatusSummary () {\n   this.not_added = [];\n   this.conflicted = [];\n   this.created = [];\n   this.deleted = [];\n   this.modified = [];\n   this.renamed = [];\n   this.files = [];\n   this.staged = [];\n}\n\n\n/**\n * Number of commits ahead of the tracked branch\n * @type {number}\n */\nStatusSummary.prototype.ahead = 0;\n\n/**\n * Number of commits behind the tracked branch\n * @type {number}\n */\nStatusSummary.prototype.behind = 0;\n\n/**\n * Name of the current branch\n * @type {null}\n */\nStatusSummary.prototype.current = null;\n\n/**\n * Name of the branch being tracked\n * @type {string}\n */\nStatusSummary.prototype.tracking = null;\n\n/**\n * All files represented as an array of objects containing the `path` and status in `index` and\n * in the `working_dir`.\n *\n * @type {Array}\n */\nStatusSummary.prototype.files = null;\n\n/**\n * Gets whether this StatusSummary represents a clean working branch.\n *\n * @return {boolean}\n */\nStatusSummary.prototype.isClean = function () {\n   return 0 === Object.keys(this).filter(function (name) {\n      return Array.isArray(this[name]) && this[name].length;\n   }, this).length;\n};\n\nStatusSummary.parsers = {\n   '##': function (line, status) {\n      var aheadReg = /ahead (\\d+)/;\n      var behindReg = /behind (\\d+)/;\n      var currentReg = /^(.+?(?=(?:\\.{3}|\\s|$)))/;\n      var trackingReg = /\\.{3}(\\S*)/;\n      var regexResult;\n\n      regexResult = aheadReg.exec(line);\n      status.ahead = regexResult && +regexResult[1] || 0;\n\n      regexResult = behindReg.exec(line);\n      status.behind = regexResult && +regexResult[1] || 0;\n\n      regexResult = currentReg.exec(line);\n      status.current = regexResult && regexResult[1];\n\n      regexResult = trackingReg.exec(line);\n      status.tracking = regexResult && regexResult[1];\n   },\n\n   '??': function (line, status) {\n      status.not_added.push(line);\n   },\n\n   A: function (line, status) {\n      status.created.push(line);\n   },\n\n   AM: function (line, status) {\n      status.created.push(line);\n   },\n\n   D: function (line, status) {\n      status.deleted.push(line);\n   },\n\n   M: function (line, status, indexState) {\n      status.modified.push(line);\n\n      if (indexState === 'M') {\n         status.staged.push(line);\n      }\n   },\n\n   R: function (line, status) {\n      var detail = /^(.+) -> (.+)$/.exec(line) || [null, line, line];\n\n      status.renamed.push({\n         from: detail[1],\n         to: detail[2]\n      });\n   },\n\n   UU: function (line, status) {\n      status.conflicted.push(line);\n   }\n};\n\nStatusSummary.parsers.MM = StatusSummary.parsers.M;\n\n/* Map all unmerged status code combinations to UU to mark as conflicted */\nStatusSummary.parsers.AA = StatusSummary.parsers.UU;\nStatusSummary.parsers.UD = StatusSummary.parsers.UU;\nStatusSummary.parsers.DU = StatusSummary.parsers.UU;\nStatusSummary.parsers.DD = StatusSummary.parsers.UU;\nStatusSummary.parsers.AU = StatusSummary.parsers.UU;\nStatusSummary.parsers.UA = StatusSummary.parsers.UU;\n\nStatusSummary.parse = function (text) {\n   var file;\n   var lines = text.trim().split('\\n');\n   var status = new StatusSummary();\n\n   for (var i = 0, l = lines.length; i < l; i++) {\n      file = splitLine(lines[i]);\n\n      if (!file) {\n         continue;\n      }\n\n      if (file.handler) {\n         file.handler(file.path, status, file.index, file.workingDir);\n      }\n\n      if (file.code !== '##') {\n         status.files.push(new FileStatusSummary(file.path, file.index, file.workingDir));\n      }\n   }\n\n   return status;\n};\n\n\nfunction splitLine (lineStr) {\n   var line = lineStr.trim().match(/(..?)(\\s+)(.*)/);\n   if (!line || !line[1].trim()) {\n      line = lineStr.trim().match(/(..?)\\s+(.*)/);\n   }\n\n   if (!line) {\n      return;\n   }\n\n   var code = line[1];\n   if (line[2].length > 1) {\n      code += ' ';\n   }\n   if (code.length === 1 && line[2].length === 1) {\n      code = ' ' + code;\n   }\n\n   return {\n      raw: code,\n      code: code.trim(),\n      index: code.charAt(0),\n      workingDir: code.charAt(1),\n      handler: StatusSummary.parsers[code.trim()],\n      path: line[3]\n   };\n}\n","\nmodule.exports = TagList;\n\nfunction TagList (tagList, latest) {\n   this.latest = latest;\n   this.all = tagList\n}\n\nTagList.parse = function (data, customSort) {\n   var number = function (input) {\n      if (typeof input === 'string') {\n         return parseInt(input.replace(/^\\D+/g, ''), 10) || 0;\n      }\n\n      return 0;\n   };\n\n   var tags = data\n      .trim()\n      .split('\\n')\n      .map(function (item) { return item.trim(); })\n      .filter(Boolean);\n\n   if (!customSort) {\n      tags.sort(function (tagA, tagB) {\n         var partsA = tagA.split('.');\n         var partsB = tagB.split('.');\n\n         if (partsA.length === 1 || partsB.length === 1) {\n            return tagA - tagB > 0 ? 1 : -1;\n         }\n\n         for (var i = 0, l = Math.max(partsA.length, partsB.length); i < l; i++) {\n            var a = number(partsA[i]);\n            var b = number(partsB[i]);\n\n            var diff = a - b;\n            if (diff) {\n               return diff > 0 ? 1 : -1;\n            }\n         }\n\n         return 0;\n      });\n   }\n\n   var latest = customSort ? tags[0] : tags.filter(function (tag) { return tag.indexOf('.') >= 0; }).pop();\n\n   return new TagList(tags, latest);\n};\n","\nmodule.exports = {\n   BranchDeleteSummary: require('./BranchDeleteSummary'),\n   BranchSummary: require('./BranchSummary'),\n   CommitSummary: require('./CommitSummary'),\n   DiffSummary: require('./DiffSummary'),\n   FetchSummary: require('./FetchSummary'),\n   FileStatusSummary: require('./FileStatusSummary'),\n   ListLogSummary: require('./ListLogSummary'),\n   MergeSummary: require('./MergeSummary'),\n   MoveSummary: require('./MoveSummary'),\n   PullSummary: require('./PullSummary'),\n   StatusSummary: require('./StatusSummary'),\n   TagList: require('./TagList'),\n};\n","\nmodule.exports = function deferred () {\n   var d = {};\n   d.promise = new Promise(function (resolve, reject) {\n      d.resolve = resolve;\n      d.reject = reject\n   });\n\n   return d;\n};\n","/**\n * Exports the utilities `simple-git` depends upon to allow for mocking during a test\n */\nmodule.exports = {\n\n   buffer: function () { return require('buffer').Buffer; },\n\n   childProcess: function () { return require('child_process'); },\n\n   exists: require('./exists')\n\n};\n","\nvar fs = require('fs');\n\nfunction exists (path, isFile, isDirectory) {\n   try {\n      var matches = false;\n      var stat = fs.statSync(path);\n\n      matches = matches || isFile && stat.isFile();\n      matches = matches || isDirectory && stat.isDirectory();\n\n      return matches;\n   }\n   catch (e) {\n      if (e.code === 'ENOENT') {\n         return false;\n      }\n\n      throw e;\n   }\n}\n\nmodule.exports = function (path, type) {\n   if (!type) {\n      return exists(path, true, true);\n   }\n\n   return exists(path, type & 1, type & 2);\n};\n\nmodule.exports.FILE = 1;\n\nmodule.exports.FOLDER = 2;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","const fs = require('fs-extra');\r\nconst path = require('path');\r\nconst md5File = require('md5-file');\r\n\r\nconst {\r\n    assets: dirAssets,\r\n    bgimgs: dirBgimgs,\r\n    static: dirStatic\r\n} = require('../../src/directories');\r\nconst channel = require('../../src/channel');\r\nconst spinner = require('../../src/scripts/commons/spinner');\r\nconst Progress = require('../../src/scripts/commons/progress');\r\n\r\n/**\r\n * 准备静态资源目录，用以直接复制到打包目录\r\n */\r\nmodule.exports = async (kootConfig = {}) => {\r\n    const title = 'Preparing static files...';\r\n    const waiting = spinner(title);\r\n\r\n    await fs.ensureDir(dirStatic);\r\n\r\n    const list = [\r\n        {\r\n            from: dirBgimgs,\r\n            to: 'bgimgs'\r\n        },\r\n        {\r\n            from: path.resolve(dirAssets, `logos`, channel, `32.ico`),\r\n            to: 'favicon.ico'\r\n        },\r\n        {\r\n            from: path.resolve(__dirname, '../../src/assets/public', channel),\r\n            to: ''\r\n        }\r\n    ];\r\n\r\n    list.forEach(o => {\r\n        o.to = path.resolve(dirStatic, o.to);\r\n    });\r\n\r\n    waiting.stop();\r\n    const bar = new Progress({\r\n        title,\r\n        total: list.length\r\n    });\r\n\r\n    for (const { from, to } of list) {\r\n        if (!fs.existsSync(from)) continue;\r\n        else if (!fs.existsSync(to)) await fs.copy(from, to);\r\n        else if (\r\n            fs.lstatSync(from).isDirectory() ||\r\n            fs.lstatSync(to).isDirectory()\r\n        )\r\n            await fs.copy(from, to);\r\n        else if (md5File.sync(from) !== md5File.sync(to))\r\n            await fs.copy(from, to);\r\n        bar.tick();\r\n    }\r\n\r\n    bar.complete();\r\n};\r\n","import fs from 'fs-extra';\r\nimport path from 'path';\r\nimport getDistPath from 'koot/utils/get-dist-path';\r\nimport getClientFilePath from 'koot/utils/get-client-file-path';\r\nimport getChunkmap from 'koot/utils/get-chunkmap';\r\n// const readFile = require('koot/utils/read-client-file')\r\n\r\nconst pathDist = getDistPath();\r\nconst manifestLastModified = new Map();\r\n\r\nexport default {\r\n    manifest: (template, state) => {\r\n        const localeId = state.localeId;\r\n        const filename = `manifest-${localeId}.json`;\r\n        const { '.public': publicPath } = getChunkmap(localeId);\r\n        if (!manifestLastModified.has(localeId))\r\n            manifestLastModified.set(\r\n                localeId,\r\n                fs\r\n                    .statSync(path.join(pathDist, publicPath, filename))\r\n                    .mtime.valueOf()\r\n            );\r\n        return `<link rel=\"manifest\" href=\"/${filename}?${manifestLastModified.get(\r\n            localeId\r\n        ) || ''}\">`;\r\n    },\r\n\r\n    svgIcons: `<div class=\"hide\">${__SVG_SYMBOLS__}</div>`,\r\n\r\n    definePath: (template, state) =>\r\n        `<script>` +\r\n        // `window.__CRITICAL_EXTRA_OLD_IE_FILENAME__ = \"${getClientFilePath(\r\n        //     'polyfill.js',\r\n        //     state.localeId\r\n        // )}\";` +\r\n        `window.__SERVICE_WORKER_FILENAME__ = \"${getClientFilePath(\r\n            'service-worker.js',\r\n            state.localeId\r\n        )}\";` +\r\n        `</script>`\r\n};\r\n","export default async (/*app*/) => {};\r\n","const proxy = require('koa-proxies');\n\nconst { portAkigumo, devPortAkigumo } = require('../../../koot.config');\n\nexport default async (app) => {\n    app.use(\n        proxy('/pics', {\n            target: __DEV__\n                ? `http://localhost:${devPortAkigumo}`\n                : process.env.YUUBARI_LOCAL_RUN\n                ? `https://akigumo.fleet.moe`\n                : `http://localhost:${portAkigumo}`,\n            changeOrigin: true,\n            rewrite: (path) => path.replace(/^\\/pics\\//, '/'),\n            logs: false,\n        })\n    );\n};\n","const fs = require('fs-extra');\r\nconst path = require('path');\r\nconst getDistPath = require('koot/utils/get-dist-path');\r\n\r\n/**\r\n * 在服务器端打包完成后\r\n * @async\r\n */\r\nconst buildServerAfter = async () => {\r\n    if (\r\n        process.env.WEBPACK_BUILD_STAGE !== 'server' ||\r\n        process.env.WEBPACK_BUILD_ENV !== 'prod'\r\n    )\r\n        return;\r\n\r\n    /** @type {String} 打包结果路径 */\r\n    const dist = getDistPath();\r\n\r\n    // 复制文件\r\n    const from = path.resolve(__dirname, 'files-server-deploy');\r\n    for (const filename of fs.readdirSync(from)) {\r\n        await fs.copyFile(\r\n            path.resolve(from, filename),\r\n            path.resolve(dist, filename)\r\n        );\r\n    }\r\n};\r\n\r\nmodule.exports = buildServerAfter;\r\n","const fs = require('fs-extra');\r\nconst path = require('path');\r\nconst spinner = require('../../scripts/commons/spinner');\r\n\r\n/** @type {Boolean} 标记流程是否已运行 */\r\nlet complete = false;\r\n\r\nconst webappBefore = async (data = {}) => {\r\n    let { dist } = data;\r\n    if (!dist) {\r\n        dist = (() => {\r\n            const { dist } = require('../../../koot.config');\r\n\r\n            if (path.isAbsolute(dist)) return dist;\r\n\r\n            return path.resolve(__dirname, '../../../', dist);\r\n        })();\r\n    }\r\n\r\n    if (complete) return;\r\n    if (process.env.WEBPACK_BUILD_ENV !== 'prod') {\r\n        complete = true;\r\n        return;\r\n    }\r\n\r\n    const channel = require('../../channel');\r\n    const repoPath = (() => {\r\n        if (channel === 'yuubari')\r\n            return 'git@github.com:TeamFleet/yuubari-server.git';\r\n        return '';\r\n    })();\r\n    const isDistRepo =\r\n        fs.existsSync(dist) && fs.existsSync(path.resolve(dist, '.git'));\r\n    const step = '准备打包结果目录';\r\n    const waiting = spinner(step + '...');\r\n\r\n    // 如果目标路径存在但不是 git 项目，删除，git clone\r\n    if (!isDistRepo) {\r\n        await fs.remove(dist);\r\n        await fs.ensureDir(dist);\r\n        const git = require('simple-git/promise')(dist);\r\n        await git.clone(repoPath, dist, ['--depth', '1']).catch((err) => {\r\n            waiting.fail(err);\r\n        });\r\n    }\r\n\r\n    const git = require('simple-git/promise')(dist);\r\n\r\n    /** @type {Boolean} 是否有 git repo 操作权限 */\r\n    const hasGitAccess = await (async () => {\r\n        let err;\r\n\r\n        git.silent(true);\r\n\r\n        await git.push('origin', 'master').catch((e) => {\r\n            err = e;\r\n        });\r\n\r\n        git.silent(false);\r\n\r\n        if (err instanceof Error) err = err.message;\r\n        if (typeof err === 'string') return !/permission.+denied/i.test(err);\r\n\r\n        return true;\r\n    })();\r\n\r\n    if (hasGitAccess) {\r\n        // 如果有操作权限，git pull\r\n        await git.reset('hard');\r\n        await git.clean('f');\r\n        await git.pull();\r\n    }\r\n\r\n    waiting.stop();\r\n    // spinner(step).succeed()\r\n    complete = true;\r\n};\r\n\r\nif (!module || !module.parent)\r\n    webappBefore({ dist: path.resolve(__dirname, '../../../', 'dist-webapp') });\r\nelse module.exports = webappBefore;\r\n","const fs = require('fs-extra');\r\nconst path = require('path');\r\n\r\nmodule.exports = /^yuubari/i.test(\r\n    fs.readJsonSync(path.resolve(__dirname, '../package.json')).description\r\n)\r\n    ? 'yuubari'\r\n    : 'stable';\r\n","const path = require('path')\r\nconst fs = require('fs-extra')\r\n\r\nconst {\r\n    bgimgs: pathBgimgs,\r\n    // nodeModules: pathNodeModules,\r\n    assets: pathAssets,\r\n    src: {\r\n        ui: pathUI,\r\n    }\r\n} = require('./directories')\r\n\r\nmodule.exports = {\r\n    __CHANNEL__: JSON.stringify(require('./channel')),\r\n\r\n    __BGIMG_LIST__: JSON.stringify(\r\n        fs.readdirSync(pathBgimgs)\r\n            .filter(file => (\r\n                !fs.lstatSync(path.resolve(pathBgimgs, file)).isDirectory() &&\r\n                path.extname(path.resolve(pathBgimgs, file)) === '.jpg'\r\n            ))\r\n    ),\r\n\r\n    // __SWIPER_CSS__: JSON.stringify(\r\n    //     fs.readFileSync(\r\n    //         path.resolve(pathNodeModules, 'swiper/dist/css/swiper.min.css'),\r\n    //         'utf-8'\r\n    //     )\r\n    // ),\r\n\r\n    __SVG_SYMBOLS__: JSON.stringify(\r\n        fs.readFileSync(\r\n            path.resolve(pathAssets, './symbols/symbol-defs.svg'),\r\n            'utf8'\r\n        )\r\n            .replace(/<title>(.+?)<\\/title>/g, '')\r\n            .replace(/\\n/g, '')\r\n    ),\r\n\r\n    __DEV_COMPONENTS_ROUTES__: JSON.stringify(\r\n        (() => {\r\n            const dir = path.resolve(pathUI, 'pages/dev/components')\r\n            return fs.readdirSync(dir)\r\n                .filter(filename => (\r\n                    fs.lstatSync(path.resolve(dir, filename)).isDirectory()\r\n                ))\r\n                .map(dirname => ({\r\n                    name: dirname.replace(/／/g, '/'),\r\n                    path: dirname.replace(/／/g, '-'),\r\n                    dirname,\r\n                }))\r\n        })()\r\n    )\r\n}\r\n","// const getDistPath = require('koot/utils/get-dist-path');\r\n\r\nconst path = require('path');\r\n\r\nconst pathRoot = path.resolve(__dirname, '../');\r\nconst pathSrc = path.resolve(pathRoot, './src');\r\n\r\nmodule.exports = {\r\n    root: pathRoot,\r\n\r\n    assets: path.resolve(pathSrc, './assets'),\r\n    pics: path.resolve(pathRoot, './pics'),\r\n    nodeModules: path.resolve(pathRoot, './node_modules'),\r\n    bgimgs: path.resolve(\r\n        pathRoot,\r\n        './node_modules/whocallsthefleet-backgrounds/output'\r\n    ),\r\n    static: path.resolve(__dirname, '../.static'),\r\n\r\n    src: {\r\n        _: pathSrc,\r\n        ui: path.resolve(pathSrc, './ui')\r\n    }\r\n\r\n    // getDist: () => getDistPath(),\r\n    // getDistPublic: () => path.resolve(getDistPath(), 'public')\r\n    // getDistIncludes: () => path.resolve(getDistPath(), 'public/includes'),\r\n\r\n    // dist: {\r\n    //     _: pathDist,\r\n    //     public: path.resolve(pathDist, './public'),\r\n    //     includes: path.resolve(pathDist, './public/includes'),\r\n    // }\r\n};\r\n","module.exports = ['zh', 'en', 'ja'];\r\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"./src/scripts sync recursive\";","const path = require('path');\r\nconst fs = require('fs-extra');\r\nconst glob = require('glob');\r\nconst spinner = require('./commons/spinner');\r\n\r\nmodule.exports = async (kootConfig = {}) => {\r\n    // console.log('cleaning source-maps...')\r\n    const waiting = spinner('Cleaning source-maps...');\r\n\r\n    const { __WEBPACK_OUTPUT_PATH: pathPublic } = kootConfig;\r\n\r\n    const removed = [];\r\n    const modified = [];\r\n\r\n    let files;\r\n\r\n    files = await new Promise((resolve, reject) => {\r\n        glob(path.resolve(pathPublic, '**', '*.map'), {}, (err, files) => {\r\n            if (err) return reject(err);\r\n            resolve(files);\r\n        });\r\n    });\r\n    for (let file of files) {\r\n        await fs.removeSync(file);\r\n        removed.push(file);\r\n    }\r\n\r\n    // modify js/css files\r\n    files = await new Promise((resolve, reject) => {\r\n        glob(\r\n            path.resolve(pathPublic, '**', '*.+(js|css)'),\r\n            {},\r\n            (err, files) => {\r\n                if (err) return reject(err);\r\n                resolve(files);\r\n            }\r\n        );\r\n    });\r\n    for (let file of files) {\r\n        const content = await fs.readFile(file, 'utf-8');\r\n        const regex = /\\r?\\n\\/\\/# sourceMappingURL=.+$/;\r\n        if (regex.test(content)) {\r\n            await fs.writeFile(file, content.replace(regex, ''), 'utf-8');\r\n            modified.push(file);\r\n        }\r\n    }\r\n\r\n    waiting.succeed();\r\n\r\n    const logResult = (arr, title) => {\r\n        if (arr.length) {\r\n            console.log(`  > ${title}:`);\r\n            arr.forEach(file => {\r\n                console.log(`    > ${path.relative(pathPublic, file)}`);\r\n            });\r\n        }\r\n    };\r\n    logResult(removed, 'Removed');\r\n    logResult(modified, 'Modified');\r\n};\r\n","const spinners = require('cli-spinners')\r\n\r\nmodule.exports = {\r\n    spinner: spinners.dots,\r\n}","const ProgressBar = require('progress')\r\nconst spinner = require('./spinner')\r\nconst {\r\n    spinner: spinnerObj,\r\n} = require('./consts')\r\n\r\nclass Progress {\r\n    constructor({\r\n        title,\r\n        total,\r\n    }) {\r\n        // this.bar\r\n        // this.interval\r\n        this.title = title\r\n        this.currentFrame = 0\r\n\r\n        this.bar = new ProgressBar(\r\n            `:symbol ${title} [:bar] :current / :total`,\r\n            {\r\n                total,\r\n                width: 20,\r\n                complete: '■',\r\n                incomplete: '─',\r\n                clear: true\r\n            }\r\n        )\r\n\r\n        this.symbolTicking()\r\n        this.interval = setInterval(() => this.symbolTicking(), spinnerObj.interval)\r\n    }\r\n\r\n    symbolTicking() {\r\n        if (!this.bar) return\r\n\r\n        this.bar.tick(0, {\r\n            symbol: '\\x1b[36m' + spinnerObj.frames[this.currentFrame] + '\\x1b[0m'\r\n        })\r\n        this.currentFrame++\r\n        if (this.currentFrame > spinnerObj.frames.length - 1) {\r\n            this.currentFrame = 0\r\n        }\r\n    }\r\n\r\n    tick() {\r\n        if (!this.bar) return\r\n\r\n        this.bar.tick()\r\n        // console.log(' | ', this.bar.curr, this.bar.total)\r\n        if (this.bar.complete) {\r\n            this.complete()\r\n        }\r\n        // if (this.bar.curr >= this.bar.total) {\r\n        //     this.complete()\r\n        // }\r\n    }\r\n\r\n    complete() {\r\n        if (!this.bar) return\r\n        if (this.bar.complete) {\r\n            clearInterval(this.interval)\r\n            this.bar.terminate()\r\n            spinner(this.title).finish()\r\n            this.bar = undefined\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = Progress","const ora = require('ora')\r\nconst {\r\n    spinner\r\n} = require('./consts')\r\n\r\nmodule.exports = (options = {}) => {\r\n    const waiting = ora(\r\n        Object.assign(\r\n            {\r\n                spinner,\r\n                color: 'cyan'\r\n            },\r\n            typeof options === 'string' ? {\r\n                text: options\r\n            } : options\r\n        )\r\n    ).start()\r\n\r\n    // waiting.finish = (options = {}) => {\r\n    //     waiting.stopAndPersist(Object.assign({\r\n    //         symbol: '\\x1b[32m' + '√' + '\\x1b[0m'\r\n    //     }, options))\r\n    //     // waiting.color = 'green'\r\n    // }\r\n    waiting.finish = waiting.succeed\r\n\r\n    return waiting\r\n}","const fs = require('fs-extra');\nconst path = require('path');\nconst md5File = require('md5-file');\n// const ncp = require('ncp').ncp\nconst getDistPath = require('koot/utils/get-dist-path');\n\nconst {\n    root: dirRoot,\n    pics: dirPics,\n    // dist: {\n    //     includes: dirIncludes,\n    // }\n} = require('../directories');\nconst spinner = require('./commons/spinner');\nconst Progress = require('./commons/progress');\n\nmodule.exports = async (kootConfig = {}) => {\n    // const dirIncludes = getDistIncludes();\n\n    const title = 'Copying files...';\n    const waiting = spinner(title);\n\n    const {\n        WEBPACK_BUILD_ENV: ENV,\n        // WEBPACK_BUILD_STAGE: STAGE,\n    } = process.env;\n\n    // console.log(dirDist)\n    // console.log(dirBgimgs)\n\n    const { __CLIENT_ROOT_PATH } = kootConfig;\n\n    const list = [];\n\n    // if (ENV === 'prod' && !process.env.quickStart)\n    //     list.push(...(await getPics(kootConfig)));\n\n    list.forEach((o) => {\n        o.to = path.resolve(__CLIENT_ROOT_PATH, o.to);\n    });\n\n    waiting.stop();\n\n    if (!list.length) return;\n\n    const bar = new Progress({\n        title,\n        total: list.length,\n    });\n\n    for (const { from, to } of list) {\n        if (!fs.existsSync(from)) continue;\n        else if (!fs.existsSync(to)) await fs.copy(from, to);\n        else if (\n            fs.lstatSync(from).isDirectory() ||\n            fs.lstatSync(to).isDirectory()\n        )\n            await fs.copy(from, to);\n        else if (md5File.sync(from) !== md5File.sync(to))\n            await fs.copy(from, to);\n        // await new Promise((resolve, reject) => {\n        //     console.log(' ')\n        //     console.log(o.from)\n        //     console.log(o.to)\n        //     ncp(o.from, o.to, function (err) {\n        //         if (err) {\n        //             console.log(err)\n        //             return reject(err);\n        //         }\n        //         resolve('done!');\n        //     });\n        // })\n        // await new Promise(resolve => {\n        //     setTimeout(() => {\n        //         resolve()\n        //     }, 1000)\n        // })\n        bar.tick();\n    }\n\n    bar.complete();\n};\n\nconst getPics = async (kootConfig = {}) => {\n    // TODO: check version to overwrite\n\n    // const dirTo = '../../pics';\n    const dirTo = path.resolve(getDistPath(), 'pics');\n\n    const results = [];\n    let ships;\n\n    const filelist = {\n        ships: ['0', '0-1', '0-2'],\n        shipsExtra: ['8', '9'],\n        equipments: ['card'],\n    };\n\n    const getDb = async (dbname) => {\n        const arr = [];\n        await new Promise((resolve, reject) => {\n            fs.readFile(\n                path.resolve(\n                    dirRoot,\n                    `./node_modules/whocallsthefleet-database/db/${dbname}.nedb`\n                ),\n                'utf-8',\n                (err, data) => {\n                    if (err) reject(err);\n                    data.split(/\\r?\\n/).forEach((item) => {\n                        if (!item) return;\n                        arr.push(JSON.parse(item));\n                    });\n                    resolve();\n                }\n            );\n        });\n        return arr;\n    };\n\n    const readdir = async (dir) => {\n        return new Promise((resolve, reject) => {\n            fs.readdir(dir, (err, files) => {\n                if (err) reject(err);\n                resolve(files);\n            });\n        });\n    };\n\n    const checkAndCopy = async (type, id, listBasename) => {\n        const dir = path.join(dirPics, type, id);\n        const files = await readdir(dir);\n        files.forEach((filename) => {\n            const extname = path.extname(filename);\n            const basename = path.basename(filename, extname);\n\n            if (Array.isArray(listBasename) && !listBasename.includes(basename))\n                return;\n\n            // const target = path.join(dirTarget, type, id, filename)\n            // if (!fs.existsSync(target))\n            resultAdd(type, id, filename);\n        });\n    };\n\n    const resultAdd = (type, id, file) => {\n        // console.log(type, id, file)\n        results.push({\n            // context: path.resolve(dirPics),\n            // from: `${type}/${id}/${file}`,\n            from: path.resolve(dirPics, type, id, file),\n            to: `${dirTo}/${type}/${id}/${file}`,\n        });\n    };\n\n    for (const type of await readdir(dirPics)) {\n        const dirType = path.join(dirPics, type);\n        for (const id of await readdir(dirType)) {\n            switch (type) {\n                case 'ships': {\n                    if (!ships) {\n                        ships = {};\n                        for (const ship of await getDb('ships')) {\n                            ships[ship.id] = ship;\n                        }\n                    }\n                    if (ships[id] && ships[id].illust_same_as_prev) {\n                        // console.log(id, ships[id].name.ja_jp)\n                        await checkAndCopy(type, id, filelist.ships);\n                    } else\n                        await checkAndCopy(type, id, [\n                            ...filelist.ships,\n                            '8',\n                            '9',\n                            '10',\n                            'special',\n                        ]);\n                    break;\n                }\n                case 'ships-extra':\n                    await checkAndCopy(type, id, filelist.shipsExtra);\n                    break;\n                case 'equipments':\n                    await checkAndCopy(type, id, filelist.equipments);\n                    break;\n                default:\n                    await checkAndCopy(type, id);\n                    break;\n            }\n        }\n    }\n\n    // enemies\n\n    // console.log(results)\n\n    return results;\n};\n","const jsonPretty = require('json-pretty')\r\nconst Datastore = require('nedb-promise')\r\nconst path = require('path')\r\nconst fs = require('fs-extra')\r\n\r\nlet db = {}\r\nlet equipmentCollections = []\r\nlet equipmentCollectionsPretty = []\r\nlet equipmentTypesAppended = []\r\n\r\nconst appendCollection = async (index, name, types) => {\r\n    if (!name.ja_jp) name.ja_jp = name.zh_cn\r\n    if (!name.en_us) name.en_us = name.ja_jp\r\n\r\n    const initSublist = (type, index, subIndex) => {\r\n        equipmentCollections[index].list[subIndex] = {\r\n            type: type,\r\n            equipments: []\r\n        }\r\n    }\r\n\r\n    let subIndex = undefined\r\n    if (Array.isArray(index)) {\r\n        subIndex = index[1]\r\n        index = index[0]\r\n    }\r\n    if (typeof equipmentCollections[index] === 'undefined') {\r\n        equipmentCollections[index] = {\r\n            name, list: []\r\n        }\r\n    }\r\n\r\n    let promises = types.map(async type => new Promise(async function (resolve/*, reject*/) {\r\n        let thisSubIndex\r\n        // console.log(subIndex)\r\n        if (typeof subIndex === 'undefined') {\r\n            thisSubIndex = equipmentCollections[index].list.length\r\n            initSublist(type, index, thisSubIndex)\r\n        } else {\r\n            thisSubIndex = subIndex\r\n        }\r\n\r\n        // console.log(name.zh_cn, type, expandClass, index, thisSubIndex)\r\n\r\n        let equipmentType = (await db.equipmentTypes.cfind({ id: type }).exec())[0]\r\n        // equipmentType = equipmentType[0]\r\n        let equipments = await db.equipments.cfind({ type: type })\r\n            .sort({ [`stat.${equipmentType.main_attribute || 'fire'}`]: 1, 'rarity': 1, id: 1 })\r\n            .exec()\r\n\r\n        // console.log(ships.map(ship => ship.id))\r\n        equipments.forEach(equipment => {\r\n            const l = equipmentCollections[index].list[thisSubIndex].equipments\r\n            // console.log(l.length)\r\n            // console.log(name.zh_cn, equipmentType.name.zh_cn, index, thisSubIndex, l.length, equipment.name.zh_cn)\r\n            l.push(equipment)\r\n        })\r\n\r\n        equipmentTypesAppended.push(type)\r\n\r\n        resolve()\r\n    }));\r\n\r\n    await Promise.all(promises)\r\n}\r\n\r\nmodule.exports = async (dbpath, topath) => {\r\n    // console.log('  > Creating equipment collections...')\r\n\r\n    // 初始化db\r\n    db.equipments = new Datastore({\r\n        filename: path.resolve(dbpath, 'items.nedb'),\r\n        autoload: true\r\n    })\r\n    db.equipmentTypes = new Datastore({\r\n        filename: path.resolve(dbpath, 'item_types.nedb'),\r\n        autoload: true\r\n    })\r\n    db.equipmentTypeCollections = new Datastore({\r\n        filename: path.resolve(dbpath, 'item_type_collections.nedb'),\r\n        autoload: true\r\n    })\r\n\r\n    // 载入所有 equipmentTypeCollections 数据，生成简易表\r\n    let equipmentTypeCollections = await db.equipmentTypeCollections\r\n        .cfind({})\r\n        .sort({ id: 1 })\r\n        .projection({ name: 1, types: 1, _id: 0 })\r\n        .exec()\r\n\r\n    // 根据已载入数据生成 collection\r\n    await Promise.all(equipmentTypeCollections.map(\r\n        async (collection, index) => new Promise(async function (resolve/*, reject*/) {\r\n            await appendCollection(index, collection.name, collection.types)\r\n            resolve()\r\n        }))\r\n    )\r\n\r\n    // 从db载入未处理过的装备，加入到collection中\r\n    let equipmentsRemains = await db.equipments\r\n        .cfind({\r\n            type: { $nin: equipmentTypesAppended }\r\n        })\r\n        .exec()\r\n    if (Array.isArray(equipmentsRemains) && equipmentsRemains.length) {\r\n        // console.log(equipmentsRemains, equipmentsRemains.map(ship => [ship]))\r\n        equipmentCollections[equipmentCollections.length - 1].list.push({\r\n            type: null,\r\n            equipments: equipmentsRemains.map(equipment => [equipment])\r\n        })\r\n    }\r\n\r\n    // 将空数据过滤删除\r\n    equipmentCollections = equipmentCollections.filter(collection => {\r\n        collection.list = collection.list.filter(types => types.equipments.length > 0)\r\n        return (collection.list.length > 0)\r\n    })\r\n\r\n    // 遍历全部collection，将ship object替换为shipId，并生成可读版\r\n    equipmentCollections.forEach((collection, indexCollection) => {\r\n        equipmentCollectionsPretty[indexCollection] = {\r\n            name: collection.name.ja_jp,\r\n            list: []\r\n        }\r\n        collection.list.forEach((equipmentType, indexEquipmentType) => {\r\n            equipmentCollectionsPretty[indexCollection].list[indexEquipmentType] = {\r\n                type: `[${equipmentType.type}]`,\r\n                equipments: equipmentType.equipments.map(equipment => `[${equipment.id}] ${equipment.name.ja_jp}`)\r\n            }\r\n            equipmentCollections[indexCollection].list[indexEquipmentType] = {\r\n                type: equipmentType.type,\r\n                equipments: equipmentType.equipments.map(equipment => equipment.id)\r\n            }\r\n        })\r\n    })\r\n\r\n    // 写入文件\r\n    fs.writeFileSync(\r\n        path.resolve(topath, 'equipment_collections.json'),\r\n        JSON.stringify(equipmentCollections),\r\n        'utf-8'\r\n    )\r\n    fs.writeFileSync(\r\n        path.resolve(topath, 'equipment_collections_pretty.json'),\r\n        jsonPretty(equipmentCollectionsPretty),\r\n        'utf-8'\r\n    )\r\n\r\n    // console.log('    > COMPLETE')\r\n}\r\n","const jsonPretty = require('json-pretty')\r\nconst Datastore = require('nedb-promise')\r\nconst path = require('path')\r\nconst fs = require('fs-extra')\r\nconst kckit = require('kckit')\r\nconst camelCase = require('camelcase')\r\n\r\nlet db = {}\r\nlet shipCollections = []\r\nlet shipCollectionsPretty = []\r\nlet shipSeriesInCollection = []\r\nlet shipTypesAppended = []\r\nlet shipSeries = {}\r\nlet shipClassInited = {}\r\nlet data = {}\r\n\r\nconst appendCollection = async (index, name, types, expandClass) => {\r\n    const initSublist = (type, index, subIndex) => {\r\n        shipCollections[index].list[subIndex] = {\r\n            type: type,\r\n            ships: []\r\n        }\r\n        shipSeriesInCollection[index][subIndex] = {}\r\n    }\r\n\r\n    let subIndex = undefined\r\n    if (Array.isArray(index)) {\r\n        subIndex = index[1]\r\n        index = index[0]\r\n    }\r\n    if (typeof expandClass === 'undefined') expandClass = (types.length < 2)\r\n    if (typeof shipCollections[index] === 'undefined') {\r\n        shipCollections[index] = {\r\n            name, list: []\r\n        }\r\n        shipSeriesInCollection[index] = []\r\n    }\r\n\r\n    let promises = types.map(async type => new Promise(async function (resolve/*, reject*/) {\r\n        let thisSubIndex\r\n        if (Array.isArray(type)) {\r\n            let subIndex = shipCollections[index].list.length\r\n            initSublist(type[0], index, subIndex)\r\n            await appendCollection([index, subIndex], name, type, expandClass)\r\n            resolve()\r\n            return\r\n        } else {\r\n            // console.log(subIndex)\r\n            if (typeof subIndex === 'undefined') {\r\n                thisSubIndex = shipCollections[index].list.length\r\n                initSublist(type, index, thisSubIndex)\r\n            } else {\r\n                thisSubIndex = subIndex\r\n            }\r\n        }\r\n\r\n        // console.log(name.zh_cn, type, expandClass, index, thisSubIndex)\r\n\r\n        let ships = await db.ships.cfind({ type: type })\r\n            .sort({\r\n                'class': 1,\r\n                'class_no': 1,\r\n                'name.ja_jp': 1,\r\n                'name.suffix': 1,\r\n                series: 1,\r\n                suffix: 1,\r\n                id: 1,\r\n                'time_created': 1,\r\n            })\r\n            .exec()\r\n\r\n        if (!shipClassInited[index]) shipClassInited[index] = []\r\n        // if (expandClass) thisSubIndex = -1\r\n\r\n        // console.log(ships.map(ship => ship._navy))\r\n        try {\r\n            ships\r\n                // .sort((a, b) => (\r\n                //     data.ships[a.id].series !== data.ships[b.id].series\r\n                //         ? 1\r\n                //         : 0\r\n                //     // getShip(a).series - getShip(b).series\r\n                // ))\r\n                // .sort((a, b) => {\r\n                //     const navyA = data.ships[a.id]._navy || 'ijn'\r\n                //     const navyB = data.ships[b.id]._navy || 'ijn'\r\n                //     if (navyA === 'ijn') return -1\r\n                //     if (navyB === 'ijn') return 1\r\n                //     if (navyA < navyB) return -1\r\n                //     if (navyA > navyB) return 1\r\n                //     return 0;\r\n                // })\r\n                .forEach(ship => {\r\n                    const series = ship.series\r\n                    let listSeries\r\n\r\n                    if (expandClass && shipClassInited[index].indexOf(ship.class) < 0) {\r\n                        // console.log(ship.class)\r\n                        thisSubIndex = shipClassInited[index].length\r\n                        // thisSubIndex++\r\n                        // classIndex[ship.class_no] = thisSubIndex\r\n                        shipCollections[index].list[thisSubIndex] = {\r\n                            type: type,\r\n                            class: ship.class,\r\n                            ships: []\r\n                        }\r\n                        shipSeriesInCollection[index][thisSubIndex] = {}\r\n                        shipClassInited[index].push(ship.class)\r\n                    }\r\n\r\n                    if (typeof shipSeriesInCollection[index][thisSubIndex][series] === 'undefined') {\r\n                        const i = shipCollections[index].list[thisSubIndex].ships.length\r\n                        shipSeriesInCollection[index][thisSubIndex][series] = i\r\n                        shipCollections[index].list[thisSubIndex].ships[i] = []\r\n                        listSeries = shipCollections[index].list[thisSubIndex].ships[i]\r\n                    } else {\r\n                        listSeries = shipCollections[index].list[thisSubIndex].ships[shipSeriesInCollection[index][thisSubIndex][series]]\r\n                    }\r\n\r\n                    listSeries[shipSeries[series].indexOf(ship.id)] = ship\r\n\r\n                    // console.log(listSeries)\r\n                })\r\n        } catch (e) {\r\n            console.log(e)\r\n        }\r\n\r\n        shipTypesAppended.push(type)\r\n\r\n        resolve()\r\n    }));\r\n\r\n    await Promise.all(promises)\r\n}\r\n\r\nconst initDatabase = async (dbpath) => {\r\n    const raw = {}\r\n    const dbnames = [\r\n        'ships',\r\n        'ship_types',\r\n        'ship_classes',\r\n        'ship_namesuffix',\r\n        'ship_series',\r\n        'items',\r\n        'item_types',\r\n        'entities',\r\n        'consumables',\r\n        'exillusts',\r\n        'exillust_types'\r\n    ]\r\n\r\n    for (let dbname of dbnames) {\r\n        const type = camelCase(dbname)\r\n        raw[type] = await new Promise((resolve, reject) => {\r\n            fs.readFile(\r\n                path.resolve(dbpath, `./${dbname}.nedb`),\r\n                'utf-8',\r\n                (err, data) => {\r\n                    if (err) reject(err)\r\n                    else resolve(data)\r\n                }\r\n            )\r\n        })\r\n    }\r\n\r\n    return kckit.parseRaw(raw)\r\n}\r\n\r\nmodule.exports = async (dbpath, topath) => {\r\n    // console.log('  > Creating ship collections...')\r\n\r\n    data = await initDatabase(dbpath)\r\n    kckit.register({\r\n        db: data\r\n    })\r\n    // console.log(data.ships)\r\n\r\n    // 初始化db\r\n    db.ships = new Datastore({\r\n        filename: path.resolve(dbpath, 'ships.nedb'),\r\n        autoload: true\r\n    })\r\n    db.shipTypeCollections = new Datastore({\r\n        filename: path.resolve(dbpath, 'ship_type_collections.nedb'),\r\n        autoload: true\r\n    })\r\n    db.shipSeries = new Datastore({\r\n        filename: path.resolve(dbpath, 'ship_series.nedb'),\r\n        autoload: true\r\n    })\r\n\r\n    // 载入所有shipTypeCollections数据，生成简易表\r\n    let shipTypeCollections = await db.shipTypeCollections\r\n        .cfind({})\r\n        .sort({ id: 1 })\r\n        .projection({ name: 1, types: 1, _id: 0 })\r\n        .exec()\r\n\r\n    // 载入所有shipSeries数据，生成简易表\r\n    let series = await db.shipSeries.cfind({}).exec()\r\n    series.forEach(doc => {\r\n        shipSeries[parseInt(doc.id)] = doc.ships.map(ship => ship.id)\r\n    })\r\n\r\n    // 根据已载入数据生成collection\r\n    await Promise.all(shipTypeCollections.map(async (collection, index) =>\r\n        new Promise(async function (resolve/*, reject*/) {\r\n            await appendCollection(index, collection.name, collection.types)\r\n            resolve()\r\n        })\r\n    ))\r\n\r\n    // 从db载入未处理过的舰娘，加入到collection中\r\n    let shipsRemains = await db.ships\r\n        .cfind({\r\n            type: { $nin: shipTypesAppended }\r\n        })\r\n        .exec()\r\n    if (Array.isArray(shipsRemains) && shipsRemains.length) {\r\n        // console.log(shipsRemains, shipsRemains.map(ship => [ship]))\r\n        shipCollections[shipCollections.length - 1].list.push({\r\n            type: null,\r\n            ships: shipsRemains.map(ship => [ship])\r\n        })\r\n    }\r\n\r\n    // 将空数据过滤删除\r\n    shipCollections = shipCollections.filter(collection => {\r\n        collection.list = collection.list.filter(types => {\r\n            types.ships = types.ships.filter(series => (series.length > 0))\r\n            return (types.ships.length > 0)\r\n        })\r\n        return (collection.list.length > 0)\r\n    })\r\n\r\n    // 遍历全部collection，根据海军排序\r\n    shipCollections.forEach((collection, indexCollection) => {\r\n        collection.list.forEach((shipType, indexShipType) => {\r\n            shipType.ships\r\n                .filter(arr =>\r\n                    Array.isArray(arr) &&\r\n                    arr.length\r\n                )\r\n            shipType.ships.forEach((series, indexSeries) => {\r\n                shipCollections[indexCollection].list[indexShipType].ships[indexSeries] = series.filter(ship => ship ? true : false)\r\n            })\r\n        })\r\n        if (collection.list[0].class) {\r\n            collection.list.sort((a, b) => {\r\n                const shipA = a.ships[0][0]\r\n                const shipB = b.ships[0][0]\r\n                const navyA = data.ships[shipA.id]._navy || 'ijn'\r\n                const navyB = data.ships[shipB.id]._navy || 'ijn'\r\n                if (navyA === 'ijn' && navyB === 'ijn')\r\n                    return a.class - b.class\r\n                if (navyA < navyB) return -1\r\n                if (navyA > navyB) return 1\r\n                return 0\r\n            })\r\n        } else {\r\n            collection.list.forEach((shipType) => {\r\n                shipType.ships\r\n                    .sort((a, b) => {\r\n                        // console.log(a)\r\n                        const navyA = data.ships[a[0].id]._navy || 'ijn'\r\n                        const navyB = data.ships[b[0].id]._navy || 'ijn'\r\n                        if (navyA === 'ijn' && navyB === 'ijn')\r\n                            return data.ships[a[0].id].class - data.ships[b[0].id].class\r\n                        // if (navyA === 'ijn') return 0\r\n                        // if (navyB === 'ijn') return 0\r\n                        if (navyA < navyB) return -1\r\n                        if (navyA > navyB) return 1\r\n                        return 0\r\n                    })\r\n            })\r\n        }\r\n    })\r\n\r\n    // 遍历全部collection，将ship object替换为shipId，并生成可读版\r\n    shipCollections.forEach((collection, indexCollection) => {\r\n        shipCollectionsPretty[indexCollection] = {\r\n            name: collection.name.ja_jp,\r\n            list: []\r\n        }\r\n        collection.list.forEach((shipType, indexShipType) => {\r\n            shipCollectionsPretty[indexCollection].list[indexShipType] = {\r\n                type: shipType.type,\r\n                ships: []\r\n            }\r\n            if (shipType.class) shipCollectionsPretty[indexCollection].list[indexShipType].class = shipType.class\r\n            shipType.ships.forEach((series, indexSeries) => {\r\n                shipCollectionsPretty[indexCollection].list[indexShipType].ships[indexSeries]\r\n                    = series.filter(ship => ship ? true : false).map(ship => `${ship.name.ja_jp} (ID: ${ship.id}, Suffix: ${ship.name.suffix}, Series: ${ship.series})`)\r\n                shipCollections[indexCollection].list[indexShipType].ships[indexSeries] = series.filter(ship => ship ? true : false).map(ship => ship.id)\r\n            })\r\n        })\r\n    })\r\n\r\n    // 写入文件\r\n    fs.writeFileSync(\r\n        path.resolve(topath, 'ship_collections.json'),\r\n        // LZString.compressToEncodedURIComponent(shipCollections),\r\n        JSON.stringify(shipCollections),\r\n        'utf-8'\r\n    )\r\n    fs.writeFileSync(\r\n        path.resolve(topath, 'ship_collections_pretty.json'),\r\n        // LZString.compressToEncodedURIComponent(shipCollections),\r\n        jsonPretty(shipCollectionsPretty),\r\n        'utf-8'\r\n    )\r\n\r\n    // console.log('    > COMPLETE')\r\n}\r\n","const LZString = require('lz-string');\nconst path = require('path');\nconst fs = require('fs-extra');\nconst spinner = require('./commons/spinner');\n\nconst {\n    src: { _: pathApp },\n} = require('../directories');\n\nconst dbpath = path.resolve(\n    process.cwd(),\n    'node_modules',\n    'whocallsthefleet-database',\n    'db'\n);\nconst topath = path.resolve(pathApp, 'database', 'db');\nconst topathJson = path.resolve(pathApp, 'database', 'json');\n\n/**\n * 预处理所有 .nedb database 文件\n * @async\n */\nmodule.exports = async () => {\n    const stepCompressing = spinner('Compressing database...');\n    const succeed = [];\n\n    // ensure and empty target dir\n    fs.ensureDirSync(topath);\n    fs.emptyDirSync(topath);\n    fs.ensureDirSync(topathJson);\n    fs.emptyDirSync(topathJson);\n\n    fs.readdirSync(dbpath).forEach((file) => {\n        let content = fs.readFileSync(path.resolve(dbpath, file), 'utf8');\n        switch (file) {\n            case 'entities.nedb':\n                content =\n                    content\n                        .split(/\\r?\\n/)\n                        .filter((line) => typeof line !== 'undefined' && line)\n                        .map((line) => {\n                            const json = JSON.parse(line);\n                            delete json.picture;\n                            return JSON.stringify(json);\n                        })\n                        .join('\\n') + '\\r';\n                // fs.writeFile(\n                //     path.resolve(topath, file + '.test'),\n                //     content,\n                //     'utf-8'\n                // )\n                break;\n            default: {\n            }\n        }\n        const { name, ext } = path.parse(file);\n        fs.writeFile(\n            path.resolve(\n                topath,\n                ext === '.json' ? `${name}.json-compressed` : file\n            ),\n            LZString.compressToEncodedURIComponent(content),\n            'utf-8'\n        );\n        succeed.push(file);\n    });\n\n    stepCompressing.succeed();\n    succeed.forEach((file) => {\n        console.log('  > ' + file);\n    });\n\n    const stepCollections = spinner('Creating collections...');\n    await require('./database/ship-collections.js')(dbpath, topathJson);\n    await require('./database/equipment-collections.js')(dbpath, topathJson);\n    stepCollections.succeed();\n};\n\n// run()\n","const path = require('path');\nconst fs = require('fs-extra');\nconst kckit = require('kckit');\nconst sizeOf = require('image-size');\nconst spinner = require('./commons/spinner');\n\nconst {\n    assets: pathAssets,\n    src: { _: pathApp, ui: pathAppUI },\n} = require('../directories');\n\n// const pathAssets = path.resolve(process.cwd(), 'src/app/client/assets/')\nconst pathfile = path.resolve(pathAppUI, './base/less/variables.less');\n\nmodule.exports = async () => {\n    const waiting = spinner('Validating less variables...');\n    const results = [];\n\n    let content = await new Promise((resolve, reject) => {\n        fs.readFile(pathfile, 'utf-8', (err, data) => {\n            if (err) reject(err);\n            else resolve(data);\n        });\n    });\n\n    // max ship level\n    content = content.replace(\n        /@maxlv:([ \\t]*)([0-9]+);/g,\n        `@maxlv:$1${parseInt(kckit.maxShipLv)};`\n    );\n\n    // equipment icons count\n    {\n        const dimensions = sizeOf(\n            path.resolve(pathAssets, 'equiptypeicon.png')\n        );\n        const count = Math.ceil(dimensions.height / dimensions.width);\n        content = content.replace(\n            /@equipment-icons-count:([ \\t]*)([0-9]+);/g,\n            `@equipment-icons-count:$1${parseInt(count)};`\n        );\n        results.push([`equipment-icons-count`, parseInt(count)]);\n    }\n\n    // equipment list stat columns count\n    {\n        const stats = require(path.resolve(\n            __dirname,\n            '../constants/equipment-stats.js'\n        ));\n        // path.resolve(pathApp, 'constants/', 'equipment-stats')\n        content = content.replace(\n            /@equipment-list-stat-count:([ \\t]*)([0-9]+);/g,\n            `@equipment-list-stat-count:$1${parseInt(stats.length + 2)};`\n        );\n        results.push([`equipment-list-stat-count`, parseInt(stats.length + 2)]);\n    }\n\n    // navy flags count\n    {\n        const dimensions = sizeOf(\n            path.resolve(pathAssets, 'navy-flags/normal.png')\n        );\n        const count = Math.floor(dimensions.height / (dimensions.width - 1));\n        content = content.replace(\n            /@navy-flags-count:([ \\t]*)([0-9]+);/g,\n            `@navy-flags-count:$1${parseInt(count)};`\n        );\n        results.push([`navy-flags-count`, parseInt(count)]);\n    }\n\n    await new Promise((resolve, reject) => {\n        fs.writeFile(pathfile, content, 'utf-8', (err) => {\n            if (err) reject(err);\n            else resolve();\n        });\n    });\n\n    waiting.succeed();\n    results.forEach((arr) => {\n        console.log(`  > @${arr[0]}: ${arr[1]}`);\n    });\n};\n\n// run()\n","module.exports = require(\"buffer\");","module.exports = require(\"camelcase\");","module.exports = require(\"chalk\");","module.exports = require(\"child_process\");","module.exports = require(\"cli-spinners\");","module.exports = require(\"debug\");","module.exports = require(\"fs\");","module.exports = require(\"fs-extra\");","module.exports = require(\"glob\");","module.exports = require(\"hoist-non-react-statics\");","module.exports = require(\"image-size\");","module.exports = require(\"inquirer\");","module.exports = require(\"invariant\");","module.exports = require(\"is-port-reachable\");","module.exports = require(\"isomorphic-fetch\");","module.exports = require(\"json-pretty\");","module.exports = require(\"kckit\");","module.exports = require(\"koa\");","module.exports = require(\"koa-convert\");","module.exports = require(\"koa-helmet\");","module.exports = require(\"koa-proxies\");","module.exports = require(\"koa-router\");","module.exports = require(\"koa-static\");","module.exports = require(\"lz-string\");","module.exports = require(\"md5-file\");","module.exports = require(\"nedb-promise\");","module.exports = require(\"ora\");","module.exports = require(\"path\");","module.exports = require(\"portfinder\");","module.exports = require(\"progress\");","module.exports = require(\"react\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-router-redux\");","module.exports = require(\"redux\");","module.exports = require(\"redux-thunk\");","module.exports = require(\"warning\");","module.exports = require(\"webpack\");"],"sourceRoot":""}